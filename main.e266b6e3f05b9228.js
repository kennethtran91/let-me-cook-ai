"use strict";(self.webpackChunklet_me_cook_ai=self.webpackChunklet_me_cook_ai||[]).push([[792],{897:()=>{function he(e){return"function"==typeof e}function yi(e){const n=e(o=>{Error.call(o),o.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vi=yi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((o,r)=>`${r+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function or(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Pt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:o}=this;if(he(o))try{o()}catch(i){t=i instanceof vi?i.errors:[i]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const i of r)try{nf(i)}catch(s){t=t??[],s instanceof vi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new vi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)nf(t);else{if(t instanceof Pt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&or(n,t)}remove(t){const{_finalizers:n}=this;n&&or(n,t),t instanceof Pt&&t._removeParent(this)}}Pt.EMPTY=(()=>{const e=new Pt;return e.closed=!0,e})();const ef=Pt.EMPTY;function tf(e){return e instanceof Pt||e&&"closed"in e&&he(e.remove)&&he(e.add)&&he(e.unsubscribe)}function nf(e){he(e)?e():e.unsubscribe()}const xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_i={setTimeout(e,t,...n){const{delegate:o}=_i;return o?.setTimeout?o.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=_i;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function of(e){_i.setTimeout(()=>{const{onUnhandledError:t}=xn;if(!t)throw e;t(e)})}function rf(){}const gD=Fa("C",void 0,void 0);function Fa(e,t,n){return{kind:e,value:t,error:n}}let Fn=null;function Ci(e){if(xn.useDeprecatedSynchronousErrorHandling){const t=!Fn;if(t&&(Fn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:o}=Fn;if(Fn=null,n)throw o}}else e()}class ka extends Pt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,tf(t)&&t.add(this)):this.destination=DD}static create(t,n,o){return new rr(t,n,o)}next(t){this.isStopped?Va(function yD(e){return Fa("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Va(function mD(e){return Fa("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Va(gD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _D=Function.prototype.bind;function La(e,t){return _D.call(e,t)}class CD{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(o){Ei(o)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(o){Ei(o)}else Ei(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ei(n)}}}class rr extends ka{constructor(t,n,o){let r;if(super(),he(t)||!t)r={next:t??void 0,error:n??void 0,complete:o??void 0};else{let i;this&&xn.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&La(t.next,i),error:t.error&&La(t.error,i),complete:t.complete&&La(t.complete,i)}):r=t}this.destination=new CD(r)}}function Ei(e){xn.useDeprecatedSynchronousErrorHandling?function vD(e){xn.useDeprecatedSynchronousErrorHandling&&Fn&&(Fn.errorThrown=!0,Fn.error=e)}(e):of(e)}function Va(e,t){const{onStoppedNotification:n}=xn;n&&_i.setTimeout(()=>n(e,t))}const DD={closed:!0,next:rf,error:function ED(e){throw e},complete:rf},Oa="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ua(e){return e}let He=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const o=new e;return o.source=this,o.operator=n,o}subscribe(n,o,r){const i=function TD(e){return e&&e instanceof ka||function ID(e){return e&&he(e.next)&&he(e.error)&&he(e.complete)}(e)&&tf(e)}(n)?n:new rr(n,o,r);return Ci(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(o){n.error(o)}}forEach(n,o){return new(o=af(o))((r,i)=>{const s=new rr({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:r});this.subscribe(s)})}_subscribe(n){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(n)}[Oa](){return this}pipe(...n){return function sf(e){return 0===e.length?Ua:1===e.length?e[0]:function(n){return e.reduce((o,r)=>r(o),n)}}(n)(this)}toPromise(n){return new(n=af(n))((o,r)=>{let i;this.subscribe(s=>i=s,s=>r(s),()=>o(i))})}}return e.create=t=>new e(t),e})();function af(e){var t;return null!==(t=e??xn.Promise)&&void 0!==t?t:Promise}const wD=yi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Di=(()=>{class e extends He{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const o=new lf(this,this);return o.operator=n,o}_throwIfClosed(){if(this.closed)throw new wD}next(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const o of this.currentObservers)o.next(n)}})}error(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:o}=this;for(;o.length;)o.shift().error(n)}})}complete(){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:o,isStopped:r,observers:i}=this;return o||r?ef:(this.currentObservers=null,i.push(n),new Pt(()=>{this.currentObservers=null,or(i,n)}))}_checkFinalizedStatuses(n){const{hasError:o,thrownError:r,isStopped:i}=this;o?n.error(r):i&&n.complete()}asObservable(){const n=new He;return n.source=this,n}}return e.create=(t,n)=>new lf(t,n),e})();class lf extends Di{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,o;null===(o=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===o||o.call(n,t)}error(t){var n,o;null===(o=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===o||o.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,o;return null!==(o=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==o?o:ef}}function kn(e){return t=>{if(function SD(e){return he(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function pn(e,t,n,o,r){return new MD(e,t,n,o,r)}class MD extends ka{constructor(t,n,o,r,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ba(e,t){return kn((n,o)=>{let r=0;n.subscribe(pn(o,i=>{o.next(e.call(t,i,r++))}))})}function hn(e){return this instanceof hn?(this.v=e,this):new hn(e)}function ff(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function qa(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){!function r(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}(a,l,(s=e[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const pf=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function hf(e){return he(e?.then)}function gf(e){return he(e[Oa])}function mf(e){return Symbol.asyncIterator&&he(e?.[Symbol.asyncIterator])}function yf(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vf=function eI(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function _f(e){return he(e?.[vf])}function Cf(e){return function df(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(m){return Promise.resolve(m).then(h,p)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,m){o[h]&&(r[h]=function(y){return new Promise(function(_,C){i.push([h,y,_,C])>1||l(h,y)})},m&&(r[h]=m(r[h])))}function l(h,m){try{!function c(h){h.value instanceof hn?Promise.resolve(h.value.v).then(f,p):g(i[0][2],h)}(o[h](m))}catch(y){g(i[0][3],y)}}function f(h){l("next",h)}function p(h){l("throw",h)}function g(h,m){h(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:o,done:r}=yield hn(n.read());if(r)return yield hn(void 0);yield yield hn(o)}}finally{n.releaseLock()}})}function Ef(e){return he(e?.getReader)}function xt(e){if(e instanceof He)return e;if(null!=e){if(gf(e))return function tI(e){return new He(t=>{const n=e[Oa]();if(he(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(pf(e))return function nI(e){return new He(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(hf(e))return function oI(e){return new He(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,of)})}(e);if(mf(e))return Df(e);if(_f(e))return function rI(e){return new He(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Ef(e))return function iI(e){return Df(Cf(e))}(e)}throw yf(e)}function Df(e){return new He(t=>{(function sI(e,t){var n,o,r,i;return function uf(e,t,n,o){return new(n||(n=Promise))(function(i,s){function a(f){try{c(o.next(f))}catch(p){s(p)}}function l(f){try{c(o.throw(f))}catch(p){s(p)}}function c(f){f.done?i(f.value):function r(i){return i instanceof n?i:new n(function(s){s(i)})}(f.value).then(a,l)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ff(e);!(o=yield n.next()).done;)if(t.next(o.value),t.closed)return}catch(s){r={error:s}}finally{try{o&&!o.done&&(i=n.return)&&(yield i.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function gn(e,t,n,o=0,r=!1){const i=t.schedule(function(){n(),r?e.add(this.schedule(null,o)):this.unsubscribe()},o);if(e.add(i),!r)return i}function If(e,t,n=1/0){return he(t)?If((o,r)=>Ba((i,s)=>t(o,i,r,s))(xt(e(o,r))),n):("number"==typeof t&&(n=t),kn((o,r)=>function aI(e,t,n,o,r,i,s,a){const l=[];let c=0,f=0,p=!1;const g=()=>{p&&!l.length&&!c&&t.complete()},h=y=>c<o?m(y):l.push(y),m=y=>{i&&t.next(y),c++;let _=!1;xt(n(y,f++)).subscribe(pn(t,C=>{r?.(C),i?h(C):t.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<o;){const C=l.shift();s?gn(t,s,()=>m(C)):m(C)}g()}catch(C){t.error(C)}}))};return e.subscribe(pn(t,h,()=>{p=!0,g()})),()=>{a?.()}}(o,r,e,n)))}const Tf=new He(e=>e.complete());function Wa(e){return e[e.length-1]}function wf(e){return function cI(e){return e&&he(e.schedule)}(Wa(e))?e.pop():void 0}function Sf(e,t=0){return kn((n,o)=>{n.subscribe(pn(o,r=>gn(o,e,()=>o.next(r),t),()=>gn(o,e,()=>o.complete(),t),r=>gn(o,e,()=>o.error(r),t)))})}function Mf(e,t=0){return kn((n,o)=>{o.add(e.schedule(()=>n.subscribe(o),t))})}function Af(e,t){if(!e)throw new Error("Iterable cannot be null");return new He(n=>{gn(n,t,()=>{const o=e[Symbol.asyncIterator]();gn(n,t,()=>{o.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Ja(e,t){return t?function vI(e,t){if(null!=e){if(gf(e))return function pI(e,t){return xt(e).pipe(Mf(t),Sf(t))}(e,t);if(pf(e))return function gI(e,t){return new He(n=>{let o=0;return t.schedule(function(){o===e.length?n.complete():(n.next(e[o++]),n.closed||this.schedule())})})}(e,t);if(hf(e))return function hI(e,t){return xt(e).pipe(Mf(t),Sf(t))}(e,t);if(mf(e))return Af(e,t);if(_f(e))return function mI(e,t){return new He(n=>{let o;return gn(n,t,()=>{o=e[vf](),gn(n,t,()=>{let r,i;try{({value:r,done:i}=o.next())}catch(s){return void n.error(s)}i?n.complete():n.next(r)},0,!0)}),()=>he(o?.return)&&o.return()})}(e,t);if(Ef(e))return function yI(e,t){return Af(Cf(e),t)}(e,t)}throw yf(e)}(e,t):xt(e)}function _I(...e){const t=wf(e),n=function fI(e,t){return"number"==typeof Wa(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?xt(o[0]):function lI(e=1/0){return If(Ua,e)}(n)(Ja(o,t)):Tf}class CI extends Di{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:o}=this;if(t)throw n;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}function Nf(e={}){const{connector:t=(()=>new Di),resetOnError:n=!0,resetOnComplete:o=!0,resetOnRefCountZero:r=!0}=e;return i=>{let s,a,l,c=0,f=!1,p=!1;const g=()=>{a?.unsubscribe(),a=void 0},h=()=>{g(),s=l=void 0,f=p=!1},m=()=>{const y=s;h(),y?.unsubscribe()};return kn((y,_)=>{c++,!p&&!f&&g();const C=l=l??t();_.add(()=>{c--,0===c&&!p&&!f&&(a=Ya(m,r))}),C.subscribe(_),!s&&c>0&&(s=new rr({next:v=>C.next(v),error:v=>{p=!0,g(),a=Ya(h,n,v),C.error(v)},complete:()=>{f=!0,g(),a=Ya(h,o),C.complete()}}),xt(y).subscribe(s))})(i)}}function Ya(e,t,...n){if(!0===t)return void e();if(!1===t)return;const o=new rr({next:()=>{o.unsubscribe(),e()}});return xt(t(...n)).subscribe(o)}function TI(e,t){return e===t}function X(e){for(let t in e)if(e[t]===X)return t;throw Error("Could not find renamed property on target object.")}function Ii(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Se(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Se).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ka(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const wI=X({__forward_ref__:X});function se(e){return e.__forward_ref__=se,e.toString=function(){return Se(this())},e}function F(e){return Za(e)?e():e}function Za(e){return"function"==typeof e&&e.hasOwnProperty(wI)&&e.__forward_ref__===se}function Qa(e){return e&&!!e.\u0275providers}class S extends Error{constructor(t,n){super(function Ti(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function k(e){return"string"==typeof e?e:null==e?"":String(e)}function Xa(e,t){throw new S(-201,!1)}function pt(e,t){null==e&&function P(e,t,n,o){throw new Error(`ASSERTION ERROR: ${e}`+(null==o?"":` [Expected=> ${n} ${o} ${t} <=Actual]`))}(t,e,null,"!=")}function j(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Jt(e){return{providers:e.providers||[],imports:e.imports||[]}}function wi(e){return bf(e,Mi)||bf(e,Pf)}function bf(e,t){return e.hasOwnProperty(t)?e[t]:null}function Si(e){return e&&(e.hasOwnProperty(ja)||e.hasOwnProperty(PI))?e[ja]:null}const Mi=X({\u0275prov:X}),ja=X({\u0275inj:X}),Pf=X({ngInjectableDef:X}),PI=X({ngInjectorDef:X});var $=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}($||{});let el;function Xe(e){const t=el;return el=e,t}function Ff(e,t,n){const o=wi(e);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:n&$.Optional?null:void 0!==t?t:void Xa(Se(e))}const ae=globalThis;class b{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ir={},il="__NG_DI_FLAG__",Ai="ngTempTokenPath",kI=/\n/gm,Lf="__source";let jn;function mn(e){const t=jn;return jn=e,t}function OI(e,t=$.Default){if(void 0===jn)throw new S(-203,!1);return null===jn?Ff(e,void 0,t):jn.get(e,t&$.Optional?null:void 0,t)}function q(e,t=$.Default){return(function xf(){return el}()||OI)(F(e),t)}function re(e,t=$.Default){return q(e,Ni(t))}function Ni(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function sl(e){const t=[];for(let n=0;n<e.length;n++){const o=F(e[n]);if(Array.isArray(o)){if(0===o.length)throw new S(900,!1);let r,i=$.Default;for(let s=0;s<o.length;s++){const a=o[s],l=UI(a);"number"==typeof l?-1===l?r=a.token:i|=l:r=a}t.push(q(r,i))}else t.push(q(o))}return t}function sr(e,t){return e[il]=t,e.prototype[il]=t,e}function UI(e){return e[il]}function Yt(e){return{toString:e}.toString()}var Ri=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ri||{}),Et=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Et||{});const Ft={},J=[],bi=X({\u0275cmp:X}),al=X({\u0275dir:X}),ll=X({\u0275pipe:X}),Of=X({\u0275mod:X}),Kt=X({\u0275fac:X}),ar=X({__NG_ELEMENT_ID__:X}),Uf=X({__NG_ENV_ID__:X});function Bf(e,t,n){let o=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const i=t.length;if(r+i===o||e.charCodeAt(r+i)<=32)return r}n=r+1}}function ul(e,t,n){let o=0;for(;o<n.length;){const r=n[o];if("number"==typeof r){if(0!==r)break;o++;const i=n[o++],s=n[o++],a=n[o++];e.setAttribute(t,s,a,i)}else{const i=r,s=n[++o];Gf(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),o++}}return o}function Hf(e){return 3===e||4===e||6===e}function Gf(e){return 64===e.charCodeAt(0)}function lr(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let o=0;o<t.length;o++){const r=t[o];"number"==typeof r?n=r:0===n||$f(e,n,r,null,-1===n||2===n?t[++o]:null)}}return e}function $f(e,t,n,o,r){let i=0,s=e.length;if(-1===t)s=-1;else for(;i<e.length;){const a=e[i++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=i-1;break}}}for(;i<e.length;){const a=e[i];if("number"==typeof a)break;if(a===n){if(null===o)return void(null!==r&&(e[i+1]=r));if(o===e[i+1])return void(e[i+2]=r)}i++,null!==o&&i++,null!==r&&i++}-1!==s&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),null!==o&&e.splice(i++,0,o),null!==r&&e.splice(i++,0,r)}const qf="ng-template";function GI(e,t,n){let o=0,r=!0;for(;o<e.length;){let i=e[o++];if("string"==typeof i&&r){const s=e[o++];if(n&&"class"===i&&-1!==Bf(s.toLowerCase(),t,0))return!0}else{if(1===i){for(;o<e.length&&"string"==typeof(i=e[o++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(r=!1)}}return!1}function zf(e){return 4===e.type&&e.value!==qf}function $I(e,t,n){return t===(4!==e.type||n?e.value:qf)}function qI(e,t,n){let o=4;const r=e.attrs||[],i=function JI(e){for(let t=0;t<e.length;t++)if(Hf(e[t]))return t;return e.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&o){if(o=2|1&o,""!==l&&!$I(e,l,n)||""===l&&1===t.length){if(Dt(o))return!1;s=!0}}else{const c=8&o?l:t[++a];if(8&o&&null!==e.attrs){if(!GI(e.attrs,c,n)){if(Dt(o))return!1;s=!0}continue}const p=zI(8&o?"class":l,r,zf(e),n);if(-1===p){if(Dt(o))return!1;s=!0;continue}if(""!==c){let g;g=p>i?"":r[p+1].toLowerCase();const h=8&o?g:null;if(h&&-1!==Bf(h,c,0)||2&o&&c!==g){if(Dt(o))return!1;s=!0}}}}else{if(!s&&!Dt(o)&&!Dt(l))return!1;if(s&&Dt(l))continue;s=!1,o=l|1&o}}return Dt(o)||s}function Dt(e){return 0==(1&e)}function zI(e,t,n,o){if(null===t)return-1;let r=0;if(o||!n){let i=!1;for(;r<t.length;){const s=t[r];if(s===e)return r;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=i?1:2}return-1}return function YI(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const o=e[n];if("number"==typeof o)return-1;if(o===t)return n;n++}return-1}(t,e)}function Wf(e,t,n=!1){for(let o=0;o<t.length;o++)if(qI(e,t[o],n))return!0;return!1}function Jf(e,t){return e?":not("+t.trim()+")":t}function ZI(e){let t=e[0],n=1,o=2,r="",i=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&o){const a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&o?r+="."+s:4&o&&(r+=" "+s);else""!==r&&!Dt(s)&&(t+=Jf(i,r),r=""),o=s,i=i||!Dt(o);n++}return""!==r&&(t+=Jf(i,r)),t}function Pi(e){return Yt(()=>{const t=Kf(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ri.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Et.Emulated,styles:e.styles||J,_:null,schemas:e.schemas||null,tView:null,id:""};Zf(n);const o=e.dependencies;return n.directiveDefs=xi(o,!1),n.pipeDefs=xi(o,!0),n.id=function rT(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const r of n)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function eT(e){return z(e)||Ne(e)}function tT(e){return null!==e}function yn(e){return Yt(()=>({type:e.type,bootstrap:e.bootstrap||J,declarations:e.declarations||J,imports:e.imports||J,exports:e.exports||J,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Yf(e,t){if(null==e)return Ft;const n={};for(const o in e)if(e.hasOwnProperty(o)){let r=e[o],i=r;Array.isArray(r)&&(i=r[1],r=r[0]),n[r]=o,t&&(t[r]=i)}return n}function O(e){return Yt(()=>{const t=Kf(e);return Zf(t),t})}function z(e){return e[bi]||null}function Ne(e){return e[al]||null}function Ge(e){return e[ll]||null}function Kf(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ft,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||J,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yf(e.inputs,t),outputs:Yf(e.outputs)}}function Zf(e){e.features?.forEach(t=>t(e))}function xi(e,t){if(!e)return null;const n=t?Ge:eT;return()=>("function"==typeof e?e():e).map(o=>n(o)).filter(tT)}const me=0,A=1,B=2,fe=3,It=4,cr=5,ke=6,eo=7,Ee=8,vn=9,to=10,L=11,dr=12,Qf=13,no=14,De=15,fr=16,oo=17,kt=18,pr=19,Xf=20,_n=21,Zt=22,hr=23,gr=24,H=25,cl=1,jf=2,Lt=7,ro=9,Re=11;function et(e){return Array.isArray(e)&&"object"==typeof e[cl]}function $e(e){return Array.isArray(e)&&!0===e[cl]}function dl(e){return 0!=(4&e.flags)}function Vn(e){return e.componentOffset>-1}function ki(e){return 1==(1&e.flags)}function Tt(e){return!!e.template}function fl(e){return 0!=(512&e[B])}function On(e,t){return e.hasOwnProperty(Kt)?e[Kt]:null}let be=null,Li=!1;function ht(e){const t=be;return be=e,t}const np={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function rp(e){if(!yr(e)||e.dirty){if(!e.producerMustRecompute(e)&&!ap(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function sp(e){e.dirty=!0,function ip(e){if(void 0===e.liveConsumerNode)return;const t=Li;Li=!0;try{for(const n of e.liveConsumerNode)n.dirty||sp(n)}finally{Li=t}}(e),e.consumerMarkedDirty?.(e)}function hl(e){return e&&(e.nextProducerIndex=0),ht(e)}function gl(e,t){if(ht(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(yr(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Vi(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ap(e){io(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],o=e.producerLastReadVersion[t];if(o!==n.version||(rp(n),o!==n.version))return!0}return!1}function lp(e){if(io(e),yr(e))for(let t=0;t<e.producerNode.length;t++)Vi(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Vi(e,t){if(function cp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),io(e),1===e.liveConsumerNode.length)for(let o=0;o<e.producerNode.length;o++)Vi(e.producerNode[o],e.producerIndexOfThis[o]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const o=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];io(r),r.producerIndexOfThis[o]=t}}function yr(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function io(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let dp=null;const gp=()=>{},yT=(()=>({...np,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:gp}))();class vT{constructor(t,n,o){this.previousValue=t,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}}function Qt(){return mp}function mp(e){return e.type.prototype.ngOnChanges&&(e.setInput=CT),_T}function _T(){const e=vp(this),t=e?.current;if(t){const n=e.previous;if(n===Ft)e.previous=t;else for(let o in t)n[o]=t[o];e.current=null,this.ngOnChanges(t)}}function CT(e,t,n,o){const r=this.declaredInputs[n],i=vp(e)||function ET(e,t){return e[yp]=t}(e,{previous:Ft,current:null}),s=i.current||(i.current={}),a=i.previous,l=a[r];s[r]=new vT(l&&l.currentValue,t,a===Ft),e[o]=t}Qt.ngInherit=!0;const yp="__ngSimpleChanges__";function vp(e){return e[yp]||null}const Vt=function(e,t,n){};function le(e){for(;Array.isArray(e);)e=e[me];return e}function Oi(e,t){return le(t[e])}function tt(e,t){return le(t[e.index])}function Ep(e,t){return e.data[t]}function at(e,t){const n=t[e];return et(n)?n:n[me]}function En(e,t){return null==t?null:e[t]}function Dp(e){e[oo]=0}function MT(e){1024&e[B]||(e[B]|=1024,Tp(e,1))}function Ip(e){1024&e[B]&&(e[B]&=-1025,Tp(e,-1))}function Tp(e,t){let n=e[fe];if(null===n)return;n[cr]+=t;let o=n;for(n=n[fe];null!==n&&(1===t&&1===o[cr]||-1===t&&0===o[cr]);)n[cr]+=t,o=n,n=n[fe]}const x={lFrame:kp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mp(){return x.bindingsEnabled}function D(){return x.lFrame.lView}function W(){return x.lFrame.tView}function Pe(){let e=Ap();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ap(){return x.lFrame.currentTNode}function Ot(e,t){const n=x.lFrame;n.currentTNode=e,n.isParent=t}function Cl(){return x.lFrame.isParent}function El(){x.lFrame.isParent=!1}function lo(){return x.lFrame.bindingIndex++}function jt(e){const t=x.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function HT(e,t){const n=x.lFrame;n.bindingIndex=n.bindingRootIndex=e,Dl(t)}function Dl(e){x.lFrame.currentDirectiveIndex=e}function Tl(e){x.lFrame.currentQueryIndex=e}function $T(e){const t=e[A];return 2===t.type?t.declTNode:1===t.type?e[ke]:null}function xp(e,t,n){if(n&$.SkipSelf){let r=t,i=e;for(;!(r=r.parent,null!==r||n&$.Host||(r=$T(i),null===r||(i=i[no],10&r.type))););if(null===r)return!1;t=r,e=i}const o=x.lFrame=Fp();return o.currentTNode=t,o.lView=e,!0}function wl(e){const t=Fp(),n=e[A];x.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Fp(){const e=x.lFrame,t=null===e?null:e.child;return null===t?kp(e):t}function kp(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Lp(){const e=x.lFrame;return x.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Vp=Lp;function Sl(){const e=Lp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ze(){return x.lFrame.selectedIndex}function Un(e){x.lFrame.selectedIndex=e}let Up=!0;function Ui(){return Up}function Dn(e){Up=e}function Bi(e,t){for(let n=t.directiveStart,o=t.directiveEnd;n<o;n++){const i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=f&&(e.destroyHooks??=[]).push(n,f)}}function Hi(e,t,n){Bp(e,t,3,n)}function Gi(e,t,n,o){(3&e[B])===n&&Bp(e,t,n,o)}function Ml(e,t){let n=e[B];(3&n)===t&&(n&=8191,n+=1,e[B]=n)}function Bp(e,t,n,o){const i=o??-1,s=t.length-1;let a=0;for(let l=void 0!==o?65535&e[oo]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=o&&a>=o)break}else t[l]<0&&(e[oo]+=65536),(a<i||-1==i)&&(QT(e,n,t,l),e[oo]=(4294901760&e[oo])+l+2),l++}function Hp(e,t){Vt(4,e,t);const n=ht(null);try{t.call(e)}finally{ht(n),Vt(5,e,t)}}function QT(e,t,n,o){const r=n[o]<0,i=n[o+1],a=e[r?-n[o]:n[o]];r?e[B]>>13<e[oo]>>16&&(3&e[B])===t&&(e[B]+=8192,Hp(a,i)):Hp(a,i)}const uo=-1;class _r{constructor(t,n,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=o}}function Nl(e){return e!==uo}function Cr(e){return 32767&e}function Er(e,t){let n=function tw(e){return e>>16}(e),o=t;for(;n>0;)o=o[no],n--;return o}let Rl=!0;function $i(e){const t=Rl;return Rl=e,t}const Gp=255,$p=5;let nw=0;const Ut={};function qi(e,t){const n=qp(e,t);if(-1!==n)return n;const o=t[A];o.firstCreatePass&&(e.injectorIndex=t.length,bl(o.data,e),bl(t,null),bl(o.blueprint,null));const r=zi(e,t),i=e.injectorIndex;if(Nl(r)){const s=Cr(r),a=Er(r,t),l=a[A].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=r,i}function bl(e,t){e.push(0,0,0,0,0,0,0,0,t)}function qp(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function zi(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,o=null,r=t;for(;null!==r;){if(o=Qp(r),null===o)return uo;if(n++,r=r[no],-1!==o.injectorIndex)return o.injectorIndex|n<<16}return uo}function Pl(e,t,n){!function ow(e,t,n){let o;"string"==typeof n?o=n.charCodeAt(0)||0:n.hasOwnProperty(ar)&&(o=n[ar]),null==o&&(o=n[ar]=nw++);const r=o&Gp;t.data[e+(r>>$p)]|=1<<r}(e,t,n)}function zp(e,t,n){if(n&$.Optional||void 0!==e)return e;Xa()}function Wp(e,t,n,o){if(n&$.Optional&&void 0===o&&(o=null),!(n&($.Self|$.Host))){const r=e[vn],i=Xe(void 0);try{return r?r.get(t,o,n&$.Optional):Ff(t,o,n&$.Optional)}finally{Xe(i)}}return zp(o,0,n)}function Jp(e,t,n,o=$.Default,r){if(null!==e){if(2048&t[B]&&!(o&$.Self)){const s=function uw(e,t,n,o,r){let i=e,s=t;for(;null!==i&&null!==s&&2048&s[B]&&!(512&s[B]);){const a=Yp(i,s,n,o|$.Self,Ut);if(a!==Ut)return a;let l=i.parent;if(!l){const c=s[Xf];if(c){const f=c.get(n,Ut,o);if(f!==Ut)return f}l=Qp(s),s=s[no]}i=l}return r}(e,t,n,o,Ut);if(s!==Ut)return s}const i=Yp(e,t,n,o,Ut);if(i!==Ut)return i}return Wp(t,n,o,r)}function Yp(e,t,n,o,r){const i=function sw(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ar)?e[ar]:void 0;return"number"==typeof t?t>=0?t&Gp:lw:t}(n);if("function"==typeof i){if(!xp(t,e,o))return o&$.Host?zp(r,0,o):Wp(t,n,o,r);try{let s;if(s=i(o),null!=s||o&$.Optional)return s;Xa()}finally{Vp()}}else if("number"==typeof i){let s=null,a=qp(e,t),l=uo,c=o&$.Host?t[De][ke]:null;for((-1===a||o&$.SkipSelf)&&(l=-1===a?zi(e,t):t[a+8],l!==uo&&Zp(o,!1)?(s=t[A],a=Cr(l),t=Er(l,t)):a=-1);-1!==a;){const f=t[A];if(Kp(i,a,f.data)){const p=iw(a,t,n,s,o,c);if(p!==Ut)return p}l=t[a+8],l!==uo&&Zp(o,t[A].data[a+8]===c)&&Kp(i,a,t)?(s=f,a=Cr(l),t=Er(l,t)):a=-1}}return r}function iw(e,t,n,o,r,i){const s=t[A],a=s.data[e+8],f=function Wi(e,t,n,o,r){const i=e.providerIndexes,s=t.data,a=1048575&i,l=e.directiveStart,f=i>>20,g=r?a+f:e.directiveEnd;for(let h=o?a:a+f;h<g;h++){const m=s[h];if(h<l&&n===m||h>=l&&m.type===n)return h}if(r){const h=s[l];if(h&&Tt(h)&&h.type===n)return l}return null}(a,s,n,null==o?Vn(a)&&Rl:o!=s&&0!=(3&a.type),r&$.Host&&i===a);return null!==f?Bn(t,s,f,a):Ut}function Bn(e,t,n,o){let r=e[n];const i=t.data;if(function XT(e){return e instanceof _r}(r)){const s=r;s.resolving&&function SI(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new S(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Q(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():k(e)}(i[n]));const a=$i(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Xe(s.injectImpl):null;xp(e,o,$.Default);try{r=e[n]=s.factory(void 0,i,e,o),t.firstCreatePass&&n>=o.directiveStart&&function ZT(e,t,n){const{ngOnChanges:o,ngOnInit:r,ngDoCheck:i}=t.type.prototype;if(o){const s=mp(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}r&&(n.preOrderHooks??=[]).push(0-e,r),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}(n,i[n],t)}finally{null!==c&&Xe(c),$i(a),s.resolving=!1,Vp()}}return r}function Kp(e,t,n){return!!(n[t+(e>>$p)]&1<<e)}function Zp(e,t){return!(e&$.Self||e&$.Host&&t)}class We{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,o){return Jp(this._tNode,this._lView,t,Ni(o),n)}}function lw(){return new We(Pe(),D())}function xl(e){return Za(e)?()=>{const t=xl(F(e));return t&&t()}:On(e)}function Qp(e){const t=e[A],n=t.type;return 2===n?t.declTNode:1===n?e[ke]:null}const fo="__parameters__";function ho(e,t,n){return Yt(()=>{const o=function kl(e){return function(...n){if(e){const o=e(...n);for(const r in o)this[r]=o[r]}}}(t);function r(...i){if(this instanceof r)return o.apply(this,i),this;const s=new r(...i);return a.annotation=s,a;function a(l,c,f){const p=l.hasOwnProperty(fo)?l[fo]:Object.defineProperty(l,fo,{value:[]})[fo];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}function mo(e,t){e.forEach(n=>Array.isArray(n)?mo(n,t):t(n))}function jp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ji(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lt(e,t,n){let o=yo(e,t);return o>=0?e[1|o]=n:(o=~o,function mw(e,t,n,o){let r=e.length;if(r==t)e.push(n,o);else if(1===r)e.push(o,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=o}}(e,o,t,n)),o}function Ll(e,t){const n=yo(e,t);if(n>=0)return e[1|n]}function yo(e,t){return function eh(e,t,n){let o=0,r=e.length>>n;for(;r!==o;){const i=o+(r-o>>1),s=e[i<<n];if(t===s)return i<<n;s>t?r=i:o=i+1}return~(r<<n)}(e,t,1)}const Ol=sr(ho("Optional"),8),Ul=sr(ho("SkipSelf"),4);function ji(e){return 128==(128&e.flags)}var In=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(In||{});const Vw=/^>|^->|<!--|-->|--!>|<!-$/g,Ow=/(<|>)/g,Uw="\u200b$1\u200b";const $l=new Map;let Bw=0;const zl="__ngContext__";function Ve(e,t){et(t)?(e[zl]=t[pr],function Gw(e){$l.set(e[pr],e)}(t)):e[zl]=t}let Wl;function Jl(e,t){return Wl(e,t)}function Mr(e){const t=e[fe];return $e(t)?t[fe]:t}function Ch(e){return Dh(e[dr])}function Eh(e){return Dh(e[It])}function Dh(e){for(;null!==e&&!$e(e);)e=e[It];return e}function Co(e,t,n,o,r){if(null!=o){let i,s=!1;$e(o)?i=o:et(o)&&(s=!0,o=o[me]);const a=le(o);0===e&&null!==n?null==r?Sh(t,n,a):Hn(t,n,a,r||null,!0):1===e&&null!==n?Hn(t,n,a,r||null,!0):2===e?function ss(e,t,n){const o=rs(e,t);o&&function aS(e,t,n,o){e.removeChild(t,n,o)}(e,o,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=i&&function cS(e,t,n,o,r){const i=n[Lt];i!==le(n)&&Co(t,e,o,i,r);for(let a=Re;a<n.length;a++){const l=n[a];Nr(l[A],l,e,t,o,i)}}(t,e,i,n,r)}}function Yl(e,t){return e.createComment(function fh(e){return e.replace(Vw,t=>t.replace(Ow,Uw))}(t))}function ns(e,t,n){return e.createElement(t,n)}function Th(e,t){const n=e[ro],o=n.indexOf(t);Ip(t),n.splice(o,1)}function os(e,t){if(e.length<=Re)return;const n=Re+t,o=e[n];if(o){const r=o[fr];null!==r&&r!==e&&Th(r,o),t>0&&(e[n-1][It]=o[It]);const i=Ji(e,Re+t);!function jw(e,t){Nr(e,t,t[L],2,null,null),t[me]=null,t[ke]=null}(o[A],o);const s=i[kt];null!==s&&s.detachView(i[A]),o[fe]=null,o[It]=null,o[B]&=-129}return o}function Kl(e,t){if(!(256&t[B])){const n=t[L];t[hr]&&lp(t[hr]),t[gr]&&lp(t[gr]),n.destroyNode&&Nr(e,t,n,3,null,null),function nS(e){let t=e[dr];if(!t)return Zl(e[A],e);for(;t;){let n=null;if(et(t))n=t[dr];else{const o=t[Re];o&&(n=o)}if(!n){for(;t&&!t[It]&&t!==e;)et(t)&&Zl(t[A],t),t=t[fe];null===t&&(t=e),et(t)&&Zl(t[A],t),n=t&&t[It]}t=n}}(t)}}function Zl(e,t){if(!(256&t[B])){t[B]&=-129,t[B]|=256,function sS(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let o=0;o<n.length;o+=2){const r=t[n[o]];if(!(r instanceof _r)){const i=n[o+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=r[i[s]],l=i[s+1];Vt(4,a,l);try{l.call(a)}finally{Vt(5,a,l)}}else{Vt(4,r,i);try{i.call(r)}finally{Vt(5,r,i)}}}}}(e,t),function iS(e,t){const n=e.cleanup,o=t[eo];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?o[s]():o[-s].unsubscribe(),i+=2}else n[i].call(o[n[i+1]]);null!==o&&(t[eo]=null);const r=t[_n];if(null!==r){t[_n]=null;for(let i=0;i<r.length;i++)(0,r[i])()}}(e,t),1===t[A].type&&t[L].destroy();const n=t[fr];if(null!==n&&$e(t[fe])){n!==t[fe]&&Th(n,t);const o=t[kt];null!==o&&o.detachView(e)}!function $w(e){$l.delete(e[pr])}(t)}}function Ql(e,t,n){return function wh(e,t,n){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return n[me];{const{componentOffset:r}=o;if(r>-1){const{encapsulation:i}=e.data[o.directiveStart+r];if(i===Et.None||i===Et.Emulated)return null}return tt(o,n)}}(e,t.parent,n)}function Hn(e,t,n,o,r){e.insertBefore(t,n,o,r)}function Sh(e,t,n){e.appendChild(t,n)}function Mh(e,t,n,o,r){null!==o?Hn(e,t,n,o,r):Sh(e,t,n)}function rs(e,t){return e.parentNode(t)}let Xl,nu,Rh=function Nh(e,t,n){return 40&e.type?tt(e,n):null};function is(e,t,n,o){const r=Ql(e,o,t),i=t[L],a=function Ah(e,t,n){return Rh(e,t,n)}(o.parent||t[ke],o,t);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)Mh(i,r,n[l],a,!1);else Mh(i,r,n,a,!1);void 0!==Xl&&Xl(i,o,t,n,r)}function Ar(e,t){if(null!==t){const n=t.type;if(3&n)return tt(t,e);if(4&n)return jl(-1,e[t.index]);if(8&n){const o=t.child;if(null!==o)return Ar(e,o);{const r=e[t.index];return $e(r)?jl(-1,r):le(r)}}if(32&n)return Jl(t,e)()||le(e[t.index]);{const o=Ph(e,t);return null!==o?Array.isArray(o)?o[0]:Ar(Mr(e[De]),o):Ar(e,t.next)}}return null}function Ph(e,t){return null!==t?e[De][ke].projection[t.projection]:null}function jl(e,t){const n=Re+e+1;if(n<t.length){const o=t[n],r=o[A].firstChild;if(null!==r)return Ar(o,r)}return t[Lt]}function eu(e,t,n,o,r,i,s){for(;null!=n;){const a=o[n.index],l=n.type;if(s&&0===t&&(a&&Ve(le(a),o),n.flags|=2),32!=(32&n.flags))if(8&l)eu(e,t,n.child,o,r,i,!1),Co(t,e,r,a,i);else if(32&l){const c=Jl(n,o);let f;for(;f=c();)Co(t,e,r,f,i);Co(t,e,r,a,i)}else 16&l?Fh(e,t,o,n,r,i):Co(t,e,r,a,i);n=s?n.projectionNext:n.next}}function Nr(e,t,n,o,r,i){eu(n,o,e.firstChild,t,r,i,!1)}function Fh(e,t,n,o,r,i){const s=n[De],l=s[ke].projection[o.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Co(t,e,r,l[c],i);else{let c=l;const f=s[fe];ji(o)&&(c.flags|=128),eu(e,t,c,f,r,i,!0)}}function kh(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Lh(e,t,n){const{mergedAttrs:o,classes:r,styles:i}=n;null!==o&&ul(e,t,o),null!==r&&kh(e,t,r),null!==i&&function fS(e,t,n){e.setAttribute(t,"style",n)}(e,t,i)}class Bh{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const cs=new b("ENVIRONMENT_INITIALIZER"),Kh=new b("INJECTOR",-1),Zh=new b("INJECTOR_DEF_TYPES");class lu{get(t,n=ir){if(n===ir){const o=new Error(`NullInjectorError: No provider for ${Se(t)}!`);throw o.name="NullInjectorError",o}return n}}function BS(...e){return{\u0275providers:Xh(0,e),\u0275fromNgModule:!0}}function Xh(e,...t){const n=[],o=new Set;let r;const i=s=>{n.push(s)};return mo(t,s=>{const a=s;ds(a,i,[],o)&&(r||=[],r.push(a))}),void 0!==r&&jh(r,i),n}function jh(e,t){for(let n=0;n<e.length;n++){const{ngModule:o,providers:r}=e[n];uu(r,i=>{t(i,o)})}}function ds(e,t,n,o){if(!(e=F(e)))return!1;let r=null,i=Si(e);const s=!i&&z(e);if(i||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(i=Si(l),!i)return!1;r=l}const a=o.has(r);if(s){if(a)return!1;if(o.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)ds(c,t,n,o)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;o.add(r);try{mo(i.imports,f=>{ds(f,t,n,o)&&(c||=[],c.push(f))})}finally{}void 0!==c&&jh(c,t)}if(!a){const c=On(r)||(()=>new r);t({provide:r,useFactory:c,deps:J},r),t({provide:Zh,useValue:r,multi:!0},r),t({provide:cs,useValue:()=>q(r),multi:!0},r)}const l=i.providers;if(null!=l&&!a){const c=e;uu(l,f=>{t(f,c)})}}}return r!==e&&void 0!==e.providers}function uu(e,t){for(let n of e)Qa(n)&&(n=n.\u0275providers),Array.isArray(n)?uu(n,t):t(n)}const HS=X({provide:String,useValue:X});function cu(e){return null!==e&&"object"==typeof e&&HS in e}function Gn(e){return"function"==typeof e}const du=new b("Set Injector scope."),fs={},$S={};let fu;function ps(){return void 0===fu&&(fu=new lu),fu}class tn{}class To extends tn{get destroyed(){return this._destroyed}constructor(t,n,o,r){super(),this.parent=n,this.source=o,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hu(t,s=>this.processProvider(s)),this.records.set(Kh,wo(void 0,this)),r.has("environment")&&this.records.set(tn,wo(void 0,this));const i=this.records.get(du);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Zh.multi,J,$.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=mn(this),o=Xe(void 0);try{return t()}finally{mn(n),Xe(o)}}get(t,n=ir,o=$.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Uf))return t[Uf](this);o=Ni(o);const i=mn(this),s=Xe(void 0);try{if(!(o&$.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function YS(e){return"function"==typeof e||"object"==typeof e&&e instanceof b}(t)&&wi(t);l=c&&this.injectableDefInScope(c)?wo(pu(t),fs):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(o&$.Self?ps():this.parent).get(t,n=o&$.Optional&&n===ir?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Ai]=a[Ai]||[]).unshift(Se(t)),i)throw a;return function BI(e,t,n,o){const r=e[Ai];throw t[Lf]&&r.unshift(t[Lf]),e.message=function HI(e,t,n,o=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=Se(t);if(Array.isArray(t))r=t.map(Se).join(" -> ");else if("object"==typeof t){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Se(a)))}r=`{${i.join(", ")}}`}return`${n}${o?"("+o+")":""}[${r}]: ${e.replace(kI,"\n  ")}`}("\n"+e.message,r,n,o),e.ngTokenPath=r,e[Ai]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Xe(s),mn(i)}}resolveInjectorInitializers(){const t=mn(this),n=Xe(void 0);try{const r=this.get(cs.multi,J,$.Self);for(const i of r)i()}finally{mn(t),Xe(n)}}toString(){const t=[],n=this.records;for(const o of n.keys())t.push(Se(o));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){let n=Gn(t=F(t))?t:F(t&&t.provide);const o=function zS(e){return cu(e)?wo(void 0,e.useValue):wo(ng(e),fs)}(t);if(Gn(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=wo(void 0,fs,!0),r.factory=()=>sl(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,o)}hydrate(t,n){return n.value===fs&&(n.value=$S,n.value=n.factory()),"object"==typeof n.value&&n.value&&function JS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=F(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function pu(e){const t=wi(e),n=null!==t?t.factory:On(e);if(null!==n)return n;if(e instanceof b)throw new S(204,!1);if(e instanceof Function)return function qS(e){const t=e.length;if(t>0)throw function Tr(e,t){const n=[];for(let o=0;o<e;o++)n.push(t);return n}(t,"?"),new S(204,!1);const n=function bI(e){return e&&(e[Mi]||e[Pf])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new S(204,!1)}function ng(e,t,n){let o;if(Gn(e)){const r=F(e);return On(r)||pu(r)}if(cu(e))o=()=>F(e.useValue);else if(function tg(e){return!(!e||!e.useFactory)}(e))o=()=>e.useFactory(...sl(e.deps||[]));else if(function eg(e){return!(!e||!e.useExisting)}(e))o=()=>q(F(e.useExisting));else{const r=F(e&&(e.useClass||e.provide));if(!function WS(e){return!!e.deps}(e))return On(r)||pu(r);o=()=>new r(...sl(e.deps))}return o}function wo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function hu(e,t){for(const n of e)Array.isArray(n)?hu(n,t):n&&Qa(n)?hu(n.\u0275providers,t):t(n)}const hs=new b("AppId",{providedIn:"root",factory:()=>KS}),KS="ng",og=new b("Platform Initializer"),So=new b("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rg=new b("CSP nonce",{providedIn:"root",factory:()=>function Do(){if(void 0!==nu)return nu;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ig=(e,t,n)=>null;function Du(e,t,n=!1){return ig(e,t,n)}class iM{}class lg{}class aM{resolveComponentFactory(t){throw function sM(e){const t=Error(`No component factory found for ${Se(e)}.`);return t.ngComponent=e,t}(t)}}let Cs=(()=>{class e{static{this.NULL=new aM}}return e})();function lM(){return No(Pe(),D())}function No(e,t){return new wt(tt(e,t))}let wt=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=lM}}return e})();class cg{}let $n=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function cM(){const e=D(),n=at(Pe().index,e);return(et(n)?n:e)[L]}()}}return e})(),dM=(()=>{class e{static{this.\u0275prov=j({token:e,providedIn:"root",factory:()=>null})}}return e})();class Es{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const fM=new Es("16.2.12"),wu={};function hg(e,t=null,n=null,o){const r=gg(e,t,n,o);return r.resolveInjectorInitializers(),r}function gg(e,t=null,n=null,o,r=new Set){const i=[n||J,BS(e)];return o=o||("object"==typeof e?void 0:Se(e)),new To(i,t||ps(),o||null,r)}let St=(()=>{class e{static{this.THROW_IF_NOT_FOUND=ir}static{this.NULL=new lu}static create(n,o){if(Array.isArray(n))return hg({name:""},o,n,"");{const r=n.name??"";return hg({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=j({token:e,providedIn:"any",factory:()=>q(Kh)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function Mu(e){return e.ngOriginalError}class nn{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Mu(t);for(;n&&Mu(n);)n=Mu(n);return n||null}}function Au(e){return t=>{setTimeout(e,void 0,t)}}const xe=class CM extends Di{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,o){let r=t,i=n||(()=>null),s=o;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=Au(i),r&&(r=Au(r)),s&&(s=Au(s)));const a=super.subscribe({next:r,error:i,complete:s});return t instanceof Pt&&t.add(a),a}};function yg(...e){}class ye{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xe(!1),this.onMicrotaskEmpty=new xe(!1),this.onStable=new xe(!1),this.onError=new xe(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!o&&n,r.shouldCoalesceRunChangeDetection=o,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function EM(){const e="function"==typeof ae.requestAnimationFrame;let t=ae[e?"requestAnimationFrame":"setTimeout"],n=ae[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function TM(e){const t=()=>{!function IM(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ae,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ru(e),e.isCheckStableRunning=!0,Nu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ru(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,o,r,i,s,a)=>{if(function SM(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(r,i,s,a);try{return vg(e),n.invokeTask(r,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),_g(e)}},onInvoke:(n,o,r,i,s,a,l)=>{try{return vg(e),n.invoke(r,i,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),_g(e)}},onHasTask:(n,o,r,i)=>{n.hasTask(r,i),o===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Ru(e),Nu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,o,r,i)=>(n.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ye.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(ye.isInAngularZone())throw new S(909,!1)}run(t,n,o){return this._inner.run(t,n,o)}runTask(t,n,o,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,DM,yg,yg);try{return i.runTask(s,n,o)}finally{i.cancelTask(s)}}runGuarded(t,n,o){return this._inner.runGuarded(t,n,o)}runOutsideAngular(t){return this._outer.run(t)}}const DM={};function Nu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ru(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function _g(e){e._nesting--,Nu(e)}class wM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xe,this.onMicrotaskEmpty=new xe,this.onStable=new xe,this.onError=new xe}run(t,n,o){return t.apply(n,o)}runGuarded(t,n,o){return t.apply(n,o)}runOutsideAngular(t){return t()}runTask(t,n,o,r){return t.apply(n,o)}}const Cg=new b("",{providedIn:"root",factory:Eg});function Eg(){const e=re(ye);let t=!0;return _I(new He(r=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{r.next(t),r.complete()})}),new He(r=>{let i;e.runOutsideAngular(()=>{i=e.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const s=e.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{r.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(Nf()))}let bu=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e})}}return e})();function kr(e){for(;e;){e[B]|=64;const t=Mr(e);if(fl(e)&&!t)return e;e=t}return null}const Sg=new b("",{providedIn:"root",factory:()=>!1});let Ts=null;function Rg(e,t){return e[t]??xg()}function bg(e,t){const n=xg();n.producerNode?.length&&(e[t]=Ts,n.lView=e,Ts=Pg())}const LM={...np,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{kr(e.lView)},lView:null};function Pg(){return Object.create(LM)}function xg(){return Ts??=Pg(),Ts}const U={};function ut(e){Fg(W(),D(),ze()+e,!1)}function Fg(e,t,n,o){if(!o)if(3==(3&t[B])){const i=e.preOrderCheckHooks;null!==i&&Hi(t,i,n)}else{const i=e.preOrderHooks;null!==i&&Gi(t,i,0,n)}Un(n)}function w(e,t=$.Default){const n=D();return null===n?q(e,t):Jp(Pe(),n,F(e),t)}function ws(e,t,n,o,r,i,s,a,l,c,f){const p=t.blueprint.slice();return p[me]=r,p[B]=140|o,(null!==c||e&&2048&e[B])&&(p[B]|=2048),Dp(p),p[fe]=p[no]=e,p[Ee]=n,p[to]=s||e&&e[to],p[L]=a||e&&e[L],p[vn]=l||e&&e[vn]||null,p[ke]=i,p[pr]=function Hw(){return Bw++}(),p[Zt]=f,p[Xf]=c,p[De]=2==t.type?e[De]:p,p}function Po(e,t,n,o,r){let i=e.data[t];if(null===i)i=function Pu(e,t,n,o,r){const i=Ap(),s=Cl(),l=e.data[t]=function zM(e,t,n,o,r,i){let s=t?t.injectorIndex:-1,a=0;return function ao(){return null!==x.skipHydrationRootTNode}()&&(a|=128),{type:n,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,t,o,r);return null===e.firstChild&&(e.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(e,t,n,o,r),function BT(){return x.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=o,i.attrs=r;const s=function vr(){const e=x.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Ot(i,!0),i}function Lr(e,t,n,o){if(0===n)return-1;const r=t.length;for(let i=0;i<n;i++)t.push(o),e.blueprint.push(o),e.data.push(null);return r}function kg(e,t,n,o,r){const i=Rg(t,hr),s=ze(),a=2&o;try{Un(-1),a&&t.length>H&&Fg(e,t,H,!1),Vt(a?2:0,r);const c=a?i:null,f=hl(c);try{null!==c&&(c.dirty=!1),n(o,r)}finally{gl(c,f)}}finally{a&&null===t[hr]&&bg(t,hr),Un(s),Vt(a?3:1,r)}}function xu(e,t,n){if(dl(t)){const o=ht(null);try{const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ht(o)}}}function Fu(e,t,n){Mp()&&(function XM(e,t,n,o){const r=n.directiveStart,i=n.directiveEnd;Vn(n)&&function iA(e,t,n){const o=tt(t,e),r=Lg(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Ss(e,ws(e,r,null,s,o,t,null,e[to].rendererFactory.createRenderer(o,n),null,null,null));e[t.index]=a}(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||qi(n,t),Ve(o,t);const s=n.initialInputs;for(let a=r;a<i;a++){const l=e.data[a],c=Bn(t,e,a,n);Ve(c,t),null!==s&&sA(0,a-r,c,l,0,s),Tt(l)&&(at(n.index,t)[Ee]=Bn(t,e,a,n))}}(e,t,n,tt(n,t)),64==(64&n.flags)&&Hg(e,t,n))}function ku(e,t,n=tt){const o=t.localNames;if(null!==o){let r=t.index+1;for(let i=0;i<o.length;i+=2){const s=o[i+1],a=-1===s?n(t,e):e[s];e[r++]=a}}}function Lg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Lu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Lu(e,t,n,o,r,i,s,a,l,c,f){const p=H+o,g=p+r,h=function UM(e,t){const n=[];for(let o=0;o<t;o++)n.push(o<e?null:U);return n}(p,g),m="function"==typeof c?c():c;return h[A]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:f}}let Vg=e=>null;function Og(e,t,n,o){for(let r in e)if(e.hasOwnProperty(r)){n=null===n?{}:n;const i=e[r];null===o?Ug(n,t,r,i):o.hasOwnProperty(r)&&Ug(n,t,o[r],i)}return n}function Ug(e,t,n,o){e.hasOwnProperty(n)?e[n].push(t,o):e[n]=[t,o]}function Vu(e,t,n,o){if(Mp()){const r=null===o?null:{"":-1},i=function eA(e,t){const n=e.directiveRegistry;let o=null,r=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(Wf(t,s.selectors,!1))if(o||(o=[]),Tt(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),o.unshift(...a,s),Ou(e,t,a.length)}else o.unshift(s),Ou(e,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,o,r),o.push(s)}return null===o?null:[o,r]}(e,n);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&Bg(e,t,n,s,r,a),r&&function tA(e,t,n){if(t){const o=e.localNames=[];for(let r=0;r<t.length;r+=2){const i=n[t[r+1]];if(null==i)throw new S(-301,!1);o.push(t[r],i)}}}(n,o,r)}n.mergedAttrs=lr(n.mergedAttrs,n.attrs)}function Bg(e,t,n,o,r,i){for(let c=0;c<o.length;c++)Pl(qi(n,t),e,o[c].type);!function oA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,o.length);for(let c=0;c<o.length;c++){const f=o[c];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,l=Lr(e,t,o.length,null);for(let c=0;c<o.length;c++){const f=o[c];n.mergedAttrs=lr(n.mergedAttrs,f.hostAttrs),rA(e,n,t,l,f),nA(l,f,r),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function WM(e,t,n){const r=t.directiveEnd,i=e.data,s=t.attrs,a=[];let l=null,c=null;for(let f=t.directiveStart;f<r;f++){const p=i[f],g=n?n.get(p):null,m=g?g.outputs:null;l=Og(p.inputs,f,l,g?g.inputs:null),c=Og(p.outputs,f,c,m);const y=null===l||null===s||zf(t)?null:aA(l,f,s);a.push(y)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(e,n,i)}function Hg(e,t,n){const o=n.directiveStart,r=n.directiveEnd,i=n.index,s=function GT(){return x.lFrame.currentDirectiveIndex}();try{Un(i);for(let a=o;a<r;a++){const l=e.data[a],c=t[a];Dl(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&jM(l,c)}}finally{Un(-1),Dl(s)}}function jM(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ou(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function nA(e,t,n){if(n){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)n[t.exportAs[o]]=e;Tt(t)&&(n[""]=e)}}function rA(e,t,n,o,r){e.data[o]=r;const i=r.factory||(r.factory=On(r.type)),s=new _r(i,Tt(r),w);e.blueprint[o]=s,n[o]=s,function ZM(e,t,n,o,r){const i=r.hostBindings;if(i){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function QM(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,o,i)}}(e,t,o,Lr(e,n,r.hostVars,U),r)}function sA(e,t,n,o,r,i){const s=i[t];if(null!==s)for(let a=0;a<s.length;)Gg(o,n,s[a++],s[a++],s[a++])}function Gg(e,t,n,o,r){const i=ht(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(o)&&(r=s[o].call(t,r)),null!==e.setInput?e.setInput(t,r,n,o):t[o]=r}finally{ht(i)}}function aA(e,t,n){let o=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;if(e.hasOwnProperty(i)){null===o&&(o=[]);const s=e[i];for(let a=0;a<s.length;a+=2)if(s[a]===t){o.push(i,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return o}function $g(e,t,n,o){return[e,!0,!1,t,null,0,o,n,null,null,null]}function qg(e,t){const n=e.contentQueries;if(null!==n)for(let o=0;o<n.length;o+=2){const i=n[o+1];if(-1!==i){const s=e.data[i];Tl(n[o]),s.contentQueries(2,t[i],i)}}}function Ss(e,t){return e[dr]?e[Qf][It]=t:e[dr]=t,e[Qf]=t,t}function Bu(e,t,n){Tl(0);const o=ht(null);try{t(e,n)}finally{ht(o)}}function Yg(e,t){const n=e[vn],o=n?n.get(nn,null):null;o&&o.handleError(t)}function Hu(e,t,n,o,r){for(let i=0;i<n.length;){const s=n[i++],a=n[i++];Gg(e.data[s],t[s],o,a,r)}}function rn(e,t,n){const o=Oi(t,e);!function Ih(e,t,n){e.setValue(t,n)}(e[L],o,n)}function lA(e,t){const n=at(t,e),o=n[A];!function uA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(o,n);const r=n[me];null!==r&&null===n[Zt]&&(n[Zt]=Du(r,n[vn])),Gu(o,n,n[Ee])}function Gu(e,t,n){wl(t);try{const o=e.viewQuery;null!==o&&Bu(1,o,n);const r=e.template;null!==r&&kg(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&qg(e,t),e.staticViewQueries&&Bu(2,e.viewQuery,n);const i=e.components;null!==i&&function cA(e,t){for(let n=0;n<t.length;n++)lA(e,t[n])}(t,i)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{t[B]&=-5,Sl()}}let Kg=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,o,r){const i=typeof Zone>"u"?null:Zone.current,s=function mT(e,t,n){const o=Object.create(yT);n&&(o.consumerAllowSignalWrites=!0),o.fn=e,o.schedule=t;const r=s=>{o.cleanupFn=s};return o.ref={notify:()=>sp(o),run:()=>{if(o.dirty=!1,o.hasRun&&!ap(o))return;o.hasRun=!0;const s=hl(o);try{o.cleanupFn(),o.cleanupFn=gp,o.fn(r)}finally{gl(o,s)}},cleanup:()=>o.cleanupFn()},o.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,i)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=o?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[n,o]of this.queue)this.queue.delete(n),o?o.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Ms(e,t,n){let o=n?e.styles:null,r=n?e.classes:null,i=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:1==i?r=Ka(r,a):2==i&&(o=Ka(o,a+": "+t[++s]+";"))}n?e.styles=o:e.stylesWithoutHost=o,n?e.classes=r:e.classesWithoutHost=r}function Vr(e,t,n,o,r=!1){for(;null!==n;){const i=t[n.index];null!==i&&o.push(le(i)),$e(i)&&Zg(i,o);const s=n.type;if(8&s)Vr(e,t,n.child,o);else if(32&s){const a=Jl(n,t);let l;for(;l=a();)o.push(l)}else if(16&s){const a=Ph(t,n);if(Array.isArray(a))o.push(...a);else{const l=Mr(t[De]);Vr(l[A],l,a,o,!0)}}n=r?n.projectionNext:n.next}return o}function Zg(e,t){for(let n=Re;n<e.length;n++){const o=e[n],r=o[A].firstChild;null!==r&&Vr(o[A],o,r,t)}e[Lt]!==e[me]&&t.push(e[Lt])}function As(e,t,n,o=!0){const r=t[to],i=r.rendererFactory,s=r.afterRenderEventManager;i.begin?.(),s?.begin();try{Qg(e,t,e.template,n)}catch(l){throw o&&Yg(t,l),l}finally{i.end?.(),r.effectManager?.flush(),s?.end()}}function Qg(e,t,n,o){const r=t[B];if(256!=(256&r)){t[to].effectManager?.flush(),wl(t);try{Dp(t),function Rp(e){return x.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&kg(e,t,n,2,o);const s=3==(3&r);if(s){const c=e.preOrderCheckHooks;null!==c&&Hi(t,c,null)}else{const c=e.preOrderHooks;null!==c&&Gi(t,c,0,null),Ml(t,0)}if(function pA(e){for(let t=Ch(e);null!==t;t=Eh(t)){if(!t[jf])continue;const n=t[ro];for(let o=0;o<n.length;o++){MT(n[o])}}}(t),Xg(t,2),null!==e.contentQueries&&qg(e,t),s){const c=e.contentCheckHooks;null!==c&&Hi(t,c)}else{const c=e.contentHooks;null!==c&&Gi(t,c,1),Ml(t,1)}!function OM(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const o=Rg(t,gr);try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Un(~i);else{const s=i,a=n[++r],l=n[++r];HT(a,s),o.dirty=!1;const c=hl(o);try{l(2,t[s])}finally{gl(o,c)}}}}finally{null===t[gr]&&bg(t,gr),Un(-1)}}(e,t);const a=e.components;null!==a&&em(t,a,0);const l=e.viewQuery;if(null!==l&&Bu(2,l,o),s){const c=e.viewCheckHooks;null!==c&&Hi(t,c)}else{const c=e.viewHooks;null!==c&&Gi(t,c,2),Ml(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[B]&=-73,Ip(t)}finally{Sl()}}}function Xg(e,t){for(let n=Ch(e);null!==n;n=Eh(n))for(let o=Re;o<n.length;o++)jg(n[o],t)}function hA(e,t,n){jg(at(t,e),n)}function jg(e,t){if(!function wT(e){return 128==(128&e[B])}(e))return;const n=e[A],o=e[B];if(80&o&&0===t||1024&o||2===t)Qg(n,e,n.template,e[Ee]);else if(e[cr]>0){Xg(e,1);const r=n.components;null!==r&&em(e,r,1)}}function em(e,t,n){for(let o=0;o<t.length;o++)hA(e,t[o],n)}class Or{get rootNodes(){const t=this._lView,n=t[A];return Vr(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ee]}set context(t){this._lView[Ee]=t}get destroyed(){return 256==(256&this._lView[B])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[fe];if($e(t)){const n=t[8],o=n?n.indexOf(this):-1;o>-1&&(os(t,o),Ji(n,o))}this._attachedToViewContainer=!1}Kl(this._lView[A],this._lView)}onDestroy(t){!function wp(e,t){if(256==(256&e[B]))throw new S(911,!1);null===e[_n]&&(e[_n]=[]),e[_n].push(t)}(this._lView,t)}markForCheck(){kr(this._cdRefInjectingView||this._lView)}detach(){this._lView[B]&=-129}reattach(){this._lView[B]|=128}detectChanges(){As(this._lView[A],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tS(e,t){Nr(e,t,t[L],2,null,null)}(this._lView[A],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t}}class gA extends Or{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;As(t[A],t,t[Ee],!1)}checkNoChanges(){}get context(){return null}}class tm extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=z(t);return new Ur(n,this.ngModule)}}function nm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class yA{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,o){o=Ni(o);const r=this.injector.get(t,wu,o);return r!==wu||n===wu?r:this.parentInjector.get(t,n,o)}}class Ur extends lg{get inputs(){const t=this.componentDef,n=t.inputTransforms,o=nm(t.inputs);if(null!==n)for(const r of o)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return o}get outputs(){return nm(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function QI(e){return e.map(ZI).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,o,r){let i=(r=r||this.ngModule)instanceof tn?r:r?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new yA(t,i):t,a=s.get(cg,null);if(null===a)throw new S(407,!1);const p={rendererFactory:a,sanitizer:s.get(dM,null),effectManager:s.get(Kg,null),afterRenderEventManager:s.get(bu,null)},g=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",m=o?function BM(e,t,n,o){const i=o.get(Sg,!1)||n===Et.ShadowDom,s=e.selectRootElement(t,i);return function HM(e){Vg(e)}(s),s}(g,o,this.componentDef.encapsulation,s):ns(g,h,function mA(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),C=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let v=null;null!==m&&(v=Du(m,s,!0));const E=Lu(0,null,null,1,0,null,null,null,null,null,null),I=ws(null,E,null,C,null,null,p,g,s,null,v);let M,R;wl(I);try{const G=this.componentDef;let ne,Te=null;G.findHostDirectiveDefs?(ne=[],Te=new Map,G.findHostDirectiveDefs(G,ne,Te),ne.push(G)):ne=[G];const V=function _A(e,t){const n=e[A],o=H;return e[o]=t,Po(n,o,2,"#host",null)}(I,m),oe=function CA(e,t,n,o,r,i,s){const a=r[A];!function EA(e,t,n,o){for(const r of e)t.mergedAttrs=lr(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Ms(t,t.mergedAttrs,!0),null!==n&&Lh(o,n,t))}(o,e,t,s);let l=null;null!==t&&(l=Du(t,r[vn]));const c=i.rendererFactory.createRenderer(t,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const p=ws(r,Lg(n),null,f,r[e.index],e,i,c,null,null,l);return a.firstCreatePass&&Ou(a,e,o.length-1),Ss(r,p),r[e.index]=p}(V,m,G,ne,I,p,g);R=Ep(E,H),m&&function IA(e,t,n,o){if(o)ul(e,n,["ng-version",fM.full]);else{const{attrs:r,classes:i}=function XI(e){const t=[],n=[];let o=1,r=2;for(;o<e.length;){let i=e[o];if("string"==typeof i)2===r?""!==i&&t.push(i,e[++o]):8===r&&n.push(i);else{if(!Dt(r))break;r=i}o++}return{attrs:t,classes:n}}(t.selectors[0]);r&&ul(e,n,r),i&&i.length>0&&kh(e,n,i.join(" "))}}(g,G,m,o),void 0!==n&&function TA(e,t,n){const o=e.projection=[];for(let r=0;r<t.length;r++){const i=n[r];o.push(null!=i?Array.from(i):null)}}(R,this.ngContentSelectors,n),M=function DA(e,t,n,o,r,i){const s=Pe(),a=r[A],l=tt(s,r);Bg(a,r,s,n,null,o);for(let f=0;f<n.length;f++)Ve(Bn(r,a,s.directiveStart+f,s),r);Hg(a,r,s),l&&Ve(l,r);const c=Bn(r,a,s.directiveStart+s.componentOffset,s);if(e[Ee]=r[Ee]=c,null!==i)for(const f of i)f(c,t);return xu(a,s,e),c}(oe,G,ne,Te,I,[wA]),Gu(E,I,null)}finally{Sl()}return new vA(this.componentType,M,No(R,I),I,R)}}class vA extends iM{constructor(t,n,o,r,i){super(),this.location=o,this._rootLView=r,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gA(r),this.componentType=t}setInput(t,n){const o=this._tNode.inputs;let r;if(null!==o&&(r=o[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const i=this._rootLView;Hu(i[A],i,r,t,n),this.previousInputValues.set(t,n),kr(at(this._tNode.index,i))}}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function wA(){const e=Pe();Bi(D()[A],e)}function ee(e){let t=function om(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const o=[e];for(;t;){let r;if(Tt(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);r=t.\u0275dir}if(r){if(n){o.push(r);const s=e;s.inputs=Ns(e.inputs),s.inputTransforms=Ns(e.inputTransforms),s.declaredInputs=Ns(e.declaredInputs),s.outputs=Ns(e.outputs);const a=r.hostBindings;a&&NA(e,a);const l=r.viewQuery,c=r.contentQueries;if(l&&MA(e,l),c&&AA(e,c),Ii(e.inputs,r.inputs),Ii(e.declaredInputs,r.declaredInputs),Ii(e.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Ii(s.inputTransforms,r.inputTransforms)),Tt(r)&&r.data.animation){const f=e.data;f.animation=(f.animation||[]).concat(r.data.animation)}}const i=r.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(e),a===ee&&(n=!1)}}t=Object.getPrototypeOf(t)}!function SA(e){let t=0,n=null;for(let o=e.length-1;o>=0;o--){const r=e[o];r.hostVars=t+=r.hostVars,r.hostAttrs=lr(r.hostAttrs,n=lr(n,r.hostAttrs))}}(o)}function Ns(e){return e===Ft?{}:e===J?[]:e}function MA(e,t){const n=e.viewQuery;e.viewQuery=n?(o,r)=>{t(o,r),n(o,r)}:t}function AA(e,t){const n=e.contentQueries;e.contentQueries=n?(o,r,i)=>{t(o,r,i),n(o,r,i)}:t}function NA(e,t){const n=e.hostBindings;e.hostBindings=n?(o,r)=>{t(o,r),n(o,r)}:t}function Rs(e){return!!function $u(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Oe(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ko(e,t,n,o,r,i){const a=function qn(e,t,n,o){const r=Oe(e,t,n);return Oe(e,t+1,o)||r}(e,function Xt(){return x.lFrame.bindingIndex}(),n,r);return jt(2),a?t+k(n)+o+k(r)+i:U}function wn(e,t,n,o,r,i,s,a){const l=D(),c=W(),f=e+H,p=c.firstCreatePass?function t0(e,t,n,o,r,i,s,a,l){const c=t.consts,f=Po(t,e,4,s||null,En(c,a));Vu(t,n,f,En(c,l)),Bi(t,f);const p=f.tView=Lu(2,f,o,r,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,f),p.queries=t.queries.embeddedTView(f)),f}(f,c,l,t,n,o,r,i,s):c.data[f];Ot(p,!1);const g=_m(c,l,p,e);Ui()&&is(c,l,g,p),Ve(g,l),Ss(l,l[f]=$g(g,l,g,p)),ki(p)&&Fu(c,l,p),null!=s&&ku(l,p,a)}let _m=function Cm(e,t,n,o){return Dn(!0),t[L].createComment("")};function yt(e,t,n){const o=D();return Oe(o,lo(),t)&&function ct(e,t,n,o,r,i,s,a){const l=tt(t,n);let f,c=t.inputs;!a&&null!=c&&(f=c[o])?(Hu(e,n,f,o,r),Vn(t)&&function YM(e,t){const n=at(t,e);16&n[B]||(n[B]|=64)}(n,t.index)):3&t.type&&(o=function JM(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(o),r=null!=s?s(r,t.value||"",o):r,i.setProperty(l,o,r))}(W(),function ge(){const e=x.lFrame;return Ep(e.tView,e.selectedIndex)}(),o,e,t,o[L],n,!1),yt}function Ku(e,t,n,o,r){const s=r?"class":"style";Hu(e,n,t.inputs[s],s,o)}function ve(e,t,n,o){const r=D(),i=W(),s=H+e,a=r[L],l=i.firstCreatePass?function s0(e,t,n,o,r,i){const s=t.consts,l=Po(t,e,2,o,En(s,r));return Vu(t,n,l,En(s,i)),null!==l.attrs&&Ms(l,l.attrs,!1),null!==l.mergedAttrs&&Ms(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,i,r,t,n,o):i.data[s],c=Dm(i,r,l,a,t,e);r[s]=c;const f=ki(l);return Ot(l,!0),Lh(a,c,l),32!=(32&l.flags)&&Ui()&&is(i,r,c,l),0===function NT(){return x.lFrame.elementDepthCount}()&&Ve(c,r),function RT(){x.lFrame.elementDepthCount++}(),f&&(Fu(i,r,l),xu(i,l,r)),null!==o&&ku(r,l),ve}function _e(){let e=Pe();Cl()?El():(e=e.parent,Ot(e,!1));const t=e;(function PT(e){return x.skipHydrationRootTNode===e})(t)&&function LT(){x.skipHydrationRootTNode=null}(),function bT(){x.lFrame.elementDepthCount--}();const n=W();return n.firstCreatePass&&(Bi(n,e),dl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function jT(e){return 0!=(8&e.flags)}(t)&&Ku(n,t,D(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function ew(e){return 0!=(16&e.flags)}(t)&&Ku(n,t,D(),t.stylesWithoutHost,!1),_e}function Zu(e,t,n,o){return ve(e,t,n,o),_e(),Zu}let Dm=(e,t,n,o,r,i)=>(Dn(!0),ns(o,r,function Op(){return x.lFrame.currentNamespace}()));function ks(e,t,n){const o=D(),r=W(),i=e+H,s=r.firstCreatePass?function u0(e,t,n,o,r){const i=t.consts,s=En(i,o),a=Po(t,e,8,"ng-container",s);return null!==s&&Ms(a,s,!0),Vu(t,n,a,En(i,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,r,o,t,n):r.data[i];Ot(s,!0);const a=Tm(r,o,s,e);return o[i]=a,Ui()&&is(r,o,a,s),Ve(a,o),ki(s)&&(Fu(r,o,s),xu(r,s,o)),null!=n&&ku(o,s),ks}function Ls(){let e=Pe();const t=W();return Cl()?El():(e=e.parent,Ot(e,!1)),t.firstCreatePass&&(Bi(t,e),dl(e)&&t.queries.elementEnd(e)),Ls}let Tm=(e,t,n,o)=>(Dn(!0),Yl(t[L],""));function Vs(e){return!!e&&"function"==typeof e.then}function wm(e){return!!e&&"function"==typeof e.subscribe}function Je(e,t,n,o){const r=D(),i=W(),s=Pe();return function Mm(e,t,n,o,r,i,s){const a=ki(o),c=e.firstCreatePass&&function Wg(e){return e.cleanup||(e.cleanup=[])}(e),f=t[Ee],p=function zg(e){return e[eo]||(e[eo]=[])}(t);let g=!0;if(3&o.type||s){const y=tt(o,t),_=s?s(y):y,C=p.length,v=s?I=>s(le(I[o.index])):o.index;let E=null;if(!s&&a&&(E=function p0(e,t,n,o){const r=e.cleanup;if(null!=r)for(let i=0;i<r.length-1;i+=2){const s=r[i];if(s===n&&r[i+1]===o){const a=t[eo],l=r[i+2];return a.length>l?a[l]:null}"string"==typeof s&&(i+=2)}return null}(e,t,r,o.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=i,E.__ngLastListenerFn__=i,g=!1;else{i=Nm(o,t,f,i,!1);const I=n.listen(_,r,i);p.push(i,I),c&&c.push(r,v,C,C+1)}}else i=Nm(o,t,f,i,!1);const h=o.outputs;let m;if(g&&null!==h&&(m=h[r])){const y=m.length;if(y)for(let _=0;_<y;_+=2){const M=t[m[_]][m[_+1]].subscribe(i),R=p.length;p.push(i,M),c&&c.push(r,o.index,R,-(R+1))}}}(i,r,r[L],s,e,t,o),Je}function Am(e,t,n,o){try{return Vt(6,t,n),!1!==n(o)}catch(r){return Yg(e,r),!1}finally{Vt(7,t,n)}}function Nm(e,t,n,o,r){return function i(s){if(s===Function)return o;kr(e.componentOffset>-1?at(e.index,t):t);let l=Am(t,n,o,s),c=i.__ngNextListenerFn__;for(;c;)l=Am(t,n,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function Qu(e=1){return function qT(e){return(x.lFrame.contextLView=function zT(e,t){for(;e>0;)t=t[no],e--;return t}(e,x.lFrame.contextLView))[Ee]}(e)}function Os(e,t){return e<<17|t<<2}function Sn(e){return e>>17&32767}function ju(e){return 2|e}function zn(e){return(131068&e)>>2}function ec(e,t){return-131069&e|t<<2}function tc(e){return 1|e}function Um(e,t,n,o,r){const i=e[n+1],s=null===t;let a=o?Sn(i):zn(i),l=!1;for(;0!==a&&(!1===l||s);){const f=e[a+1];D0(e[a],t)&&(l=!0,e[a+1]=o?tc(f):ju(f)),a=o?Sn(f):zn(f)}l&&(e[n+1]=o?ju(i):tc(i))}function D0(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&yo(e,t)>=0}function Us(e,t){return function Mt(e,t,n,o){const r=D(),i=W(),s=jt(2);i.firstUpdatePass&&function Ym(e,t,n,o){const r=e.data;if(null===r[n+1]){const i=r[ze()],s=function Jm(e,t){return t>=e.expandoStartIndex}(e,n);(function Xm(e,t){return 0!=(e.flags&(t?8:16))})(i,o)&&null===t&&!s&&(t=!1),t=function b0(e,t,n,o){const r=function Il(e){const t=x.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let i=o?t.residualClasses:t.residualStyles;if(null===r)0===(o?t.classBindings:t.styleBindings)&&(n=qr(n=nc(null,e,t,n,o),t.attrs,o),i=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==r)if(n=nc(r,e,t,n,o),null===i){let l=function P0(e,t,n){const o=n?t.classBindings:t.styleBindings;if(0!==zn(o))return e[Sn(o)]}(e,t,o);void 0!==l&&Array.isArray(l)&&(l=nc(null,e,t,l[1],o),l=qr(l,t.attrs,o),function x0(e,t,n,o){e[Sn(n?t.classBindings:t.styleBindings)]=o}(e,t,o,l))}else i=function F0(e,t,n){let o;const r=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<r;i++)o=qr(o,e[i].hostAttrs,n);return qr(o,t.attrs,n)}(e,t,o)}return void 0!==i&&(o?t.residualClasses=i:t.residualStyles=i),n}(r,i,t,o),function C0(e,t,n,o,r,i){let s=i?t.classBindings:t.styleBindings,a=Sn(s),l=zn(s);e[o]=n;let f,c=!1;if(Array.isArray(n)?(f=n[1],(null===f||yo(n,f)>0)&&(c=!0)):f=n,r)if(0!==l){const g=Sn(e[a+1]);e[o+1]=Os(g,a),0!==g&&(e[g+1]=ec(e[g+1],o)),e[a+1]=function v0(e,t){return 131071&e|t<<17}(e[a+1],o)}else e[o+1]=Os(a,0),0!==a&&(e[a+1]=ec(e[a+1],o)),a=o;else e[o+1]=Os(l,0),0===a?a=o:e[l+1]=ec(e[l+1],o),l=o;c&&(e[o+1]=ju(e[o+1])),Um(e,f,o,!0),Um(e,f,o,!1),function E0(e,t,n,o,r){const i=r?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&yo(i,t)>=0&&(n[o+1]=tc(n[o+1]))}(t,f,e,o,i),s=Os(a,l),i?t.classBindings=s:t.styleBindings=s}(r,i,t,n,s,o)}}(i,e,s,o),t!==U&&Oe(r,s,t)&&function Zm(e,t,n,o,r,i,s,a){if(!(3&t.type))return;const l=e.data,c=l[a+1],f=function _0(e){return 1==(1&e)}(c)?Qm(l,t,n,r,zn(c),s):void 0;Bs(f)||(Bs(i)||function y0(e){return 2==(2&e)}(c)&&(i=Qm(l,null,n,r,a,s)),function dS(e,t,n,o,r){if(t)r?e.addClass(n,o):e.removeClass(n,o);else{let i=-1===o.indexOf("-")?void 0:In.DashCase;null==r?e.removeStyle(n,o,i):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),i|=In.Important),e.setStyle(n,o,r,i))}}(o,s,Oi(ze(),n),r,i))}(i,i.data[ze()],r,r[L],e,r[s+1]=function O0(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Se(function Tn(e){return e instanceof Bh?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),o,s)}(e,t,null,!0),Us}function nc(e,t,n,o,r){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=t[a],o=qr(o,i.hostAttrs,r),i!==e);)a++;return null!==e&&(n.directiveStylingLast=a),o}function qr(e,t,n){const o=n?1:2;let r=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?r=s:r===o&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),lt(e,s,!!n||t[++i]))}return void 0===e?null:e}function Qm(e,t,n,o,r,i){const s=null===t;let a;for(;r>0;){const l=e[r],c=Array.isArray(l),f=c?l[1]:l,p=null===f;let g=n[r+1];g===U&&(g=p?J:void 0);let h=p?Ll(g,o):f===o?g:void 0;if(c&&!Bs(h)&&(h=Ll(l,o)),Bs(h)&&(a=h,s))return a;const m=e[r+1];r=s?Sn(m):zn(m)}if(null!==t){let l=i?t.residualClasses:t.residualStyles;null!=l&&(a=Ll(l,o))}return a}function Bs(e){return void 0!==e}function dt(e,t=""){const n=D(),o=W(),r=e+H,i=o.firstCreatePass?Po(o,r,1,t,null):o.data[r],s=jm(o,n,i,t,e);n[r]=s,Ui()&&is(o,n,s,i),Ot(i,!1)}let jm=(e,t,n,o,r)=>(Dn(!0),function ts(e,t){return e.createText(t)}(t[L],o));function zr(e){return oc("",e,""),zr}function oc(e,t,n){const o=D(),r=function Fo(e,t,n,o){return Oe(e,lo(),n)?t+k(n)+o:U}(o,e,t,n);return r!==U&&rn(o,ze(),r),oc}function rc(e,t,n,o,r){const i=D(),s=ko(i,e,t,n,o,r);return s!==U&&rn(i,ze(),s),rc}const qo="en-US";let Cy=qo;function ac(e,t,n,o,r){if(e=F(e),Array.isArray(e))for(let i=0;i<e.length;i++)ac(e[i],t,n,o,r);else{const i=W(),s=D(),a=Pe();let l=Gn(e)?e:F(e.provide);const c=ng(e),f=1048575&a.providerIndexes,p=a.directiveStart,g=a.providerIndexes>>20;if(Gn(e)||!e.multi){const h=new _r(c,r,w),m=uc(l,t,r?f:f+g,p);-1===m?(Pl(qi(a,s),i,l),lc(i,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[m]=h,s[m]=h)}else{const h=uc(l,t,f+g,p),m=uc(l,t,f,f+g),_=m>=0&&n[m];if(r&&!_||!r&&!(h>=0&&n[h])){Pl(qi(a,s),i,l);const C=function iR(e,t,n,o,r){const i=new _r(e,n,w);return i.multi=[],i.index=t,i.componentProviders=0,zy(i,r,o&&!n),i}(r?rR:oR,n.length,r,o,c);!r&&_&&(n[m].providerFactory=C),lc(i,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else lc(i,e,h>-1?h:m,zy(n[r?m:h],c,!r&&o));!r&&o&&_&&n[m].componentProviders++}}}function lc(e,t,n,o){const r=Gn(t),i=function GS(e){return!!e.useClass}(t);if(r||i){const l=(i?F(t.useClass):t).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const f=c.indexOf(n);-1===f?c.push(n,[o,l]):c[f+1].push(o,l)}else c.push(n,l)}}}function zy(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function uc(e,t,n,o){for(let r=n;r<o;r++)if(t[r]===e)return r;return-1}function oR(e,t,n,o){return cc(this.multi,[])}function rR(e,t,n,o){const r=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Bn(n,n[A],this.providerFactory.index,o);i=a.slice(0,s),cc(r,i);for(let l=s;l<a.length;l++)i.push(a[l])}else i=[],cc(r,i);return i}function cc(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function pe(e,t=[]){return n=>{n.providersResolver=(o,r)=>function nR(e,t,n){const o=W();if(o.firstCreatePass){const r=Tt(e);ac(n,o.data,o.blueprint,r,!0),ac(t,o.data,o.blueprint,r,!1)}}(o,r?r(e):e,t)}}class Jn{}class sR{}class dc extends Jn{constructor(t,n,o){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tm(this);const r=function st(e,t){const n=e[Of]||null;if(!n&&!0===t)throw new Error(`Type ${Se(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function on(e){return e instanceof Function?e():e}(r.bootstrap),this._r3Injector=gg(t,n,[{provide:Jn,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver},...o],Se(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fc extends sR{constructor(t){super(),this.moduleType=t}create(t){return new dc(this.moduleType,t,[])}}class Wy extends Jn{constructor(t){super(),this.componentFactoryResolver=new tm(this),this.instance=null;const n=new To([...t.providers,{provide:Jn,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],t.parent||ps(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}let cR=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const o=Xh(0,n.type),r=o.length>0?function uR(e,t,n=null){return new Wy({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}([o],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(q(tn))})}}return e})();function pc(e){e.getStandaloneInjector=t=>t.get(cR).getOrCreateStandaloneInjector(e)}function OR(e,t,n,o=!0){const r=t[A];if(function oS(e,t,n,o){const r=Re+o,i=n.length;o>0&&(n[r-1][It]=t),o<i-Re?(t[It]=n[r],jp(n,Re+o,t)):(n.push(t),t[It]=null),t[fe]=n;const s=t[fr];null!==s&&n!==s&&function rS(e,t){const n=e[ro];t[De]!==t[fe][fe][De]&&(e[jf]=!0),null===n?e[ro]=[t]:n.push(t)}(s,t);const a=t[kt];null!==a&&a.insertView(e),t[B]|=128}(r,t,e,n),o){const i=jl(n,e),s=t[L],a=rs(s,e[Lt]);null!==a&&function eS(e,t,n,o,r,i){o[me]=r,o[ke]=t,Nr(e,o,n,1,r,i)}(r,e[ke],s,t,a,i)}}let an=(()=>{class e{static{this.__NG_ELEMENT_ID__=HR}}return e})();const UR=an,BR=class extends UR{constructor(t,n,o){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,o){const r=function VR(e,t,n,o){const r=t.tView,a=ws(e,r,n,4096&e[B]?4096:16,null,t,null,null,null,o?.injector??null,o?.hydrationInfo??null);a[fr]=e[t.index];const c=e[kt];return null!==c&&(a[kt]=c.createEmbeddedView(r)),Gu(r,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:o});return new Or(r)}};function HR(){return zs(Pe(),D())}function zs(e,t){return 4&e.type?new BR(t,e,No(e,t)):null}let qt=(()=>{class e{static{this.__NG_ELEMENT_ID__=JR}}return e})();function JR(){return function cv(e,t){let n;const o=t[e.index];return $e(o)?n=o:(n=$g(o,t,null,e),t[e.index]=n,Ss(t,n)),dv(n,t,e,o),new lv(n,e,t)}(Pe(),D())}const YR=qt,lv=class extends YR{constructor(t,n,o){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=o}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const t=zi(this._hostTNode,this._hostLView);if(Nl(t)){const n=Er(t,this._hostLView),o=Cr(t);return new We(n[A].data[o+8],n)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=uv(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Re}createEmbeddedView(t,n,o){let r,i;"number"==typeof o?r=o:null!=o&&(r=o.index,i=o.injector);const a=t.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,r,false),a}createComponent(t,n,o,r,i){const s=t&&!function Ir(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const y=n||{};a=y.index,o=y.injector,r=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}const l=s?t:new Ur(z(t)),c=o||this.parentInjector;if(!i&&null==l.ngModule){const _=(s?c:this.parentInjector).get(tn,null);_&&(i=_)}z(l.componentType??{});const h=l.create(c,r,null,i);return this.insertImpl(h.hostView,a,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,o){const r=t._lView;if(function ST(e){return $e(e[fe])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const c=r[fe],f=new lv(c,c[ke],c[fe]);f.detach(f.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;return OR(a,r,s,!o),t.attachToViewContainerRef(),jp(mc(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=uv(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),o=os(this._lContainer,n);o&&(Ji(mc(this._lContainer),n),Kl(o[A],o))}detach(t){const n=this._adjustIndex(t,-1),o=os(this._lContainer,n);return o&&null!=Ji(mc(this._lContainer),n)?new Or(o):null}_adjustIndex(t,n=0){return t??this.length+n}};function uv(e){return e[8]}function mc(e){return e[8]||(e[8]=[])}let dv=function fv(e,t,n,o){if(e[Lt])return;let r;r=8&n.type?le(o):function KR(e,t){const n=e[L],o=n.createComment(""),r=tt(t,e);return Hn(n,rs(n,r),o,function lS(e,t){return e.nextSibling(t)}(n,r),!1),o}(t,n),e[Lt]=r};function vv(e,t){return zs(e,t)}const Ab=new b("Application Initializer");let Sc=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,o)=>{this.resolve=n,this.reject=o}),this.appInits=re(Ab,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const r of this.appInits){const i=r();if(Vs(i))n.push(i);else if(wm(i)){const s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{o()}).catch(r=>{this.reject(r)}),0===n.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const ln=new b("LocaleId",{providedIn:"root",factory:()=>re(ln,$.Optional|$.SkipSelf)||function Rb(){return typeof $localize<"u"&&$localize.locale||qo}()});let xb=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new CI(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Uv=new b(""),Ks=new b("");let bc,Nc=(()=>{class e{constructor(n,o,r){this._ngZone=n,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bc||(function nP(e){bc=e}(r),r.addToWindow(o)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(n)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,o,r){let i=-1;o&&o>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:r})}whenStable(n,o,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,o,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,o,r){return[]}static{this.\u0275fac=function(o){return new(o||e)(q(ye),q(Rc),q(Ks))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})(),Rc=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,o){this._applications.set(n,o)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,o=!0){return bc?.findTestabilityInTree(this,n,o)??null}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Mn=null;const Bv=new b("AllowMultipleToken"),Pc=new b("PlatformDestroyListeners"),Hv=new b("appBootstrapListener");function qv(e,t,n=[]){const o=`Platform: ${t}`,r=new b(o);return(i=[])=>{let s=xc();if(!s||s.injector.get(Bv,!1)){const a=[...n,...i,{provide:r,useValue:!0}];e?e(a):function iP(e){if(Mn&&!Mn.get(Bv,!1))throw new S(400,!1);(function Gv(){!function dT(e){dp=e}(()=>{throw new S(600,!1)})})(),Mn=e;const t=e.get(Wv);(function $v(e){e.get(og,null)?.forEach(n=>n())})(e)}(function zv(e=[],t){return St.create({name:t,providers:[{provide:du,useValue:"platform"},{provide:Pc,useValue:new Set([()=>Mn=null])},...e]})}(a,o))}return function aP(e){const t=xc();if(!t)throw new S(401,!1);return t}()}}function xc(){return Mn?.get(Wv)??null}let Wv=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,o){const r=function lP(e="zone.js",t){return"noop"===e?new wM:"zone.js"===e?new ye(t):e}(o?.ngZone,function Jv(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return r.run(()=>{const i=function lR(e,t,n){return new dc(e,t,n)}(n.moduleType,this.injector,function Xv(e){return[{provide:ye,useFactory:e},{provide:cs,multi:!0,useFactory:()=>{const t=re(cP,{optional:!0});return()=>t.initialize()}},{provide:Qv,useFactory:uP},{provide:Cg,useFactory:Eg}]}(()=>r)),s=i.injector.get(nn,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});i.onDestroy(()=>{Zs(this._modules,i),a.unsubscribe()})}),function Yv(e,t,n){try{const o=n();return Vs(o)?o.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):o}catch(o){throw t.runOutsideAngular(()=>e.handleError(o)),o}}(s,r,()=>{const a=i.injector.get(Sc);return a.runInitializers(),a.donePromise.then(()=>(function Ey(e){pt(e,"Expected localeId to be defined"),"string"==typeof e&&(Cy=e.toLowerCase().replace(/_/g,"-"))}(i.injector.get(ln,qo)||qo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,o=[]){const r=Kv({},o);return function oP(e,t,n){const o=new fc(n);return Promise.resolve(o)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,r))}_moduleDoBootstrap(n){const o=n.injector.get(ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>o.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new S(-403,!1);n.instance.ngDoBootstrap(o)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const n=this._injector.get(Pc,null);n&&(n.forEach(o=>o()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||e)(q(St))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Kv(e,t){return Array.isArray(t)?t.reduce(Kv,e):{...e,...t}}let ti=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=re(Qv),this.zoneIsStable=re(Cg),this.componentTypes=[],this.components=[],this.isStable=re(xb).hasPendingTasks.pipe(function DI(e,t){return kn((n,o)=>{let r=null,i=0,s=!1;const a=()=>s&&!r&&o.complete();n.subscribe(pn(o,l=>{r?.unsubscribe();let c=0;const f=i++;xt(e(l,f)).subscribe(r=pn(o,p=>o.next(t?t(l,p,f,c++):p),()=>{r=null,a()}))},()=>{s=!0,a()}))})}(n=>n?function EI(...e){return Ja(e,wf(e))}(!1):this.zoneIsStable),function II(e,t=Ua){return e=e??TI,kn((n,o)=>{let r,i=!0;n.subscribe(pn(o,s=>{const a=t(s);(i||!e(r,a))&&(i=!1,r=a,o.next(s))}))})}(),Nf()),this._injector=re(tn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,o){const r=n instanceof lg;if(!this._injector.get(Sc).done)throw!r&&function ur(e){const t=z(e)||Ne(e)||Ge(e);return null!==t&&t.standalone}(n),new S(405,!1);let s;s=r?n:this._injector.get(Cs).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function rP(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Jn),c=s.create(St.NULL,[],o||s.selector,a),f=c.location.nativeElement,p=c.injector.get(Uv,null);return p?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Zs(this.components,c),p?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){const o=n;Zs(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const o=this._injector.get(Hv,[]);o.push(...this._bootstrapListeners),o.forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Zs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Zs(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Qv=new b("",{providedIn:"root",factory:()=>re(nn).handleError.bind(void 0)});function uP(){const e=re(ye),t=re(nn);return n=>e.runOutsideAngular(()=>t.handleError(n))}let cP=(()=>{class e{constructor(){this.zone=re(ye),this.applicationRef=re(ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();let e_=(()=>{class e{static{this.__NG_ELEMENT_ID__=fP}}return e})();function fP(e){return function pP(e,t,n){if(Vn(e)&&!n){const o=at(e.index,t);return new Or(o,o)}return 47&e.type?new Or(t[De],t):null}(Pe(),D(),16==(16&e))}class r_{constructor(){}supports(t){return Rs(t)}create(t){return new vP(t)}}const yP=(e,t)=>t;class vP{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||yP}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,o=this._removalsHead,r=0,i=null;for(;n||o;){const s=!o||n&&n.currentIndex<s_(o,r,i)?n:o,a=s_(s,r,i),l=s.currentIndex;if(s===o)r--,o=o._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{i||(i=[]);const c=a-r,f=l-r;if(c!=f){for(let g=0;g<c;g++){const h=g<i.length?i[g]:i[g]=0,m=h+g;f<=m&&m<c&&(i[g]=h+1)}i[s.previousIndex]=f-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Rs(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,i,s,n=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(o&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),o=!0),n=n._next}else r=0,function VA(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let o;for(;!(o=n.next()).done;)t(o.value)}}(t,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(o&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),o=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,o,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,r))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,r)):t=this._addAfter(new _P(n,o),i,r),t}_verifyReinsertion(t,n,o,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,n,o),this._addToMoves(t,o),t}_moveAfter(t,n,o){return this._unlink(t),this._insertAfter(t,n,o),this._addToMoves(t,o),t}_addAfter(t,n,o){return this._insertAfter(t,n,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,o){const r=null===n?this._itHead:n._next;return t._next=r,t._prev=n,null===r?this._itTail=t:r._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new i_),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,o=t._next;return null===n?this._itHead=o:n._next=o,null===o?this._itTail=n:o._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new i_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class _P{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CP{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===n||n<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const n=t._prevDup,o=t._nextDup;return null===n?this._head=o:n._nextDup=o,null===o?this._tail=n:o._prevDup=n,null===this._head}}class i_{constructor(){this.map=new Map}put(t){const n=t.trackById;let o=this.map.get(n);o||(o=new CP,this.map.set(n,o)),o.add(t)}get(t,n){const r=this.map.get(t);return r?r.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s_(e,t,n){const o=e.previousIndex;if(null===o)return o;let r=0;return n&&o<n.length&&(r=n[o]),o+t+r}function l_(){return new js([new r_])}let js=(()=>{class e{static{this.\u0275prov=j({token:e,providedIn:"root",factory:l_})}constructor(n){this.factories=n}static create(n,o){if(null!=o){const r=o.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:o=>e.create(n,o||l_()),deps:[[e,new Ul,new Ol]]}}find(n){const o=this.factories.find(r=>r.supports(n));if(null!=o)return o;throw new S(901,!1)}}return e})();const wP=qv(null,"core",[]);let SP=(()=>{class e{constructor(n){}static{this.\u0275fac=function(o){return new(o||e)(q(ti))}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({})}}return e})();let Bc=null;function oi(){return Bc}class UP{}const Kn=new b("DocumentToken");class Ax{constructor(t,n,o,r){this.$implicit=t,this.ngForOf=n,this.index=o,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,o,r){this._viewContainer=n,this._template=o,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const o=this._viewContainer;n.forEachOperation((r,i,s)=>{if(null==r.previousIndex)o.createEmbeddedView(this._template,new Ax(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)o.remove(null===i?void 0:i);else if(null!==i){const a=o.get(i);o.move(a,s),A_(a,r)}});for(let r=0,i=o.length;r<i;r++){const a=o.get(r).context;a.index=r,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{A_(o.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,o){return!0}static{this.\u0275fac=function(o){return new(o||e)(w(qt),w(an),w(js))}}static{this.\u0275dir=O({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function A_(e,t){e.context.$implicit=t.item}let da=(()=>{class e{constructor(n,o){this._viewContainer=n,this._context=new Nx,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){N_("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){N_("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,o){return!0}static{this.\u0275fac=function(o){return new(o||e)(w(qt),w(an))}}static{this.\u0275dir=O({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class Nx{constructor(){this.$implicit=null,this.ngIf=null}}function N_(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Se(t)}'.`)}let P_=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({})}}return e})();function F_(e){return"server"===e}class MF extends UP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rd extends MF{static makeCurrent(){!function OP(e){Bc||(Bc=e)}(new rd)}onAndCancel(t,n,o){return t.addEventListener(n,o),()=>{t.removeEventListener(n,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function AF(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}();return null==n?null:function NF(e){ha=ha||document.createElement("a"),ha.setAttribute("href",e);const t=ha.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function wx(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const o=n.indexOf("="),[r,i]=-1==o?[n,""]:[n.slice(0,o),n.slice(o+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ha,ai=null,bF=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();const id=new b("EventManagerPlugins");let U_=(()=>{class e{constructor(n,o){this._zone=o,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,o,r){return this._findPluginFor(o).addEventListener(n,o,r)}getZone(){return this._zone}_findPluginFor(n){let o=this._eventNameToPlugin.get(n);if(o)return o;if(o=this._plugins.find(i=>i.supports(n)),!o)throw new S(5101,!1);return this._eventNameToPlugin.set(n,o),o}static{this.\u0275fac=function(o){return new(o||e)(q(id),q(ye))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();class B_{constructor(t){this._doc=t}}const sd="ng-app-id";let H_=(()=>{class e{constructor(n,o,r,i={}){this.doc=n,this.appId=o,this.nonce=r,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=F_(i),this.resetHostNodes()}addStyles(n){for(const o of n)1===this.changeUsageCount(o,1)&&this.onStyleAdded(o)}removeStyles(n){for(const o of n)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(o=>o.remove()),n.clear());for(const o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const o of this.getAllStyles())this.addStyleToHost(n,o)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const o of this.hostNodes)this.addStyleToHost(o,n)}onStyleRemoved(n){const o=this.styleRef;o.get(n)?.elements?.forEach(r=>r.remove()),o.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${sd}="${this.appId}"]`);if(n?.length){const o=new Map;return n.forEach(r=>{null!=r.textContent&&o.set(r.textContent,r)}),o}return null}changeUsageCount(n,o){const r=this.styleRef;if(r.has(n)){const i=r.get(n);return i.usage+=o,i.usage}return r.set(n,{usage:o,elements:[]}),o}getStyleElement(n,o){const r=this.styleNodesInDOM,i=r?.get(o);if(i?.parentNode===n)return r.delete(o),i.removeAttribute(sd),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=o,this.platformIsServer&&s.setAttribute(sd,this.appId),s}}addStyleToHost(n,o){const r=this.getStyleElement(n,o);n.appendChild(r);const i=this.styleRef,s=i.get(o)?.elements;s?s.push(r):i.set(o,{elements:[r],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(o){return new(o||e)(q(Kn),q(hs),q(rg,8),q(So))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();const ad={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ld=/%COMP%/g,kF=new b("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function $_(e,t){return t.map(n=>n.replace(ld,e))}let q_=(()=>{class e{constructor(n,o,r,i,s,a,l,c=null){this.eventManager=n,this.sharedStylesHost=o,this.appId=r,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=F_(a),this.defaultRenderer=new ud(n,s,l,this.platformIsServer)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Et.ShadowDom&&(o={...o,encapsulation:Et.Emulated});const r=this.getOrCreateRenderer(n,o);return r instanceof W_?r.applyToHost(n):r instanceof cd&&r.applyStyles(),r}getOrCreateRenderer(n,o){const r=this.rendererByCompId;let i=r.get(o.id);if(!i){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(o.encapsulation){case Et.Emulated:i=new W_(l,c,o,this.appId,f,s,a,p);break;case Et.ShadowDom:return new UF(l,c,n,o,s,a,this.nonce,p);default:i=new cd(l,c,o,f,s,a,p)}r.set(o.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(o){return new(o||e)(q(U_),q(H_),q(hs),q(kF),q(Kn),q(So),q(ye),q(rg))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();class ud{constructor(t,n,o,r){this.eventManager=t,this.doc=n,this.ngZone=o,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(ad[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(z_(t)?t.content:t).appendChild(n)}insertBefore(t,n,o){t&&(z_(t)?t.content:t).insertBefore(n,o)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let o="string"==typeof t?this.doc.querySelector(t):t;if(!o)throw new S(-5104,!1);return n||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,o,r){if(r){n=r+":"+n;const i=ad[r];i?t.setAttributeNS(i,n,o):t.setAttribute(n,o)}else t.setAttribute(n,o)}removeAttribute(t,n,o){if(o){const r=ad[o];r?t.removeAttributeNS(r,n):t.removeAttribute(`${o}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,o,r){r&(In.DashCase|In.Important)?t.style.setProperty(n,o,r&In.Important?"important":""):t.style[n]=o}removeStyle(t,n,o){o&In.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,o){t[n]=o}setValue(t,n){t.nodeValue=n}listen(t,n,o){if("string"==typeof t&&!(t=oi().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(o))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function z_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class UF extends ud{constructor(t,n,o,r,i,s,a,l){super(t,i,s,l),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=$_(r.id,r.styles);for(const f of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,o){return super.insertBefore(this.nodeOrShadowRoot(t),n,o)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class cd extends ud{constructor(t,n,o,r,i,s,a,l){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?$_(l,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class W_ extends cd{constructor(t,n,o,r,i,s,a,l){const c=r+"-"+o.id;super(t,n,o,i,s,a,l,c),this.contentAttr=function LF(e){return"_ngcontent-%COMP%".replace(ld,e)}(c),this.hostAttr=function VF(e){return"_nghost-%COMP%".replace(ld,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const o=super.createElement(t,n);return super.setAttribute(o,this.contentAttr,""),o}}let BF=(()=>{class e extends B_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,r){return n.addEventListener(o,r,!1),()=>this.removeEventListener(n,o,r)}removeEventListener(n,o,r){return n.removeEventListener(o,r)}static{this.\u0275fac=function(o){return new(o||e)(q(Kn))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();const J_=["alt","control","meta","shift"],HF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let $F=(()=>{class e extends B_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,o,r){const i=e.parseEventName(o),s=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oi().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const o=n.toLowerCase().split("."),r=o.shift();if(0===o.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(o.pop());let s="",a=o.indexOf("code");if(a>-1&&(o.splice(a,1),s="code."),J_.forEach(c=>{const f=o.indexOf(c);f>-1&&(o.splice(f,1),s+=c+".")}),s+=i,0!=o.length||0===i.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,o){let r=HF[n.key]||n.key,i="";return o.indexOf("code.")>-1&&(r=n.code,i="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),J_.forEach(s=>{s!==r&&(0,GF[s])(n)&&(i+=s+".")}),i+=r,i===o)}static eventCallback(n,o,r){return i=>{e.matchEventFullKeyCode(i,n)&&r.runGuarded(()=>o(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(o){return new(o||e)(q(Kn))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();const JF=qv(wP,"browser",[{provide:So,useValue:"browser"},{provide:og,useValue:function qF(){rd.makeCurrent()},multi:!0},{provide:Kn,useFactory:function WF(){return function mS(e){nu=e}(document),document},deps:[]}]),YF=new b(""),Z_=[{provide:Ks,useClass:class RF{addToWindow(t){ae.getAngularTestability=(o,r=!0)=>{const i=t.findTestabilityInTree(o,r);if(null==i)throw new S(5103,!1);return i},ae.getAllAngularTestabilities=()=>t.getAllTestabilities(),ae.getAllAngularRootElements=()=>t.getAllRootElements(),ae.frameworkStabilizers||(ae.frameworkStabilizers=[]),ae.frameworkStabilizers.push(o=>{const r=ae.getAllAngularTestabilities();let i=r.length,s=!1;const a=function(l){s=s||l,i--,0==i&&o(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,n,o){return null==n?null:t.getTestability(n)??(o?oi().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Uv,useClass:Nc,deps:[ye,Rc,Ks]},{provide:Nc,useClass:Nc,deps:[ye,Rc,Ks]}],Q_=[{provide:du,useValue:"root"},{provide:nn,useFactory:function zF(){return new nn},deps:[]},{provide:id,useClass:BF,multi:!0,deps:[Kn,ye,So]},{provide:id,useClass:$F,multi:!0,deps:[Kn]},q_,H_,U_,{provide:cg,useExisting:q_},{provide:class rF{},useClass:bF,deps:[]},[]];let X_=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:hs,useValue:n.appId}]}}static{this.\u0275fac=function(o){return new(o||e)(q(YF,12))}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({providers:[...Q_,...Z_],imports:[P_,SP]})}}return e})();function nC(e,t,n,o,r,i,s){try{var a=e[i](s),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(o,r)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function s(l){nC(i,o,r,s,a,"next",l)}function a(l){nC(i,o,r,s,a,"throw",l)}s(void 0)})}}typeof window<"u"&&window;const{isArray:tk}=Array,{getPrototypeOf:nk,prototype:ok,keys:rk}=Object;const{isArray:ak}=Array;function ck(e,t){return e.reduce((n,o,r)=>(n[o]=t[r],n),{})}function dk(...e){const t=function dI(e){return he(Wa(e))?e.pop():void 0}(e),{args:n,keys:o}=function ik(e){if(1===e.length){const t=e[0];if(tk(t))return{args:t,keys:null};if(function sk(e){return e&&"object"==typeof e&&nk(e)===ok}(t)){const n=rk(t);return{args:n.map(o=>t[o]),keys:n}}}return{args:e,keys:null}}(e),r=new He(i=>{const{length:s}=n;if(!s)return void i.complete();const a=new Array(s);let l=s,c=s;for(let f=0;f<s;f++){let p=!1;xt(n[f]).subscribe(pn(i,g=>{p||(p=!0,c--),a[f]=g},()=>l--,void 0,()=>{(!l||!p)&&(c||i.next(o?ck(o,a):a),i.complete())}))}});return t?r.pipe(function uk(e){return Ba(t=>function lk(e,t){return ak(t)?e(...t):e(t)}(e,t))}(t)):r}let oC=(()=>{class e{constructor(n,o){this._renderer=n,this._elementRef=o,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,o){this._renderer.setProperty(this._elementRef.nativeElement,n,o)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(o){return new(o||e)(w($n),w(wt))}}static{this.\u0275dir=O({type:e})}}return e})(),Zn=(()=>{class e extends oC{static{this.\u0275fac=function(){let n;return function(r){return(n||(n=function Le(e){return Yt(()=>{const t=e.prototype.constructor,n=t[Kt]||xl(t),o=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==o;){const i=r[Kt]||xl(r);if(i&&i!==n)return i;r=Object.getPrototypeOf(r)}return i=>new i})}(e)))(r||e)}}()}static{this.\u0275dir=O({type:e,features:[ee]})}}return e})();const zt=new b("NgValueAccessor"),pk={provide:zt,useExisting:se(()=>ga),multi:!0},gk=new b("CompositionEventMode");let ga=(()=>{class e extends oC{constructor(n,o,r){super(n,o),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hk(){const e=oi()?oi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(o){return new(o||e)(w($n),w(wt),w(gk,8))}}static{this.\u0275dir=O({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,r){1&o&&Je("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[pe([pk]),ee]})}}return e})();const Ue=new b("NgValidators"),Rn=new b("NgAsyncValidators");function hC(e){return null!=e}function gC(e){return Vs(e)?Ja(e):e}function mC(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function yC(e,t){return t.map(n=>n(e))}function vC(e){return e.map(t=>function yk(e){return!e.validate}(t)?t:n=>t.validate(n))}function fd(e){return null!=e?function _C(e){if(!e)return null;const t=e.filter(hC);return 0==t.length?null:function(n){return mC(yC(n,t))}}(vC(e)):null}function pd(e){return null!=e?function CC(e){if(!e)return null;const t=e.filter(hC);return 0==t.length?null:function(n){return dk(yC(n,t).map(gC)).pipe(Ba(mC))}}(vC(e)):null}function EC(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function hd(e){return e?Array.isArray(e)?e:[e]:[]}function ya(e,t){return Array.isArray(e)?e.includes(t):e===t}function TC(e,t){const n=hd(t);return hd(e).forEach(r=>{ya(n,r)||n.push(r)}),n}function wC(e,t){return hd(t).filter(n=>!ya(e,n))}class SC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=fd(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Qe extends SC{get formDirective(){return null}get path(){return null}}class bn extends SC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class MC{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let AC=(()=>{class e extends MC{constructor(n){super(n)}static{this.\u0275fac=function(o){return new(o||e)(w(bn,2))}}static{this.\u0275dir=O({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,r){2&o&&Us("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ee]})}}return e})();const li="VALID",_a="INVALID",Yo="PENDING",ui="DISABLED";function Ca(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class _d{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===li}get invalid(){return this.status===_a}get pending(){return this.status==Yo}get disabled(){return this.status===ui}get enabled(){return this.status!==ui}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(TC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(TC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(wC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(wC(t,this._rawAsyncValidators))}hasValidator(t){return ya(this._rawValidators,t)}hasAsyncValidator(t){return ya(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Yo,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=ui,this.errors=null,this._forEachChild(o=>{o.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=li,this._forEachChild(o=>{o.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===li||this.status===Yo)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ui:li}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Yo,this._hasOwnPendingAsyncValidator=!0;const n=gC(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((o,r)=>o&&o._find(r),this)}getError(t,n){const o=n?this.get(n):this;return o&&o.errors?o.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?ui:this.errors?_a:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yo)?Yo:this._anyControlsHaveStatus(_a)?_a:li}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ca(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Dk(e){return Array.isArray(e)?fd(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Ik(e){return Array.isArray(e)?pd(e):e||null}(this._rawAsyncValidators)}}const Ko=new b("CallSetDisabledState",{providedIn:"root",factory:()=>Ea}),Ea="always";function ci(e,t,n=Ea){(function Ed(e,t){const n=function DC(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(EC(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const o=function IC(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(EC(o,t.asyncValidator)):"function"==typeof o&&e.setAsyncValidators([o]);const r=()=>e.updateValueAndValidity();Ta(t._rawValidators,r),Ta(t._rawAsyncValidators,r)})(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function Sk(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&PC(e,t)})}(e,t),function Ak(e,t){const n=(o,r)=>{t.valueAccessor.writeValue(o),r&&t.viewToModelUpdate(o)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function Mk(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&PC(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function wk(e,t){if(t.valueAccessor.setDisabledState){const n=o=>{t.valueAccessor.setDisabledState(o)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Ta(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function PC(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function kC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function LC(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const VC=class extends _d{constructor(t=null,n,o){super(function yd(e){return(Ca(e)?e.validators:e)||null}(n),function vd(e,t){return(Ca(t)?t.asyncValidators:e)||null}(o,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ca(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=LC(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){LC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Lk={provide:bn,useExisting:se(()=>Sd)},BC=(()=>Promise.resolve())();let Sd=(()=>{class e extends bn{constructor(n,o,r,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new VC,this._registered=!1,this.name="",this.update=new xe,this._parent=n,this._setValidators(o),this._setAsyncValidators(r),this.valueAccessor=function Td(e,t){if(!t)return null;let n,o,r;return Array.isArray(t),t.forEach(i=>{i.constructor===ga?n=i:function bk(e){return Object.getPrototypeOf(e.constructor)===Zn}(i)?o=i:r=i}),r||o||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const o=n.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Id(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ci(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){BC.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const o=n.isDisabled.currentValue,r=0!==o&&function Uc(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(o);BC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Da(e,t){return[...t.path,e]}(n,this._parent):[n]}static{this.\u0275fac=function(o){return new(o||e)(w(Qe,9),w(Ue,10),w(Rn,10),w(zt,10),w(e_,8),w(Ko,8))}}static{this.\u0275dir=O({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pe([Lk]),ee,Qt]})}}return e})(),GC=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({})}}return e})(),aL=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({imports:[GC]})}}return e})(),uL=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ko,useValue:n.callSetDisabledState??Ea}]}}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=yn({type:e})}static{this.\u0275inj=Jt({imports:[aL]})}}return e})();class Xn{}function N(e,t){return e.replace(/\{([^}]+)\}/g,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];return null!=i?String(i):""}throw new Error(`Key '${r}' not found in valueMap.`)})}function d(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${s}`);e[a]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++)d(l[c],t.slice(i+1),n[c]);else for(const c of l)d(c,t.slice(i+1),n)}return}if(s.endsWith("[0]")){const a=s.slice(0,-3);return a in e||(e[a]=[{}]),void d(e[a][0],t.slice(i+1),n)}(!e[s]||"object"!=typeof e[s])&&(e[s]={}),e=e[s]}const o=t[t.length-1],r=e[o];if(void 0!==r){if(!n||"object"==typeof n&&0===Object.keys(n).length||n===r)return;if("object"!=typeof r||"object"!=typeof n||null===r||null===n)throw new Error(`Cannot set value for an existing key. Key: ${o}`);Object.assign(r,n)}else"_self"!==o||"object"!=typeof n||null===n||Array.isArray(n)?e[o]=n:Object.assign(e,n)}function u(e,t,n=void 0){try{if(1===t.length&&"_self"===t[0])return e;for(let o=0;o<t.length;o++){if("object"!=typeof e||null===e)return n;const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const s=e[i];return Array.isArray(s)?s.map(a=>u(a,t.slice(o+1),n)):n}return n}e=e[r]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function xd(e,t,n,o,r){if(o>=t.length||"object"!=typeof e||null===e)return;const i=t[o];if(i.endsWith("[]")){const s=i.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const l of a[s])xd(l,t,n,o+1,r)}else if("*"===i){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const s=e,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),l={};for(const c of a)l[c]=s[c];for(const[c,f]of Object.entries(l)){const p=[];for(const g of n.slice(o))p.push("*"===g?c:g);d(s,p,f)}for(const c of a)delete s[c]}}else i in e&&xd(e[i],t,n,o+1,r)}function Fd(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}var Fe=function(e){return e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL",e}(Fe||{}),kd=function(e){return e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO",e}(kd||{}),lE=function(e){return e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",e}(lE||{}),fi=function(e){return e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT",e}(fi||{});class Ld{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class pi{get text(){var t,n,o,r,i,s,a,l;if(0===(null===(r=null===(o=null===(n=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const g of null!==(l=null===(a=null===(s=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===s?void 0:s.content)||void 0===a?void 0:a.parts)&&void 0!==l?l:[]){for(const[h,m]of Object.entries(g))"text"!==h&&"thought"!==h&&(null!==m||void 0!==m)&&p.push(h);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;f=!0,c+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,o,r,i,s,a,l;if(0===(null===(r=null===(o=null===(n=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of null!==(l=null===(a=null===(s=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===s?void 0:s.content)||void 0===a?void 0:a.parts)&&void 0!==l?l:[]){for(const[g,h]of Object.entries(p))"inlineData"!==g&&(null!==h||void 0!==h)&&f.push(g);p.inlineData&&"string"==typeof p.inlineData.data&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,o,r,i,s,a,l;if(0===(null===(r=null===(o=null===(n=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=null===(l=null===(a=null===(s=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===s?void 0:s.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>void 0!==f);return 0!==c?.length?c:void 0}get executableCode(){var t,n,o,r,i,s,a,l,c;if(0===(null===(r=null===(o=null===(n=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=null===(l=null===(a=null===(s=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===s?void 0:s.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>void 0!==p);return 0!==f?.length?null===(c=f?.[0])||void 0===c?void 0:c.code:void 0}get codeExecutionResult(){var t,n,o,r,i,s,a,l,c;if(0===(null===(r=null===(o=null===(n=null===(t=this.candidates)||void 0===t?void 0:t[0])||void 0===n?void 0:n.content)||void 0===o?void 0:o.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=null===(l=null===(a=null===(s=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===s?void 0:s.content)||void 0===a?void 0:a.parts)||void 0===l?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>void 0!==p);return 0!==f?.length?null===(c=f?.[0])||void 0===c?void 0:c.output:void 0}}class fE{}class pE{}class gV{}class mV{}class yV{}class vV{}class hE{}class gE{}class mE{}class _V{}class Sa{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const o=new Sa;let r;const i=t;return r=n?function gL(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["metadata"]);null!=o&&d(t,["metadata"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);null!=i&&d(t,["error"],i);const s=u(e,["response"]);return null!=s&&d(t,["response"],function yL(e){const t={},n=u(e,["videos"]);if(null!=n){let i=n;Array.isArray(i)&&(i=i.map(s=>function _L(e){const t={},n=u(e,["_self"]);return null!=n&&d(t,["video"],function IL(e){const t={},n=u(e,["gcsUri"]);null!=n&&d(t,["uri"],n);const o=u(e,["bytesBase64Encoded"]);null!=o&&d(t,["videoBytes"],Fd(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(n)),t}(s))),d(t,["generatedVideos"],i)}const o=u(e,["raiMediaFilteredCount"]);null!=o&&d(t,["raiMediaFilteredCount"],o);const r=u(e,["raiMediaFilteredReasons"]);return null!=r&&d(t,["raiMediaFilteredReasons"],r),t}(s)),t}(i):function hL(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["metadata"]);null!=o&&d(t,["metadata"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);null!=i&&d(t,["error"],i);const s=u(e,["response","generateVideoResponse"]);return null!=s&&d(t,["response"],function mL(e){const t={},n=u(e,["generatedSamples"]);if(null!=n){let i=n;Array.isArray(i)&&(i=i.map(s=>function vL(e){const t={},n=u(e,["video"]);return null!=n&&d(t,["video"],function DL(e){const t={},n=u(e,["uri"]);null!=n&&d(t,["uri"],n);const o=u(e,["encodedVideo"]);null!=o&&d(t,["videoBytes"],Fd(o));const r=u(e,["encoding"]);return null!=r&&d(t,["mimeType"],r),t}(n)),t}(s))),d(t,["generatedVideos"],i)}const o=u(e,["raiMediaFilteredCount"]);null!=o&&d(t,["raiMediaFilteredCount"],o);const r=u(e,["raiMediaFilteredReasons"]);return null!=r&&d(t,["raiMediaFilteredReasons"],r),t}(s)),t}(i),Object.assign(o,r),o}}class yE{}class vE{}class _E{}class CV{}class EV{}class DV{}class CE{}class IV{get text(){var t,n,o;let r="",i=!1;const s=[];for(const a of null!==(o=null===(n=null===(t=this.serverContent)||void 0===t?void 0:t.modelTurn)||void 0===n?void 0:n.parts)&&void 0!==o?o:[]){for(const[l,c]of Object.entries(a))"text"!==l&&"thought"!==l&&null!==c&&s.push(l);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;i=!0,r+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var t,n,o;let r="";const i=[];for(const s of null!==(o=null===(n=null===(t=this.serverContent)||void 0===t?void 0:t.modelTurn)||void 0===n?void 0:n.parts)&&void 0!==o?o:[]){for(const[a,l]of Object.entries(s))"inlineData"!==a&&null!==l&&i.push(a);s.inlineData&&"string"==typeof s.inlineData.data&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class TV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function Y(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function EE(e,t){const n=Y(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function DE(e){return Array.isArray(e)?e.map(t=>Ma(t)):[Ma(e)]}function Ma(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function IE(e){const t=Ma(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function TE(e){const t=Ma(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function wE(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function SE(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>wE(t)):[wE(e)]}function Vd(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function ME(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function AE(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function Be(e){if(null==e)throw new Error("ContentUnion is required");return Vd(e)?e:{role:"user",parts:SE(e)}}function Od(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=Be(n);return o.parts&&o.parts.length>0&&void 0!==o.parts[0].text?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=Be(t);return n.parts&&n.parts.length>0&&void 0!==n.parts[0].text?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Be(n)):[Be(t)]}function Ct(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(ME(e)||AE(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(e)]}const t=[],n=[],o=Vd(e[0]);for(const r of e){const i=Vd(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(r);else{if(ME(r)||AE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:SE(n)}),t}function Zo(e){const t={},n=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(t.nullable=!0,e=i[1]):"null"===i[1].type&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&function wV(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>"null"!==o);if(1===n.length)t.type=Object.values(Fe).includes(n[0].toUpperCase())?n[0].toUpperCase():Fe.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(Fe).includes(o.toUpperCase())?o.toUpperCase():Fe.TYPE_UNSPECIFIED})}}(e.type,t);for(const[s,a]of Object.entries(e))if(null!=a)if("type"==s){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(Fe).includes(a.toUpperCase())?a.toUpperCase():Fe.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=Zo(a);else if(o.includes(s)){const l=[];for(const c of a)"null"!=c.type?l.push(Zo(c)):t.nullable=!0;t[s]=l}else if(r.includes(s)){const l={};for(const[c,f]of Object.entries(a))l[c]=Zo(f);t[s]=l}else{if("additionalProperties"===s)continue;t[s]=a}return t}function Ud(e){return Zo(e)}function Bd(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function Hd(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Qo(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Zo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Zo(t.response));return e}function Xo(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function dn(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function SV(e,t,n,o=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}(e,t,"cachedContents")}function NE(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Pn(e){return Fd(e)}function RE(e){var t;let n;if(function MV(e){return null!=e&&"object"==typeof e&&"name"in e}(e)&&(n=e.name),!(function NV(e){return null!=e&&"object"==typeof e&&"uri"in e}(e)&&(n=e.uri,void 0===n)||function AV(e){return null!=e&&"object"==typeof e&&"video"in e}(e)&&(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===n))){if("string"==typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(null===r)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function bE(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function PE(e){for(const t of["models","tunedModels","publisherModels"])if(RV(e,t))return e[t];return[]}function RV(e,t){return null!==e&&"object"==typeof e&&t in e}function bV(e,t={}){const o={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(o.responseJsonSchema=e.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function xE(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${t}`);n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${t}`);n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||1!==o)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||1!==r)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function FE(e){if("object"!=typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!=typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let i=!1;for(const s of r){if("object"!=typeof s||null===s)continue;const l=s.response;if("object"==typeof l&&null!==l&&void 0!==l.embedding){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function jo(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function kE(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}function Aa(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["metadata","displayName"]);null!=o&&d(t,["displayName"],o);const r=u(e,["metadata","state"]);null!=r&&d(t,["state"],kE(r));const i=u(e,["metadata","createTime"]);null!=i&&d(t,["createTime"],i);const s=u(e,["metadata","endTime"]);null!=s&&d(t,["endTime"],s);const a=u(e,["metadata","updateTime"]);null!=a&&d(t,["updateTime"],a);const l=u(e,["metadata","model"]);null!=l&&d(t,["model"],l);const c=u(e,["metadata","output"]);return null!=c&&d(t,["dest"],function FV(e){const t={},n=u(e,["responsesFile"]);null!=n&&d(t,["fileName"],n);const o=u(e,["inlinedResponses","inlinedResponses"]);if(null!=o){let i=o;Array.isArray(i)&&(i=i.map(s=>function d1(e){const t={},n=u(e,["response"]);null!=n&&d(t,["response"],function i1(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["candidates"]);if(null!=o){let l=o;Array.isArray(l)&&(l=l.map(c=>function $V(e){const t={},n=u(e,["content"]);null!=n&&d(t,["content"],n);const o=u(e,["citationMetadata"]);null!=o&&d(t,["citationMetadata"],function qV(e){const t={},n=u(e,["citationSources"]);if(null!=n){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}(o));const r=u(e,["tokenCount"]);null!=r&&d(t,["tokenCount"],r);const i=u(e,["finishReason"]);null!=i&&d(t,["finishReason"],i);const s=u(e,["urlContextMetadata"]);null!=s&&d(t,["urlContextMetadata"],s);const a=u(e,["avgLogprobs"]);null!=a&&d(t,["avgLogprobs"],a);const l=u(e,["groundingMetadata"]);null!=l&&d(t,["groundingMetadata"],l);const c=u(e,["index"]);null!=c&&d(t,["index"],c);const f=u(e,["logprobsResult"]);null!=f&&d(t,["logprobsResult"],f);const p=u(e,["safetyRatings"]);if(null!=p){let g=p;Array.isArray(g)&&(g=g.map(h=>h)),d(t,["safetyRatings"],g)}return t}(c))),d(t,["candidates"],l)}const r=u(e,["modelVersion"]);null!=r&&d(t,["modelVersion"],r);const i=u(e,["promptFeedback"]);null!=i&&d(t,["promptFeedback"],i);const s=u(e,["responseId"]);null!=s&&d(t,["responseId"],s);const a=u(e,["usageMetadata"]);return null!=a&&d(t,["usageMetadata"],a),t}(n));const o=u(e,["error"]);return null!=o&&d(t,["error"],o),t}(s))),d(t,["inlinedResponses"],i)}const r=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["inlinedEmbedContentResponses"],i)}return t}(FE(c))),t}function Gd(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["displayName"]);null!=o&&d(t,["displayName"],o);const r=u(e,["state"]);null!=r&&d(t,["state"],kE(r));const i=u(e,["error"]);null!=i&&d(t,["error"],i);const s=u(e,["createTime"]);null!=s&&d(t,["createTime"],s);const a=u(e,["startTime"]);null!=a&&d(t,["startTime"],a);const l=u(e,["endTime"]);null!=l&&d(t,["endTime"],l);const c=u(e,["updateTime"]);null!=c&&d(t,["updateTime"],c);const f=u(e,["model"]);null!=f&&d(t,["model"],f);const p=u(e,["inputConfig"]);null!=p&&d(t,["src"],function VV(e){const t={},n=u(e,["instancesFormat"]);null!=n&&d(t,["format"],n);const o=u(e,["gcsSource","uris"]);null!=o&&d(t,["gcsUri"],o);const r=u(e,["bigquerySource","inputUri"]);return null!=r&&d(t,["bigqueryUri"],r),t}(p));const g=u(e,["outputConfig"]);return null!=g&&d(t,["dest"],function kV(e){const t={},n=u(e,["predictionsFormat"]);null!=n&&d(t,["format"],n);const o=u(e,["gcsDestination","outputUriPrefix"]);null!=o&&d(t,["gcsUri"],o);const r=u(e,["bigqueryDestination","outputUri"]);return null!=r&&d(t,["bigqueryUri"],r),t}(FE(g))),t}function LE(e){const t={},n=u(e,["parts"]);if(null!=n){let r=n;Array.isArray(r)&&(r=r.map(i=>function v1(e){const t={},n=u(e,["videoMetadata"]);null!=n&&d(t,["videoMetadata"],n);const o=u(e,["thought"]);null!=o&&d(t,["thought"],o);const r=u(e,["inlineData"]);null!=r&&d(t,["inlineData"],function BV(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);null!=n&&d(t,["data"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(r));const i=u(e,["fileData"]);null!=i&&d(t,["fileData"],function o1(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(i));const s=u(e,["thoughtSignature"]);null!=s&&d(t,["thoughtSignature"],s);const a=u(e,["functionCall"]);null!=a&&d(t,["functionCall"],a);const l=u(e,["codeExecutionResult"]);null!=l&&d(t,["codeExecutionResult"],l);const c=u(e,["executableCode"]);null!=c&&d(t,["executableCode"],c);const f=u(e,["functionResponse"]);null!=f&&d(t,["functionResponse"],f);const p=u(e,["text"]);return null!=p&&d(t,["text"],p),t}(i))),d(t,["parts"],r)}const o=u(e,["role"]);return null!=o&&d(t,["role"],o),t}function VE(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["src"]);null!=r&&d(n,["batch","inputConfig"],function OV(e,t){const n={};if(void 0!==u(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==u(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==u(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=u(t,["fileName"]);null!=o&&d(n,["fileName"],o);const r=u(t,["inlinedRequests"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>function c1(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["request","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let a=Ct(r);Array.isArray(a)&&(a=a.map(l=>LE(l))),d(n,["request","contents"],a)}const i=u(t,["metadata"]);null!=i&&d(n,["metadata"],i);const s=u(t,["config"]);return null!=s&&d(n,["request","generationConfig"],function r1(e,t,n){const o={},r=u(t,["systemInstruction"]);void 0!==n&&null!=r&&d(n,["systemInstruction"],LE(Be(r)));const i=u(t,["temperature"]);null!=i&&d(o,["temperature"],i);const s=u(t,["topP"]);null!=s&&d(o,["topP"],s);const a=u(t,["topK"]);null!=a&&d(o,["topK"],a);const l=u(t,["candidateCount"]);null!=l&&d(o,["candidateCount"],l);const c=u(t,["maxOutputTokens"]);null!=c&&d(o,["maxOutputTokens"],c);const f=u(t,["stopSequences"]);null!=f&&d(o,["stopSequences"],f);const p=u(t,["responseLogprobs"]);null!=p&&d(o,["responseLogprobs"],p);const g=u(t,["logprobs"]);null!=g&&d(o,["logprobs"],g);const h=u(t,["presencePenalty"]);null!=h&&d(o,["presencePenalty"],h);const m=u(t,["frequencyPenalty"]);null!=m&&d(o,["frequencyPenalty"],m);const y=u(t,["seed"]);null!=y&&d(o,["seed"],y);const _=u(t,["responseMimeType"]);null!=_&&d(o,["responseMimeType"],_);const C=u(t,["responseSchema"]);null!=C&&d(o,["responseSchema"],Ud(C));const v=u(t,["responseJsonSchema"]);if(null!=v&&d(o,["responseJsonSchema"],v),void 0!==u(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==u(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=u(t,["safetySettings"]);if(void 0!==n&&null!=E){let te=E;Array.isArray(te)&&(te=te.map(Wt=>function _1(e){const t={};if(void 0!==u(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const n=u(e,["category"]);null!=n&&d(t,["category"],n);const o=u(e,["threshold"]);return null!=o&&d(t,["threshold"],o),t}(Wt))),d(n,["safetySettings"],te)}const I=u(t,["tools"]);if(void 0!==n&&null!=I){let te=Xo(I);Array.isArray(te)&&(te=te.map(Wt=>function C1(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let c=n;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["functionDeclarations"],c)}if(void 0!==u(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);null!=o&&d(t,["googleSearch"],function u1(e){const t={},n=u(e,["timeRangeFilter"]);if(null!=n&&d(t,["timeRangeFilter"],n),void 0!==u(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}(o));const r=u(e,["googleSearchRetrieval"]);if(null!=r&&d(t,["googleSearchRetrieval"],r),void 0!==u(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(e,["googleMaps"]);null!=i&&d(t,["googleMaps"],function l1(e){const t={};if(void 0!==u(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(i));const s=u(e,["urlContext"]);null!=s&&d(t,["urlContext"],s);const a=u(e,["computerUse"]);null!=a&&d(t,["computerUse"],a);const l=u(e,["codeExecution"]);return null!=l&&d(t,["codeExecution"],l),t}(Qo(Wt)))),d(n,["tools"],te)}const M=u(t,["toolConfig"]);if(void 0!==n&&null!=M&&d(n,["toolConfig"],M),void 0!==u(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const R=u(t,["cachedContent"]);void 0!==n&&null!=R&&d(n,["cachedContent"],dn(e,R));const G=u(t,["responseModalities"]);null!=G&&d(o,["responseModalities"],G);const ne=u(t,["mediaResolution"]);null!=ne&&d(o,["mediaResolution"],ne);const Te=u(t,["speechConfig"]);if(null!=Te&&d(o,["speechConfig"],Bd(Te)),void 0!==u(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(t,["thinkingConfig"]);null!=V&&d(o,["thinkingConfig"],V);const oe=u(t,["imageConfig"]);return null!=oe&&d(o,["imageConfig"],oe),o}(e,s,u(n,["request"],{}))),n}(e,s))),d(n,["requests","requests"],i)}return n}(e,xE(e,r)));const i=u(t,["config"]);return null!=i&&function zV(e,t){const o=u(e,["displayName"]);if(void 0!==t&&null!=o&&d(t,["batch","displayName"],o),void 0!==u(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,n),n}function JV(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["model"],Y(e,o));const r=u(t,["src"]);null!=r&&d(n,["inputConfig"],function UV(e){const t={},n=u(e,["format"]);null!=n&&d(t,["instancesFormat"],n);const o=u(e,["gcsUri"]);null!=o&&d(t,["gcsSource","uris"],o);const r=u(e,["bigqueryUri"]);if(null!=r&&d(t,["bigquerySource","inputUri"],r),void 0!==u(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==u(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(xE(e,r)));const i=u(t,["config"]);return null!=i&&function WV(e,t){const o=u(e,["displayName"]);void 0!==t&&null!=o&&d(t,["displayName"],o);const r=u(e,["dest"]);return void 0!==t&&null!=r&&d(t,["outputConfig"],function LV(e){const t={},n=u(e,["format"]);null!=n&&d(t,["predictionsFormat"],n);const o=u(e,["gcsUri"]);null!=o&&d(t,["gcsDestination","outputUriPrefix"],o);const r=u(e,["bigqueryUri"]);if(null!=r&&d(t,["bigqueryDestination","outputUri"],r),void 0!==u(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==u(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==u(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function xV(e){if("string"!=typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}(r))),{}}(i,n),n}var er=function(e){return e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e}(er||{});class hi{constructor(t,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,r)}init(t,n,o){var r,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};s=o&&0!==Object.keys(o).length?"object"==typeof o?Object.assign({},o):o:{config:{}},s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=null!==(i=null===(r=s.config)||void 0===r?void 0:r.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){var n,t=this;return{next:(n=T(function*(){if(t.idxInternal>=t.pageLength){if(!t.hasNextPage())return{value:void 0,done:!0};yield t.nextPage()}const o=t.getItem(t.idxInternal);return t.idxInternal+=1,{value:o,done:!1}}),function(){return n.apply(this,arguments)}),return:function(){var n=T(function*(){return{value:void 0,done:!0}});return function(){return n.apply(this,arguments)}}()}}nextPage(){var t=this;return T(function*(){if(!t.hasNextPage())throw new Error("No more pages to fetch.");const n=yield t.requestInternal(t.params);return t.initNextPage(n),t.page})()}hasNextPage(){var t;return void 0!==(null===(t=this.params.config)||void 0===t?void 0:t.pageToken)}}class E1 extends Xn{constructor(t){var n;super(),n=this,this.apiClient=t,this.create=function(){var o=T(function*(r){return n.apiClient.isVertexAI()&&(r.config=n.formatDestination(r.src,r.config)),n.createInternal(r)});return function(r){return o.apply(this,arguments)}}(),this.createEmbeddings=function(){var o=T(function*(r){if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),n.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return n.createEmbeddingsInternal(r)});return function(r){return o.apply(this,arguments)}}(),this.list=T(function*(o={}){return new hi(er.PAGED_ITEM_BATCH_JOBS,r=>n.listInternal(r),yield n.listInternal(o),o)})}createInlinedGenerateContentRequest(t){const n=VE(this.apiClient,t),r=N("{model}:batchGenerateContent",n._url),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const f of l){const p=Object.assign({},f);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const h=p.request;h.systemInstruction=g,p.request=h}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){return"string"==typeof t?t.startsWith("gs://")?t:void 0:!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0?t.gcsUri[0]:void 0}getBigqueryUri(t){return"string"==typeof t?t.startsWith("bq://")?t:void 0:Array.isArray(t)?void 0:t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),void 0===o.dest){const i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)o.dest=i.endsWith(".jsonl")?`${i.slice(0,-6)}/dest`:`${i}_dest_${r}`;else{if(!s)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");o.dest=`${s}_dest_${r}`}}return o}createInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=JV(n.apiClient,t);return l=N("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>Gd(p))}{const f=VE(n.apiClient,t);return l=N("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Aa(p))}})()}createEmbeddingsInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function KV(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["src"]);null!=r&&d(n,["batch","inputConfig"],function n1(e,t){const n={},o=u(t,["fileName"]);null!=o&&d(n,["file_name"],o);const r=u(t,["inlinedRequests"]);return null!=r&&d(n,["requests"],function e1(e,t){const n={},o=u(t,["contents"]);if(null!=o){let i=Od(e,o);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["requests[]","request","content"],i)}const r=u(t,["config"]);return null!=r&&(d(n,["_self"],function t1(e,t){const o=u(e,["taskType"]);void 0!==t&&null!=o&&d(t,["requests[]","taskType"],o);const r=u(e,["title"]);void 0!==t&&null!=r&&d(t,["requests[]","title"],r);const i=u(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&d(t,["requests[]","outputDimensionality"],i),void 0!==u(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==u(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,n)),function fL(e,t){for(const[n,o]of Object.entries(t)){const r=n.split("."),i=o.split("."),s=new Set;let a=-1;for(let l=0;l<r.length;l++)if("*"===r[l]){a=l;break}if(-1!==a&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];"*"!==c&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}xd(e,r,i,0,s)}}(n,{"requests[].*":"requests[].request.*"})),n}(e,r)),n}(e,r));const i=u(t,["config"]);return null!=i&&function YV(e,t){const o=u(e,["displayName"]);void 0!==t&&null!=o&&d(t,["batch","displayName"],o)}(i,n),n}(n.apiClient,t);return s=N("{model}:asyncBatchEmbedContent",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Aa(c))}})()}get(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function a1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);return l=N("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>Gd(p))}{const f=function s1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);return l=N("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Aa(p))}})()}cancel(t){var n=this;return T(function*(){var o,r,i,s;let a="",l={};if(n.apiClient.isVertexAI()){const c=function GV(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);a=N("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,yield n.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal})}else{const c=function HV(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);a=N("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,yield n.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal})}})()}listInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function g1(e){const t={},n=u(e,["config"]);return null!=n&&function p1(e,t){const o=u(e,["pageSize"]);void 0!==t&&null!=o&&d(t,["_query","pageSize"],o);const r=u(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r);const i=u(e,["filter"]);void 0!==t&&null!=i&&d(t,["_query","filter"],i)}(n,t),t}(t);return l=N("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function y1(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["batchPredictionJobs"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>Gd(s))),d(t,["batchJobs"],i)}return t}(p),h=new CE;return Object.assign(h,g),h})}{const f=function h1(e){const t={},n=u(e,["config"]);return null!=n&&function f1(e,t){const o=u(e,["pageSize"]);void 0!==t&&null!=o&&d(t,["_query","pageSize"],o);const r=u(e,["pageToken"]);if(void 0!==t&&null!=r&&d(t,["_query","pageToken"],r),void 0!==u(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}(t);return l=N("batches",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function m1(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["operations"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>Aa(s))),d(t,["batchJobs"],i)}return t}(p),h=new CE;return Object.assign(h,g),h})}})()}delete(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function QV(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);return l=N("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>function jV(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["name"]);null!=o&&d(t,["name"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);return null!=i&&d(t,["error"],i),t}(p))}{const f=function ZV(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],jo(e,o)),n}(n.apiClient,t);return l=N("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>function XV(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["name"]);null!=o&&d(t,["name"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);return null!=i&&d(t,["error"],i),t}(p))}})()}}function OE(e){const t={},n=u(e,["parts"]);if(null!=n){let r=n;Array.isArray(r)&&(r=r.map(i=>function $1(e){const t={},n=u(e,["videoMetadata"]);null!=n&&d(t,["videoMetadata"],n);const o=u(e,["thought"]);null!=o&&d(t,["thought"],o);const r=u(e,["inlineData"]);null!=r&&d(t,["inlineData"],function D1(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);null!=n&&d(t,["data"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(r));const i=u(e,["fileData"]);null!=i&&d(t,["fileData"],function b1(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(i));const s=u(e,["thoughtSignature"]);null!=s&&d(t,["thoughtSignature"],s);const a=u(e,["functionCall"]);null!=a&&d(t,["functionCall"],a);const l=u(e,["codeExecutionResult"]);null!=l&&d(t,["codeExecutionResult"],l);const c=u(e,["executableCode"]);null!=c&&d(t,["executableCode"],c);const f=u(e,["functionResponse"]);null!=f&&d(t,["functionResponse"],f);const p=u(e,["text"]);return null!=p&&d(t,["text"],p),t}(i))),d(t,["parts"],r)}const o=u(e,["role"]);return null!=o&&d(t,["role"],o),t}class Z1 extends Xn{constructor(t){var n;super(),n=this,this.apiClient=t,this.list=T(function*(o={}){return new hi(er.PAGED_ITEM_CACHED_CONTENTS,r=>n.listInternal(r),yield n.listInternal(o),o)})}create(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function S1(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["model"],EE(e,o));const r=u(t,["config"]);return null!=r&&function T1(e,t){const o=u(e,["ttl"]);void 0!==t&&null!=o&&d(t,["ttl"],o);const r=u(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r);const i=u(e,["displayName"]);void 0!==t&&null!=i&&d(t,["displayName"],i);const s=u(e,["contents"]);if(void 0!==t&&null!=s){let p=Ct(s);Array.isArray(p)&&(p=p.map(g=>g)),d(t,["contents"],p)}const a=u(e,["systemInstruction"]);void 0!==t&&null!=a&&d(t,["systemInstruction"],Be(a));const l=u(e,["tools"]);if(void 0!==t&&null!=l){let p=l;Array.isArray(p)&&(p=p.map(g=>function z1(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let p=n;Array.isArray(p)&&(p=p.map(g=>function P1(e){const t={};if(void 0!==u(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);null!=n&&d(t,["description"],n);const o=u(e,["name"]);null!=o&&d(t,["name"],o);const r=u(e,["parameters"]);null!=r&&d(t,["parameters"],r);const i=u(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=u(e,["response"]);null!=s&&d(t,["response"],s);const a=u(e,["responseJsonSchema"]);return null!=a&&d(t,["responseJsonSchema"],a),t}(g))),d(t,["functionDeclarations"],p)}const o=u(e,["retrieval"]);null!=o&&d(t,["retrieval"],o);const r=u(e,["googleSearch"]);null!=r&&d(t,["googleSearch"],r);const i=u(e,["googleSearchRetrieval"]);null!=i&&d(t,["googleSearchRetrieval"],i);const s=u(e,["enterpriseWebSearch"]);null!=s&&d(t,["enterpriseWebSearch"],s);const a=u(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],a);const l=u(e,["urlContext"]);null!=l&&d(t,["urlContext"],l);const c=u(e,["computerUse"]);null!=c&&d(t,["computerUse"],c);const f=u(e,["codeExecution"]);return null!=f&&d(t,["codeExecution"],f),t}(g))),d(t,["tools"],p)}const c=u(e,["toolConfig"]);void 0!==t&&null!=c&&d(t,["toolConfig"],c);const f=u(e,["kmsKeyName"]);return void 0!==t&&null!=f&&d(t,["encryption_spec","kmsKeyName"],f),{}}(r,n),n}(n.apiClient,t);return l=N("cachedContents",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}{const f=function w1(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["model"],EE(e,o));const r=u(t,["config"]);return null!=r&&function I1(e,t){const o=u(e,["ttl"]);void 0!==t&&null!=o&&d(t,["ttl"],o);const r=u(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r);const i=u(e,["displayName"]);void 0!==t&&null!=i&&d(t,["displayName"],i);const s=u(e,["contents"]);if(void 0!==t&&null!=s){let f=Ct(s);Array.isArray(f)&&(f=f.map(p=>OE(p))),d(t,["contents"],f)}const a=u(e,["systemInstruction"]);void 0!==t&&null!=a&&d(t,["systemInstruction"],OE(Be(a)));const l=u(e,["tools"]);if(void 0!==t&&null!=l){let f=l;Array.isArray(f)&&(f=f.map(p=>function q1(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let c=n;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["functionDeclarations"],c)}if(void 0!==u(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);null!=o&&d(t,["googleSearch"],function L1(e){const t={},n=u(e,["timeRangeFilter"]);if(null!=n&&d(t,["timeRangeFilter"],n),void 0!==u(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}(o));const r=u(e,["googleSearchRetrieval"]);if(null!=r&&d(t,["googleSearchRetrieval"],r),void 0!==u(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(e,["googleMaps"]);null!=i&&d(t,["googleMaps"],function k1(e){const t={};if(void 0!==u(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(i));const s=u(e,["urlContext"]);null!=s&&d(t,["urlContext"],s);const a=u(e,["computerUse"]);null!=a&&d(t,["computerUse"],a);const l=u(e,["codeExecution"]);return null!=l&&d(t,["codeExecution"],l),t}(p))),d(t,["tools"],f)}const c=u(e,["toolConfig"]);if(void 0!==t&&null!=c&&d(t,["toolConfig"],c),void 0!==u(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}(r,n),n}(n.apiClient,t);return l=N("cachedContents",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}})()}get(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function F1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],dn(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}{const f=function x1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],dn(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}})()}delete(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function A1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],dn(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function R1(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(p),h=new vE;return Object.assign(h,g),h})}{const f=function M1(e,t){const n={},o=u(t,["name"]);return null!=o&&d(n,["_url","name"],dn(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function N1(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(p),h=new vE;return Object.assign(h,g),h})}})()}update(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function K1(e,t){const n={},o=u(t,["name"]);null!=o&&d(n,["_url","name"],dn(e,o));const r=u(t,["config"]);return null!=r&&function J1(e,t){const o=u(e,["ttl"]);void 0!==t&&null!=o&&d(t,["ttl"],o);const r=u(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r)}(r,n),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}{const f=function Y1(e,t){const n={},o=u(t,["name"]);null!=o&&d(n,["_url","name"],dn(e,o));const r=u(t,["config"]);return null!=r&&function W1(e,t){const o=u(e,["ttl"]);void 0!==t&&null!=o&&d(t,["ttl"],o);const r=u(e,["expireTime"]);void 0!==t&&null!=r&&d(t,["expireTime"],r)}(r,n),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}})()}listInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function B1(e){const t={},n=u(e,["config"]);return null!=n&&function O1(e,t){const o=u(e,["pageSize"]);void 0!==t&&null!=o&&d(t,["_query","pageSize"],o);const r=u(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}(t);return l=N("cachedContents",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function G1(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["cachedContents"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}(p),h=new _E;return Object.assign(h,g),h})}{const f=function U1(e){const t={},n=u(e,["config"]);return null!=n&&function V1(e,t){const o=u(e,["pageSize"]);void 0!==t&&null!=o&&d(t,["_query","pageSize"],o);const r=u(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}(t);return l=N("cachedContents",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function H1(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["cachedContents"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}(p),h=new _E;return Object.assign(h,g),h})}})()}}function de(e){return this instanceof de?(this.v=e,this):new de(e)}function tr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(m){return Promise.resolve(m).then(h,p)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,m){o[h]&&(r[h]=function(y){return new Promise(function(_,C){i.push([h,y,_,C])>1||l(h,y)})},m&&(r[h]=m(r[h])))}function l(h,m){try{!function c(h){h.value instanceof de?Promise.resolve(h.value.v).then(f,p):g(i[0][2],h)}(o[h](m))}catch(y){g(i[0][3],y)}}function f(h){l("next",h)}function p(h){l("throw",h)}function g(h,m){h(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function gi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function UE(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){!function r(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}(a,l,(s=e[i](s)).done,s.value)})}}}function Q1(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&BE(n)}function BE(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function HE(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let o=0;for(;o<n;)if("user"===e[o].role)t.push(e[o]),o++;else{const r=[];let i=!0;for(;o<n&&"model"===e[o].role;)r.push(e[o]),i&&!BE(e[o])&&(i=!1),o++;i?t.push(...r):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class j1{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new eO(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class eO{constructor(t,n,o,r={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),function X1(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}(i)}sendMessage(t){var n=this;return T(function*(){var o;yield n.sendPromise;const r=Be(t.message),i=n.modelsModule.generateContent({model:n.model,contents:n.getHistory(!0).concat(r),config:null!==(o=t.config)&&void 0!==o?o:n.config});return n.sendPromise=T(function*(){var s,a,l;const c=yield i,f=null===(a=null===(s=c.candidates)||void 0===s?void 0:s[0])||void 0===a?void 0:a.content,p=c.automaticFunctionCallingHistory,g=n.getHistory(!0).length;let h=[];null!=p&&(h=null!==(l=p.slice(g))&&void 0!==l?l:[]),n.recordHistory(r,f?[f]:[],h)})(),yield n.sendPromise.catch(()=>{n.sendPromise=Promise.resolve()}),i})()}sendMessageStream(t){var n=this;return T(function*(){var o;yield n.sendPromise;const r=Be(t.message),i=n.modelsModule.generateContentStream({model:n.model,contents:n.getHistory(!0).concat(r),config:null!==(o=t.config)&&void 0!==o?o:n.config});n.sendPromise=i.then(()=>{}).catch(()=>{});const s=yield i;return n.processStreamResponse(s,r)})()}getHistory(t=!1){const n=t?HE(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var o,r;return tr(this,arguments,function*(){var s,a,l;const f=[];try{for(var h,p=!0,g=gi(t);!(s=(h=yield de(g.next())).done);p=!0){p=!1;const m=h.value;if(Q1(m)){const y=null===(r=null===(o=m.candidates)||void 0===o?void 0:o[0])||void 0===r?void 0:r.content;void 0!==y&&f.push(y)}yield yield de(m)}}catch(m){a={error:m}}finally{try{!p&&!s&&(l=g.return)&&(yield de(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(t,n,o){let r=[];n.length>0&&n.every(i=>void 0!==i.role)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...HE(o)):this.history.push(t),this.history.push(...r)}}class Na extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Na.prototype)}}class uO extends Xn{constructor(t){var n;super(),n=this,this.apiClient=t,this.list=T(function*(o={}){return new hi(er.PAGED_ITEM_FILES,r=>n.listInternal(r),yield n.listInternal(o),o)})}upload(t){var n=this;return T(function*(){if(n.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return n.apiClient.uploadFile(t.file,t.config).then(o=>o)})()}download(t){var n=this;return T(function*(){yield n.apiClient.downloadFile(t)})()}listInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function aO(e){const t={},n=u(e,["config"]);return null!=n&&function sO(e,t){const o=u(e,["pageSize"]);void 0!==t&&null!=o&&d(t,["_query","pageSize"],o);const r=u(e,["pageToken"]);void 0!==t&&null!=r&&d(t,["_query","pageToken"],r)}(n,t),t}(t);return s=N("files",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const f=function lO(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["files"]);if(null!=r){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["files"],i)}return t}(c),p=new CV;return Object.assign(p,f),p})}})()}createInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function tO(e){const t={},n=u(e,["file"]);return null!=n&&d(t,["file"],n),t}(t);return s=N("upload/v1beta/files",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=function nO(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(c),p=new EV;return Object.assign(p,f),p})}})()}get(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function iO(e){const t={},n=u(e,["name"]);return null!=n&&d(t,["_url","file"],RE(n)),t}(t);return s=N("files/{file}",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}})()}delete(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function oO(e){const t={},n=u(e,["name"]);return null!=n&&d(t,["_url","file"],RE(n)),t}(t);return s=N("files/{file}",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const f=function rO(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(c),p=new DV;return Object.assign(p,f),p})}})()}}function Ra(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);null!=n&&d(t,["data"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}function mO(e,t){const o=u(e,["generationConfig"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig"],o);const r=u(e,["responseModalities"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig","responseModalities"],r);const i=u(e,["temperature"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","temperature"],i);const s=u(e,["topP"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topP"],s);const a=u(e,["topK"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","topK"],a);const l=u(e,["maxOutputTokens"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","mediaResolution"],c);const f=u(e,["seed"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","seed"],f);const p=u(e,["speechConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","speechConfig"],Hd(p));const g=u(e,["thinkingConfig"]);void 0!==t&&null!=g&&d(t,["setup","generationConfig","thinkingConfig"],g);const h=u(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&d(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=u(e,["systemInstruction"]);void 0!==t&&null!=m&&d(t,["setup","systemInstruction"],function cO(e){const t={},n=u(e,["parts"]);if(null!=n){let r=n;Array.isArray(r)&&(r=r.map(i=>function wO(e){const t={},n=u(e,["videoMetadata"]);null!=n&&d(t,["videoMetadata"],n);const o=u(e,["thought"]);null!=o&&d(t,["thought"],o);const r=u(e,["inlineData"]);null!=r&&d(t,["inlineData"],Ra(r));const i=u(e,["fileData"]);null!=i&&d(t,["fileData"],function dO(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(i));const s=u(e,["thoughtSignature"]);null!=s&&d(t,["thoughtSignature"],s);const a=u(e,["functionCall"]);null!=a&&d(t,["functionCall"],a);const l=u(e,["codeExecutionResult"]);null!=l&&d(t,["codeExecutionResult"],l);const c=u(e,["executableCode"]);null!=c&&d(t,["executableCode"],c);const f=u(e,["functionResponse"]);null!=f&&d(t,["functionResponse"],f);const p=u(e,["text"]);return null!=p&&d(t,["text"],p),t}(i))),d(t,["parts"],r)}const o=u(e,["role"]);return null!=o&&d(t,["role"],o),t}(Be(m)));const y=u(e,["tools"]);if(void 0!==t&&null!=y){let R=Xo(y);Array.isArray(R)&&(R=R.map(G=>function MO(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let c=n;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["functionDeclarations"],c)}if(void 0!==u(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);null!=o&&d(t,["googleSearch"],function gO(e){const t={},n=u(e,["timeRangeFilter"]);if(null!=n&&d(t,["timeRangeFilter"],n),void 0!==u(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}(o));const r=u(e,["googleSearchRetrieval"]);if(null!=r&&d(t,["googleSearchRetrieval"],r),void 0!==u(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(e,["googleMaps"]);null!=i&&d(t,["googleMaps"],function hO(e){const t={};if(void 0!==u(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(i));const s=u(e,["urlContext"]);null!=s&&d(t,["urlContext"],s);const a=u(e,["computerUse"]);null!=a&&d(t,["computerUse"],a);const l=u(e,["codeExecution"]);return null!=l&&d(t,["codeExecution"],l),t}(Qo(G)))),d(t,["setup","tools"],R)}const _=u(e,["sessionResumption"]);void 0!==t&&null!=_&&d(t,["setup","sessionResumption"],function SO(e){const t={},n=u(e,["handle"]);if(null!=n&&d(t,["handle"],n),void 0!==u(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(_));const C=u(e,["inputAudioTranscription"]);void 0!==t&&null!=C&&d(t,["setup","inputAudioTranscription"],C);const v=u(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&d(t,["setup","outputAudioTranscription"],v);const E=u(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&d(t,["setup","realtimeInputConfig"],E);const I=u(e,["contextWindowCompression"]);void 0!==t&&null!=I&&d(t,["setup","contextWindowCompression"],I);const M=u(e,["proactivity"]);return void 0!==t&&null!=M&&d(t,["setup","proactivity"],M),{}}function DO(e){const t={},n=u(e,["media"]);if(null!=n){let c=DE(n);Array.isArray(c)&&(c=c.map(f=>Ra(f))),d(t,["mediaChunks"],c)}const o=u(e,["audio"]);null!=o&&d(t,["audio"],Ra(TE(o)));const r=u(e,["audioStreamEnd"]);null!=r&&d(t,["audioStreamEnd"],r);const i=u(e,["video"]);null!=i&&d(t,["video"],Ra(IE(i)));const s=u(e,["text"]);null!=s&&d(t,["text"],s);const a=u(e,["activityStart"]);null!=a&&d(t,["activityStart"],a);const l=u(e,["activityEnd"]);return null!=l&&d(t,["activityEnd"],l),t}function IO(e){const t={},n=u(e,["media"]);if(null!=n){let c=DE(n);Array.isArray(c)&&(c=c.map(f=>f)),d(t,["mediaChunks"],c)}const o=u(e,["audio"]);null!=o&&d(t,["audio"],TE(o));const r=u(e,["audioStreamEnd"]);null!=r&&d(t,["audioStreamEnd"],r);const i=u(e,["video"]);null!=i&&d(t,["video"],IE(i));const s=u(e,["text"]);null!=s&&d(t,["text"],s);const a=u(e,["activityStart"]);null!=a&&d(t,["activityStart"],a);const l=u(e,["activityEnd"]);return null!=l&&d(t,["activityEnd"],l),t}function GE(e){const t={},n=u(e,["voiceConfig"]);if(null!=n&&d(t,["voiceConfig"],n),void 0!==u(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=u(e,["languageCode"]);return null!=o&&d(t,["languageCode"],o),t}function ba(e){const t={},n=u(e,["parts"]);if(null!=n){let r=n;Array.isArray(r)&&(r=r.map(i=>function HU(e){const t={},n=u(e,["videoMetadata"]);null!=n&&d(t,["videoMetadata"],n);const o=u(e,["thought"]);null!=o&&d(t,["thought"],o);const r=u(e,["inlineData"]);null!=r&&d(t,["inlineData"],function RO(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);null!=n&&d(t,["data"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(r));const i=u(e,["fileData"]);null!=i&&d(t,["fileData"],function rU(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(i));const s=u(e,["thoughtSignature"]);null!=s&&d(t,["thoughtSignature"],s);const a=u(e,["functionCall"]);null!=a&&d(t,["functionCall"],a);const l=u(e,["codeExecutionResult"]);null!=l&&d(t,["codeExecutionResult"],l);const c=u(e,["executableCode"]);null!=c&&d(t,["executableCode"],c);const f=u(e,["functionResponse"]);null!=f&&d(t,["functionResponse"],f);const p=u(e,["text"]);return null!=p&&d(t,["text"],p),t}(i))),d(t,["parts"],r)}const o=u(e,["role"]);return null!=o&&d(t,["role"],o),t}function $E(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let s=Ct(r);Array.isArray(s)&&(s=s.map(a=>ba(a))),d(n,["contents"],s)}const i=u(t,["config"]);return null!=i&&d(n,["generationConfig"],function sU(e,t,n){const o={},r=u(t,["systemInstruction"]);void 0!==n&&null!=r&&d(n,["systemInstruction"],ba(Be(r)));const i=u(t,["temperature"]);null!=i&&d(o,["temperature"],i);const s=u(t,["topP"]);null!=s&&d(o,["topP"],s);const a=u(t,["topK"]);null!=a&&d(o,["topK"],a);const l=u(t,["candidateCount"]);null!=l&&d(o,["candidateCount"],l);const c=u(t,["maxOutputTokens"]);null!=c&&d(o,["maxOutputTokens"],c);const f=u(t,["stopSequences"]);null!=f&&d(o,["stopSequences"],f);const p=u(t,["responseLogprobs"]);null!=p&&d(o,["responseLogprobs"],p);const g=u(t,["logprobs"]);null!=g&&d(o,["logprobs"],g);const h=u(t,["presencePenalty"]);null!=h&&d(o,["presencePenalty"],h);const m=u(t,["frequencyPenalty"]);null!=m&&d(o,["frequencyPenalty"],m);const y=u(t,["seed"]);null!=y&&d(o,["seed"],y);const _=u(t,["responseMimeType"]);null!=_&&d(o,["responseMimeType"],_);const C=u(t,["responseSchema"]);null!=C&&d(o,["responseSchema"],Ud(C));const v=u(t,["responseJsonSchema"]);if(null!=v&&d(o,["responseJsonSchema"],v),void 0!==u(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==u(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=u(t,["safetySettings"]);if(void 0!==n&&null!=E){let te=E;Array.isArray(te)&&(te=te.map(Wt=>function YU(e){const t={};if(void 0!==u(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const n=u(e,["category"]);null!=n&&d(t,["category"],n);const o=u(e,["threshold"]);return null!=o&&d(t,["threshold"],o),t}(Wt))),d(n,["safetySettings"],te)}const I=u(t,["tools"]);if(void 0!==n&&null!=I){let te=Xo(I);Array.isArray(te)&&(te=te.map(Wt=>function eB(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let c=n;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["functionDeclarations"],c)}if(void 0!==u(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);null!=o&&d(t,["googleSearch"],function PU(e){const t={},n=u(e,["timeRangeFilter"]);if(null!=n&&d(t,["timeRangeFilter"],n),void 0!==u(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}(o));const r=u(e,["googleSearchRetrieval"]);if(null!=r&&d(t,["googleSearchRetrieval"],r),void 0!==u(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(e,["googleMaps"]);null!=i&&d(t,["googleMaps"],function bU(e){const t={};if(void 0!==u(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(i));const s=u(e,["urlContext"]);null!=s&&d(t,["urlContext"],s);const a=u(e,["computerUse"]);null!=a&&d(t,["computerUse"],a);const l=u(e,["codeExecution"]);return null!=l&&d(t,["codeExecution"],l),t}(Qo(Wt)))),d(n,["tools"],te)}const M=u(t,["toolConfig"]);if(void 0!==n&&null!=M&&d(n,["toolConfig"],M),void 0!==u(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const R=u(t,["cachedContent"]);void 0!==n&&null!=R&&d(n,["cachedContent"],dn(e,R));const G=u(t,["responseModalities"]);null!=G&&d(o,["responseModalities"],G);const ne=u(t,["mediaResolution"]);null!=ne&&d(o,["mediaResolution"],ne);const Te=u(t,["speechConfig"]);if(null!=Te&&d(o,["speechConfig"],Bd(Te)),void 0!==u(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=u(t,["thinkingConfig"]);null!=V&&d(o,["thinkingConfig"],V);const oe=u(t,["imageConfig"]);return null!=oe&&d(o,["imageConfig"],oe),o}(e,i,n)),n}function qE(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let s=Ct(r);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["contents"],s)}const i=u(t,["config"]);return null!=i&&d(n,["generationConfig"],function aU(e,t,n){const o={},r=u(t,["systemInstruction"]);void 0!==n&&null!=r&&d(n,["systemInstruction"],Be(r));const i=u(t,["temperature"]);null!=i&&d(o,["temperature"],i);const s=u(t,["topP"]);null!=s&&d(o,["topP"],s);const a=u(t,["topK"]);null!=a&&d(o,["topK"],a);const l=u(t,["candidateCount"]);null!=l&&d(o,["candidateCount"],l);const c=u(t,["maxOutputTokens"]);null!=c&&d(o,["maxOutputTokens"],c);const f=u(t,["stopSequences"]);null!=f&&d(o,["stopSequences"],f);const p=u(t,["responseLogprobs"]);null!=p&&d(o,["responseLogprobs"],p);const g=u(t,["logprobs"]);null!=g&&d(o,["logprobs"],g);const h=u(t,["presencePenalty"]);null!=h&&d(o,["presencePenalty"],h);const m=u(t,["frequencyPenalty"]);null!=m&&d(o,["frequencyPenalty"],m);const y=u(t,["seed"]);null!=y&&d(o,["seed"],y);const _=u(t,["responseMimeType"]);null!=_&&d(o,["responseMimeType"],_);const C=u(t,["responseSchema"]);null!=C&&d(o,["responseSchema"],Ud(C));const v=u(t,["responseJsonSchema"]);null!=v&&d(o,["responseJsonSchema"],v);const E=u(t,["routingConfig"]);null!=E&&d(o,["routingConfig"],E);const I=u(t,["modelSelectionConfig"]);null!=I&&d(o,["modelConfig"],I);const M=u(t,["safetySettings"]);if(void 0!==n&&null!=M){let fn=M;Array.isArray(fn)&&(fn=fn.map(jd=>jd)),d(n,["safetySettings"],fn)}const R=u(t,["tools"]);if(void 0!==n&&null!=R){let fn=Xo(R);Array.isArray(fn)&&(fn=fn.map(jd=>QE(Qo(jd)))),d(n,["tools"],fn)}const G=u(t,["toolConfig"]);void 0!==n&&null!=G&&d(n,["toolConfig"],G);const ne=u(t,["labels"]);void 0!==n&&null!=ne&&d(n,["labels"],ne);const Te=u(t,["cachedContent"]);void 0!==n&&null!=Te&&d(n,["cachedContent"],dn(e,Te));const V=u(t,["responseModalities"]);null!=V&&d(o,["responseModalities"],V);const oe=u(t,["mediaResolution"]);null!=oe&&d(o,["mediaResolution"],oe);const te=u(t,["speechConfig"]);null!=te&&d(o,["speechConfig"],ZE(Bd(te)));const Wt=u(t,["audioTimestamp"]);null!=Wt&&d(o,["audioTimestamp"],Wt);const pD=u(t,["thinkingConfig"]);null!=pD&&d(o,["thinkingConfig"],pD);const hD=u(t,["imageConfig"]);return null!=hD&&d(o,["imageConfig"],hD),o}(e,i,n)),n}function zE(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["candidates"]);if(null!=o){let l=o;Array.isArray(l)&&(l=l.map(c=>function bO(e){const t={},n=u(e,["content"]);null!=n&&d(t,["content"],n);const o=u(e,["citationMetadata"]);null!=o&&d(t,["citationMetadata"],function PO(e){const t={},n=u(e,["citationSources"]);if(null!=n){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["citations"],o)}return t}(o));const r=u(e,["tokenCount"]);null!=r&&d(t,["tokenCount"],r);const i=u(e,["finishReason"]);null!=i&&d(t,["finishReason"],i);const s=u(e,["urlContextMetadata"]);null!=s&&d(t,["urlContextMetadata"],s);const a=u(e,["avgLogprobs"]);null!=a&&d(t,["avgLogprobs"],a);const l=u(e,["groundingMetadata"]);null!=l&&d(t,["groundingMetadata"],l);const c=u(e,["index"]);null!=c&&d(t,["index"],c);const f=u(e,["logprobsResult"]);null!=f&&d(t,["logprobsResult"],f);const p=u(e,["safetyRatings"]);if(null!=p){let g=p;Array.isArray(g)&&(g=g.map(h=>h)),d(t,["safetyRatings"],g)}return t}(c))),d(t,["candidates"],l)}const r=u(e,["modelVersion"]);null!=r&&d(t,["modelVersion"],r);const i=u(e,["promptFeedback"]);null!=i&&d(t,["promptFeedback"],i);const s=u(e,["responseId"]);null!=s&&d(t,["responseId"],s);const a=u(e,["usageMetadata"]);return null!=a&&d(t,["usageMetadata"],a),t}function WE(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["candidates"]);if(null!=o){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["candidates"],c)}const r=u(e,["createTime"]);null!=r&&d(t,["createTime"],r);const i=u(e,["modelVersion"]);null!=i&&d(t,["modelVersion"],i);const s=u(e,["promptFeedback"]);null!=s&&d(t,["promptFeedback"],s);const a=u(e,["responseId"]);null!=a&&d(t,["responseId"],a);const l=u(e,["usageMetadata"]);return null!=l&&d(t,["usageMetadata"],l),t}function vU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["prompt"]);null!=r&&d(n,["instances[0]","prompt"],r);const i=u(t,["image"]);null!=i&&d(n,["instances[0]","image"],xa(i));const s=u(t,["video"]);null!=s&&d(n,["instances[0]","video"],XE(s));const a=u(t,["source"]);null!=a&&function DU(e,t){const o=u(e,["prompt"]);void 0!==t&&null!=o&&d(t,["instances[0]","prompt"],o);const r=u(e,["image"]);void 0!==t&&null!=r&&d(t,["instances[0]","image"],xa(r));const i=u(e,["video"]);void 0!==t&&null!=i&&d(t,["instances[0]","video"],XE(i))}(a,n);const l=u(t,["config"]);return null!=l&&function hU(e,t){const o=u(e,["numberOfVideos"]);if(void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o),void 0!==u(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==u(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=u(e,["durationSeconds"]);if(void 0!==t&&null!=r&&d(t,["parameters","durationSeconds"],r),void 0!==u(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=u(e,["aspectRatio"]);void 0!==t&&null!=i&&d(t,["parameters","aspectRatio"],i);const s=u(e,["resolution"]);void 0!==t&&null!=s&&d(t,["parameters","resolution"],s);const a=u(e,["personGeneration"]);if(void 0!==t&&null!=a&&d(t,["parameters","personGeneration"],a),void 0!==u(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(e,["negativePrompt"]);void 0!==t&&null!=l&&d(t,["parameters","negativePrompt"],l);const c=u(e,["enhancePrompt"]);if(void 0!==t&&null!=c&&d(t,["parameters","enhancePrompt"],c),void 0!==u(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const f=u(e,["lastFrame"]);void 0!==t&&null!=f&&d(t,["instances[0]","lastFrame"],xa(f));const p=u(e,["referenceImages"]);if(void 0!==t&&null!=p){let g=p;Array.isArray(g)&&(g=g.map(h=>function pB(e){const t={},n=u(e,["image"]);null!=n&&d(t,["image"],xa(n));const o=u(e,["referenceType"]);return null!=o&&d(t,["referenceType"],o),t}(h))),d(t,["instances[0]","referenceImages"],g)}if(void 0!==u(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==u(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}(l,n),n}function _U(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["prompt"]);null!=r&&d(n,["instances[0]","prompt"],r);const i=u(t,["image"]);null!=i&&d(n,["instances[0]","image"],bt(i));const s=u(t,["video"]);null!=s&&d(n,["instances[0]","video"],jE(s));const a=u(t,["source"]);null!=a&&function IU(e,t){const o=u(e,["prompt"]);void 0!==t&&null!=o&&d(t,["instances[0]","prompt"],o);const r=u(e,["image"]);void 0!==t&&null!=r&&d(t,["instances[0]","image"],bt(r));const i=u(e,["video"]);void 0!==t&&null!=i&&d(t,["instances[0]","video"],jE(i))}(a,n);const l=u(t,["config"]);return null!=l&&function gU(e,t){const o=u(e,["numberOfVideos"]);void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o);const r=u(e,["outputGcsUri"]);void 0!==t&&null!=r&&d(t,["parameters","storageUri"],r);const i=u(e,["fps"]);void 0!==t&&null!=i&&d(t,["parameters","fps"],i);const s=u(e,["durationSeconds"]);void 0!==t&&null!=s&&d(t,["parameters","durationSeconds"],s);const a=u(e,["seed"]);void 0!==t&&null!=a&&d(t,["parameters","seed"],a);const l=u(e,["aspectRatio"]);void 0!==t&&null!=l&&d(t,["parameters","aspectRatio"],l);const c=u(e,["resolution"]);void 0!==t&&null!=c&&d(t,["parameters","resolution"],c);const f=u(e,["personGeneration"]);void 0!==t&&null!=f&&d(t,["parameters","personGeneration"],f);const p=u(e,["pubsubTopic"]);void 0!==t&&null!=p&&d(t,["parameters","pubsubTopic"],p);const g=u(e,["negativePrompt"]);void 0!==t&&null!=g&&d(t,["parameters","negativePrompt"],g);const h=u(e,["enhancePrompt"]);void 0!==t&&null!=h&&d(t,["parameters","enhancePrompt"],h);const m=u(e,["generateAudio"]);void 0!==t&&null!=m&&d(t,["parameters","generateAudio"],m);const y=u(e,["lastFrame"]);void 0!==t&&null!=y&&d(t,["instances[0]","lastFrame"],bt(y));const _=u(e,["referenceImages"]);if(void 0!==t&&null!=_){let E=_;Array.isArray(E)&&(E=E.map(I=>function hB(e){const t={},n=u(e,["image"]);null!=n&&d(t,["image"],bt(n));const o=u(e,["referenceType"]);return null!=o&&d(t,["referenceType"],o),t}(I))),d(t,["instances[0]","referenceImages"],E)}const C=u(e,["mask"]);void 0!==t&&null!=C&&d(t,["instances[0]","mask"],function fB(e){const t={},n=u(e,["image"]);null!=n&&d(t,["_self"],bt(n));const o=u(e,["maskMode"]);return null!=o&&d(t,["maskMode"],o),t}(C));const v=u(e,["compressionQuality"]);return void 0!==t&&null!=v&&d(t,["parameters","compressionQuality"],v),{}}(l,n),n}function Pa(e){const t={},n=u(e,["_self"]);null!=n&&d(t,["image"],JE(n));const o=u(e,["raiFilteredReason"]);null!=o&&d(t,["raiFilteredReason"],o);const r=u(e,["_self"]);null!=r&&d(t,["safetyAttributes"],KE(r));const i=u(e,["prompt"]);return null!=i&&d(t,["enhancedPrompt"],i),t}function JE(e){const t={},n=u(e,["gcsUri"]);null!=n&&d(t,["gcsUri"],n);const o=u(e,["bytesBase64Encoded"]);null!=o&&d(t,["imageBytes"],Pn(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}function xa(e){const t={};if(void 0!==u(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(e,["imageBytes"]);null!=n&&d(t,["bytesBase64Encoded"],Pn(n));const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}function bt(e){const t={},n=u(e,["gcsUri"]);null!=n&&d(t,["gcsUri"],n);const o=u(e,["imageBytes"]);null!=o&&d(t,["bytesBase64Encoded"],Pn(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}function $d(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["displayName"]);null!=o&&d(t,["displayName"],o);const r=u(e,["description"]);null!=r&&d(t,["description"],r);const i=u(e,["version"]);null!=i&&d(t,["version"],i);const s=u(e,["_self"]);null!=s&&d(t,["tunedModelInfo"],function tB(e){const t={},n=u(e,["baseModel"]);null!=n&&d(t,["baseModel"],n);const o=u(e,["createTime"]);null!=o&&d(t,["createTime"],o);const r=u(e,["updateTime"]);return null!=r&&d(t,["updateTime"],r),t}(s));const a=u(e,["inputTokenLimit"]);null!=a&&d(t,["inputTokenLimit"],a);const l=u(e,["outputTokenLimit"]);null!=l&&d(t,["outputTokenLimit"],l);const c=u(e,["supportedGenerationMethods"]);return null!=c&&d(t,["supportedActions"],c),t}function qd(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["displayName"]);null!=o&&d(t,["displayName"],o);const r=u(e,["description"]);null!=r&&d(t,["description"],r);const i=u(e,["versionId"]);null!=i&&d(t,["version"],i);const s=u(e,["deployedModels"]);if(null!=s){let p=s;Array.isArray(p)&&(p=p.map(g=>function oU(e){const t={},n=u(e,["endpoint"]);null!=n&&d(t,["name"],n);const o=u(e,["deployedModelId"]);return null!=o&&d(t,["deployedModelId"],o),t}(g))),d(t,["endpoints"],p)}const a=u(e,["labels"]);null!=a&&d(t,["labels"],a);const l=u(e,["_self"]);null!=l&&d(t,["tunedModelInfo"],function nB(e){const t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&d(t,["baseModel"],n);const o=u(e,["createTime"]);null!=o&&d(t,["createTime"],o);const r=u(e,["updateTime"]);return null!=r&&d(t,["updateTime"],r),t}(l));const c=u(e,["defaultCheckpointId"]);null!=c&&d(t,["defaultCheckpointId"],c);const f=u(e,["checkpoints"]);if(null!=f){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),d(t,["checkpoints"],p)}return t}function YE(e){const t={},n=u(e,["safetyAttributes","categories"]);null!=n&&d(t,["categories"],n);const o=u(e,["safetyAttributes","scores"]);null!=o&&d(t,["scores"],o);const r=u(e,["contentType"]);return null!=r&&d(t,["contentType"],r),t}function KE(e){const t={},n=u(e,["safetyAttributes","categories"]);null!=n&&d(t,["categories"],n);const o=u(e,["safetyAttributes","scores"]);null!=o&&d(t,["scores"],o);const r=u(e,["contentType"]);return null!=r&&d(t,["contentType"],r),t}function ZE(e){const t={},n=u(e,["voiceConfig"]);if(null!=n&&d(t,["voiceConfig"],n),void 0!==u(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=u(e,["languageCode"]);return null!=o&&d(t,["languageCode"],o),t}function QE(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let p=n;Array.isArray(p)&&(p=p.map(g=>function iU(e){const t={};if(void 0!==u(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);null!=n&&d(t,["description"],n);const o=u(e,["name"]);null!=o&&d(t,["name"],o);const r=u(e,["parameters"]);null!=r&&d(t,["parameters"],r);const i=u(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=u(e,["response"]);null!=s&&d(t,["response"],s);const a=u(e,["responseJsonSchema"]);return null!=a&&d(t,["responseJsonSchema"],a),t}(g))),d(t,["functionDeclarations"],p)}const o=u(e,["retrieval"]);null!=o&&d(t,["retrieval"],o);const r=u(e,["googleSearch"]);null!=r&&d(t,["googleSearch"],r);const i=u(e,["googleSearchRetrieval"]);null!=i&&d(t,["googleSearchRetrieval"],i);const s=u(e,["enterpriseWebSearch"]);null!=s&&d(t,["enterpriseWebSearch"],s);const a=u(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],a);const l=u(e,["urlContext"]);null!=l&&d(t,["urlContext"],l);const c=u(e,["computerUse"]);null!=c&&d(t,["computerUse"],c);const f=u(e,["codeExecution"]);return null!=f&&d(t,["codeExecution"],f),t}function XE(e){const t={},n=u(e,["uri"]);null!=n&&d(t,["uri"],n);const o=u(e,["videoBytes"]);null!=o&&d(t,["encodedVideo"],Pn(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["encoding"],r),t}function jE(e){const t={},n=u(e,["uri"]);null!=n&&d(t,["gcsUri"],n);const o=u(e,["videoBytes"]);null!=o&&d(t,["bytesBase64Encoded"],Pn(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}const zd="x-goog-api-client",eD=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class EB{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(o=this.clientOptions.apiVersion)&&void 0!==o?o:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var t;return null!==(t=this.clientOptions.vertexai)&&void 0!==t&&t}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||void 0===t.baseUrl||void 0===t.apiVersion)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&""!==t.apiVersion&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol="http:"==n.protocol?"ws":"wss",n.toString()}setBaseUrl(t){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=t}constructUrl(t,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),""!==t&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||"GET"===t.httpMethod&&t.path.startsWith("publishers/google/models"))}request(t){var n=this;return T(function*(){let o=n.clientOptions.httpOptions;t.httpOptions&&(o=n.patchHttpOptions(n.clientOptions.httpOptions,t.httpOptions));const r=n.shouldPrependVertexProjectPath(t),i=n.constructUrl(t.path,o,r);if(t.queryParams)for(const[a,l]of Object.entries(t.queryParams))i.searchParams.append(a,String(l));let s={};if("GET"===t.httpMethod){if(t.body&&"{}"!==t.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=yield n.includeExtraHttpOptionsToRequestInit(s,o,i.toString(),t.abortSignal),n.unaryApiCall(i,s,t.httpMethod)})()}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[r,i]of Object.entries(n))"object"==typeof i?o[r]=Object.assign(Object.assign({},o[r]),i):void 0!==i&&(o[r]=i);return o}requestStream(t){var n=this;return T(function*(){let o=n.clientOptions.httpOptions;t.httpOptions&&(o=n.patchHttpOptions(n.clientOptions.httpOptions,t.httpOptions));const r=n.shouldPrependVertexProjectPath(t),i=n.constructUrl(t.path,o,r);(!i.searchParams.has("alt")||"sse"!==i.searchParams.get("alt"))&&i.searchParams.set("alt","sse");let s={};return s.body=t.body,s=yield n.includeExtraHttpOptionsToRequestInit(s,o,i.toString(),t.abortSignal),n.streamApiCall(i,s,t.httpMethod)})()}includeExtraHttpOptionsToRequestInit(t,n,o,r){var i=this;return T(function*(){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&n?.timeout>0){const l=setTimeout(()=>s.abort(),n.timeout);l&&"function"==typeof l.unref&&l.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),t.signal=a}return n&&null!==n.extraBody&&function DB(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{const i=JSON.parse(e.body);if("object"!=typeof i||null===i||Array.isArray(i))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=i}catch{return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}const r=function o(i,s){const a=Object.assign({},i);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const c=s[l],f=a[l];c&&"object"==typeof c&&!Array.isArray(c)&&f&&"object"==typeof f&&!Array.isArray(f)?a[l]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}(n,t);e.body=JSON.stringify(r)}(t,n.extraBody),t.headers=yield i.getHeadersInternal(n,o),t})()}unaryApiCall(t,n,o){var r=this;return T(function*(){return r.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(function(){var i=T(function*(s){return yield tD(s),new Ld(s)});return function(s){return i.apply(this,arguments)}}()).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})})()}streamApiCall(t,n,o){var r=this;return T(function*(){return r.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(function(){var i=T(function*(s){return yield tD(s),r.processStreamResponse(s)});return function(s){return i.apply(this,arguments)}}()).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})})()}processStreamResponse(t){var n;return tr(this,arguments,function*(){const r=null===(n=t?.body)||void 0===n?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:l}=yield de(r.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),m=g.code,y=`got status: ${g.status}. ${JSON.stringify(p)}`;if(m>=400&&m<600)throw new Na({message:y,status:m})}}catch(p){if("ApiError"===p.name)throw p}s+=c;let f=s.match(eD);for(;f;){const p=f[1];try{const g=new Response(p,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield de(new Ld(g)),s=s.slice(f[0].length),f=s.match(eD)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{r.releaseLock()}})}apiCall(t,n){return T(function*(){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})})()}getDefaultHeaders(){const t={},n="google-genai-sdk/1.27.0 "+this.clientOptions.userAgentExtra;return t["User-Agent"]=n,t[zd]=n,t["Content-Type"]="application/json",t}getHeadersInternal(t,n){var o=this;return T(function*(){const r=new Headers;if(t&&t.headers){for(const[i,s]of Object.entries(t.headers))r.append(i,s);t.timeout&&t.timeout>0&&r.append("X-Server-Timeout",String(Math.ceil(t.timeout/1e3)))}return yield o.clientOptions.auth.addAuthHeaders(r,n),r})()}uploadFile(t,n){var o=this;return T(function*(){var r;const i={};null!=n&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=o.clientOptions.uploader,a=yield s.stat(t);i.sizeBytes=String(a.size);const l=null!==(r=n?.mimeType)&&void 0!==r?r:a.type;if(void 0===l||""===l)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=yield o.fetchUploadUrl(i,n);return s.upload(t,c,o)})()}downloadFile(t){var n=this;return T(function*(){yield n.clientOptions.downloader.download(t,n)})()}fetchUploadUrl(t,n){var o=this;return T(function*(){var r;let i={};i=n?.httpOptions?n.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const s={file:t},a=yield o.request({path:N("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=null===(r=a?.headers)||void 0===r?void 0:r["x-goog-upload-url"];if(void 0===l)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l})()}}function tD(e){return Wd.apply(this,arguments)}function Wd(){return(Wd=T(function*(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;o=null!==(t=e.headers.get("content-type"))&&void 0!==t&&t.includes("application/json")?yield e.json():{error:{message:yield e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Na({message:r,status:n}):new Error(r)}})).apply(this,arguments)}function oD(e){for(const t of e)if(TB(t)||"object"==typeof t&&"inputSchema"in t)return!0;return false}function rD(e){var t;const n=null!==(t=e[zd])&&void 0!==t?t:"";e[zd]=(n+" mcp_used/unknown").trimStart()}function TB(e){return null!==e&&"object"==typeof e&&e instanceof mi}function wB(e,t=100){return tr(this,arguments,function*(){let o,r=0;for(;r<t;){const i=yield de(e.listTools({cursor:o}));for(const s of i.tools)yield yield de(s),r++;if(!i.nextCursor)break;o=i.nextCursor}})}class mi{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new mi(t,n)}initialize(){var t=this;return T(function*(){var n,o,r;if(t.mcpTools.length>0)return;const s={},a=[];for(const p of t.mcpClients)try{for(var f,l=!0,c=(o=void 0,gi(wB(p)));!(n=(f=yield c.next()).done);l=!0){l=!1;const g=f.value;a.push(g);const h=g.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=p}}catch(g){o={error:g}}finally{try{!l&&!n&&(r=c.return)&&(yield r.call(c))}finally{if(o)throw o.error}}t.mcpTools=a,t.functionNameToMcpClient=s})()}tool(){var t=this;return T(function*(){return yield t.initialize(),function PV(e,t={}){const n=[],o=new Set;for(const r of e){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=bV(r,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}(t.mcpTools,t.config)})()}callTool(t){var n=this;return T(function*(){yield n.initialize();const o=[];for(const r of t)if(r.name in n.functionNameToMcpClient){const i=n.functionNameToMcpClient[r.name];let s;n.config.timeout&&(s={timeout:n.config.timeout});const a=yield i.callTool({name:r.name,arguments:r.args},void 0,s);o.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return o})()}}function Jd(){return(Jd=T(function*(e,t,n){const o=new TV;let r;r=n.data instanceof Blob?JSON.parse(yield n.data.text()):JSON.parse(n.data),Object.assign(o,r),t(o)})).apply(this,arguments)}class AB{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}connect(t){var n=this;return T(function*(){var o,r;if(n.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=n.apiClient.getWebsocketBaseUrl(),s=n.apiClient.getApiVersion(),a=function bB(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}(n.apiClient.getDefaultHeaders()),c=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${n.apiClient.getApiKey()}`;let f=()=>{};const p=new Promise(I=>{f=I}),g=t.callbacks,m=n.apiClient,y={onopen:function(){f({})},onmessage:I=>{!function MB(e,t,n){Jd.apply(this,arguments)}(m,g.onmessage,I)},onerror:null!==(o=g?.onerror)&&void 0!==o?o:function(I){},onclose:null!==(r=g?.onclose)&&void 0!==r?r:function(I){}},_=n.webSocketFactory.create(c,function RB(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}(a),y);_.connect(),yield p;const E={setup:{model:Y(n.apiClient,t.model)}};return _.send(JSON.stringify(E)),new NB(_,n.apiClient)})()}}class NB{constructor(t,n){this.conn=t,this.apiClient=n}setWeightedPrompts(t){var n=this;return T(function*(){if(!t.weightedPrompts||0===Object.keys(t.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=function EO(e){const t={},n=u(e,["weightedPrompts"]);if(null!=n){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),d(t,["weightedPrompts"],o)}return t}(t);n.conn.send(JSON.stringify({clientContent:o}))})()}setMusicGenerationConfig(t){var n=this;return T(function*(){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=function CO(e){const t={},n=u(e,["musicGenerationConfig"]);return null!=n&&d(t,["musicGenerationConfig"],n),t}(t);n.conn.send(JSON.stringify(o))})()}sendPlaybackControl(t){this.conn.send(JSON.stringify({playbackControl:t}))}play(){this.sendPlaybackControl(fi.PLAY)}pause(){this.sendPlaybackControl(fi.PAUSE)}stop(){this.sendPlaybackControl(fi.STOP)}resetContext(){this.sendPlaybackControl(fi.RESET_CONTEXT)}close(){this.conn.close()}}function Yd(){return(Yd=T(function*(e,t,n){const o=new IV;let r;r=n.data instanceof Blob?yield n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const i=JSON.parse(r);if(e.isVertexAI()){const s=function TO(e){const t={},n=u(e,["setupComplete"]);null!=n&&d(t,["setupComplete"],n);const o=u(e,["serverContent"]);null!=o&&d(t,["serverContent"],o);const r=u(e,["toolCall"]);null!=r&&d(t,["toolCall"],r);const i=u(e,["toolCallCancellation"]);null!=i&&d(t,["toolCallCancellation"],i);const s=u(e,["usageMetadata"]);null!=s&&d(t,["usageMetadata"],function NO(e){const t={},n=u(e,["promptTokenCount"]);null!=n&&d(t,["promptTokenCount"],n);const o=u(e,["cachedContentTokenCount"]);null!=o&&d(t,["cachedContentTokenCount"],o);const r=u(e,["candidatesTokenCount"]);null!=r&&d(t,["responseTokenCount"],r);const i=u(e,["toolUsePromptTokenCount"]);null!=i&&d(t,["toolUsePromptTokenCount"],i);const s=u(e,["thoughtsTokenCount"]);null!=s&&d(t,["thoughtsTokenCount"],s);const a=u(e,["totalTokenCount"]);null!=a&&d(t,["totalTokenCount"],a);const l=u(e,["promptTokensDetails"]);if(null!=l){let h=l;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["promptTokensDetails"],h)}const c=u(e,["cacheTokensDetails"]);if(null!=c){let h=c;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["cacheTokensDetails"],h)}const f=u(e,["candidatesTokensDetails"]);if(null!=f){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["responseTokensDetails"],h)}const p=u(e,["toolUsePromptTokensDetails"]);if(null!=p){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["toolUsePromptTokensDetails"],h)}const g=u(e,["trafficType"]);return null!=g&&d(t,["trafficType"],g),t}(s));const a=u(e,["goAway"]);null!=a&&d(t,["goAway"],a);const l=u(e,["sessionResumptionUpdate"]);return null!=l&&d(t,["sessionResumptionUpdate"],l),t}(i);Object.assign(o,s)}else Object.assign(o,i);t(o)})).apply(this,arguments)}class FB{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new AB(this.apiClient,this.auth,this.webSocketFactory)}connect(t){var n=this;return T(function*(){var o,r,i,s,a,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=n.apiClient.getWebsocketBaseUrl(),f=n.apiClient.getApiVersion();let p;const g=n.apiClient.getHeaders();t.config&&t.config.tools&&oD(t.config.tools)&&rD(g);const h=function OB(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}(g);if(n.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,yield n.auth.addAuthHeaders(h,p);else{const V=n.apiClient.getApiKey();let oe="BidiGenerateContent",te="key";V?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==f&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),oe="BidiGenerateContentConstrained",te="access_token"),p=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${oe}?${te}=${V}`}let m=()=>{};const y=new Promise(V=>{m=V}),_=t.callbacks,v=n.apiClient,E={onopen:function(){var V;null===(V=_?.onopen)||void 0===V||V.call(_),m({})},onmessage:V=>{!function xB(e,t,n){Yd.apply(this,arguments)}(v,_.onmessage,V)},onerror:null!==(o=_?.onerror)&&void 0!==o?o:function(V){},onclose:null!==(r=_?.onclose)&&void 0!==r?r:function(V){}},I=n.webSocketFactory.create(p,function VB(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}(h),E);I.connect(),yield y;let M=Y(n.apiClient,t.model);n.apiClient.isVertexAI()&&M.startsWith("publishers/")&&(M=`projects/${n.apiClient.getProject()}/locations/${n.apiClient.getLocation()}/`+M);let R={};n.apiClient.isVertexAI()&&void 0===(null===(i=t.config)||void 0===i?void 0:i.responseModalities)&&(void 0===t.config?t.config={responseModalities:[kd.AUDIO]}:t.config.responseModalities=[kd.AUDIO]),null!==(s=t.config)&&void 0!==s&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=null!==(l=null===(a=t.config)||void 0===a?void 0:a.tools)&&void 0!==l?l:[],ne=[];for(const V of G)if(n.isCallableTool(V)){const oe=V;ne.push(yield oe.tool())}else ne.push(V);ne.length>0&&(t.config.tools=ne);const Te={model:M,config:t.config,callbacks:t.callbacks};return R=n.apiClient.isVertexAI()?function _O(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["setup","model"],Y(e,o));const r=u(t,["config"]);return null!=r&&d(n,["config"],function yO(e,t){const o=u(e,["generationConfig"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig"],function pO(e){const t={},n=u(e,["modelSelectionConfig"]);null!=n&&d(t,["modelConfig"],n);const o=u(e,["audioTimestamp"]);null!=o&&d(t,["audioTimestamp"],o);const r=u(e,["candidateCount"]);null!=r&&d(t,["candidateCount"],r);const i=u(e,["enableAffectiveDialog"]);null!=i&&d(t,["enableAffectiveDialog"],i);const s=u(e,["frequencyPenalty"]);null!=s&&d(t,["frequencyPenalty"],s);const a=u(e,["logprobs"]);null!=a&&d(t,["logprobs"],a);const l=u(e,["maxOutputTokens"]);null!=l&&d(t,["maxOutputTokens"],l);const c=u(e,["mediaResolution"]);null!=c&&d(t,["mediaResolution"],c);const f=u(e,["presencePenalty"]);null!=f&&d(t,["presencePenalty"],f);const p=u(e,["responseJsonSchema"]);null!=p&&d(t,["responseJsonSchema"],p);const g=u(e,["responseLogprobs"]);null!=g&&d(t,["responseLogprobs"],g);const h=u(e,["responseMimeType"]);null!=h&&d(t,["responseMimeType"],h);const m=u(e,["responseModalities"]);null!=m&&d(t,["responseModalities"],m);const y=u(e,["responseSchema"]);null!=y&&d(t,["responseSchema"],y);const _=u(e,["routingConfig"]);null!=_&&d(t,["routingConfig"],_);const C=u(e,["seed"]);null!=C&&d(t,["seed"],C);const v=u(e,["speechConfig"]);null!=v&&d(t,["speechConfig"],GE(v));const E=u(e,["stopSequences"]);null!=E&&d(t,["stopSequences"],E);const I=u(e,["temperature"]);null!=I&&d(t,["temperature"],I);const M=u(e,["thinkingConfig"]);null!=M&&d(t,["thinkingConfig"],M);const R=u(e,["topK"]);null!=R&&d(t,["topK"],R);const G=u(e,["topP"]);if(null!=G&&d(t,["topP"],G),void 0!==u(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(o));const r=u(e,["responseModalities"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig","responseModalities"],r);const i=u(e,["temperature"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","temperature"],i);const s=u(e,["topP"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topP"],s);const a=u(e,["topK"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","topK"],a);const l=u(e,["maxOutputTokens"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","mediaResolution"],c);const f=u(e,["seed"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","seed"],f);const p=u(e,["speechConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","speechConfig"],GE(Hd(p)));const g=u(e,["thinkingConfig"]);void 0!==t&&null!=g&&d(t,["setup","generationConfig","thinkingConfig"],g);const h=u(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&d(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=u(e,["systemInstruction"]);void 0!==t&&null!=m&&d(t,["setup","systemInstruction"],Be(m));const y=u(e,["tools"]);if(void 0!==t&&null!=y){let R=Xo(y);Array.isArray(R)&&(R=R.map(G=>function AO(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let p=n;Array.isArray(p)&&(p=p.map(g=>function fO(e){const t={};if(void 0!==u(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(e,["description"]);null!=n&&d(t,["description"],n);const o=u(e,["name"]);null!=o&&d(t,["name"],o);const r=u(e,["parameters"]);null!=r&&d(t,["parameters"],r);const i=u(e,["parametersJsonSchema"]);null!=i&&d(t,["parametersJsonSchema"],i);const s=u(e,["response"]);null!=s&&d(t,["response"],s);const a=u(e,["responseJsonSchema"]);return null!=a&&d(t,["responseJsonSchema"],a),t}(g))),d(t,["functionDeclarations"],p)}const o=u(e,["retrieval"]);null!=o&&d(t,["retrieval"],o);const r=u(e,["googleSearch"]);null!=r&&d(t,["googleSearch"],r);const i=u(e,["googleSearchRetrieval"]);null!=i&&d(t,["googleSearchRetrieval"],i);const s=u(e,["enterpriseWebSearch"]);null!=s&&d(t,["enterpriseWebSearch"],s);const a=u(e,["googleMaps"]);null!=a&&d(t,["googleMaps"],a);const l=u(e,["urlContext"]);null!=l&&d(t,["urlContext"],l);const c=u(e,["computerUse"]);null!=c&&d(t,["computerUse"],c);const f=u(e,["codeExecution"]);return null!=f&&d(t,["codeExecution"],f),t}(Qo(G)))),d(t,["setup","tools"],R)}const _=u(e,["sessionResumption"]);void 0!==t&&null!=_&&d(t,["setup","sessionResumption"],_);const C=u(e,["inputAudioTranscription"]);void 0!==t&&null!=C&&d(t,["setup","inputAudioTranscription"],C);const v=u(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&d(t,["setup","outputAudioTranscription"],v);const E=u(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&d(t,["setup","realtimeInputConfig"],E);const I=u(e,["contextWindowCompression"]);void 0!==t&&null!=I&&d(t,["setup","contextWindowCompression"],I);const M=u(e,["proactivity"]);return void 0!==t&&null!=M&&d(t,["setup","proactivity"],M),{}}(r,n)),n}(n.apiClient,Te):function vO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["setup","model"],Y(e,o));const r=u(t,["config"]);return null!=r&&d(n,["config"],mO(r,n)),n}(n.apiClient,Te),delete R.config,I.send(JSON.stringify(R)),new LB(I,n.apiClient)})()}isCallableTool(t){return"callTool"in t&&"function"==typeof t.callTool}}const kB={turnComplete:!0};class LB{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(null!=n.turns){let o=[];try{o=Ct(n.turns),t.isVertexAI()||(o=o.map(r=>ba(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(null==n.functionResponses)throw new Error("functionResponses is required.");if(o=Array.isArray(n.functionResponses)?n.functionResponses:[n.functionResponses],0===o.length)throw new Error("functionResponses is required.");for(const i of o){if("object"!=typeof i||null===i||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},kB),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};n=this.apiClient.isVertexAI()?{realtimeInput:IO(t)}:{realtimeInput:DO(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(null==t.functionResponses)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sD(e){var t,n,o;if(null!==(t=e?.automaticFunctionCalling)&&void 0!==t&&t.disable)return!0;let r=!1;for(const s of null!==(n=e?.tools)&&void 0!==n?n:[])if(nr(s)){r=!0;break}if(!r)return!0;const i=null===(o=e?.automaticFunctionCalling)||void 0===o?void 0:o.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function nr(e){return"callTool"in e&&"function"==typeof e.callTool}function aD(e){var t;return!(null!==(t=e?.automaticFunctionCalling)&&void 0!==t&&t.ignoreCallHistory)}class HB extends Xn{constructor(t){var n;super(),n=this,this.apiClient=t,this.generateContent=function(){var o=T(function*(r){var i,s,a,l,c;const f=yield n.processParamsMaybeAddMcpUsage(r);if(n.maybeMoveToResponseJsonSchem(r),!function UB(e){var t,n,o;return null!==(o=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(r=>nr(r)))&&void 0!==o&&o}(r)||sD(r.config))return yield n.generateContentInternal(f);if(function BB(e){var t,n,o;return null!==(o=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(r=>!nr(r)))&&void 0!==o&&o}(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,g;const h=Ct(f.contents),m=null!==(a=null===(s=null===(i=f.config)||void 0===i?void 0:i.automaticFunctionCalling)||void 0===s?void 0:s.maximumRemoteCalls)&&void 0!==a?a:10;let y=0;for(;y<m&&(p=yield n.generateContentInternal(f),p.functionCalls&&0!==p.functionCalls.length);){const _=p.candidates[0].content,C=[];for(const v of null!==(c=null===(l=r.config)||void 0===l?void 0:l.tools)&&void 0!==c?c:[])if(nr(v)){const I=yield v.callTool(p.functionCalls);C.push(...I)}y++,g={role:"user",parts:C},f.contents=Ct(f.contents),f.contents.push(_),f.contents.push(g),aD(f.config)&&(h.push(_),h.push(g))}return aD(f.config)&&(p.automaticFunctionCallingHistory=h),p});return function(r){return o.apply(this,arguments)}}(),this.generateContentStream=function(){var o=T(function*(r){if(n.maybeMoveToResponseJsonSchem(r),sD(r.config)){const i=yield n.processParamsMaybeAddMcpUsage(r);return yield n.generateContentStreamInternal(i)}return yield n.processAfcStream(r)});return function(r){return o.apply(this,arguments)}}(),this.generateImages=function(){var o=T(function*(r){return yield n.generateImagesInternal(r).then(i=>{var s;let a;const l=[];if(i?.generatedImages)for(const f of i.generatedImages)f&&f?.safetyAttributes&&"Positive Prompt"===(null===(s=f?.safetyAttributes)||void 0===s?void 0:s.contentType)?a=f?.safetyAttributes:l.push(f);let c;return c=a?{generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:{generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c})});return function(r){return o.apply(this,arguments)}}(),this.list=function(){var o=T(function*(r){var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(n.apiClient.isVertexAI()&&!l.config.queryBase){if(null!==(i=l.config)&&void 0!==i&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new hi(er.PAGED_ITEM_MODELS,c=>n.listInternal(c),yield n.listInternal(l),l)});return function(r){return o.apply(this,arguments)}}(),this.editImage=function(){var o=T(function*(r){const i={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(i.referenceImages=r.referenceImages.map(s=>s.toReferenceImageAPI())),yield n.editImageInternal(i)});return function(r){return o.apply(this,arguments)}}(),this.upscaleImage=function(){var o=T(function*(r){let i={numberOfImages:1,mode:"upscale"};r.config&&(i=Object.assign(Object.assign({},i),r.config));const s={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:i};return yield n.upscaleImageInternal(s)});return function(r){return o.apply(this,arguments)}}(),this.generateVideos=function(){var o=T(function*(r){var i,s,a,l,c,f;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return n.apiClient.isVertexAI()||(null!==(i=r.video)&&void 0!==i&&i.uri&&null!==(s=r.video)&&void 0!==s&&s.videoBytes?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!(null===(l=null===(a=r.source)||void 0===a?void 0:a.video)||void 0===l)&&l.uri&&!(null===(f=null===(c=r.source)||void 0===c?void 0:c.video)||void 0===f)&&f.videoBytes&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),yield n.generateVideosInternal(r)});return function(r){return o.apply(this,arguments)}}()}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}processParamsMaybeAddMcpUsage(t){var n=this;return T(function*(){var o,r,i;const s=null===(o=t.config)||void 0===o?void 0:o.tools;if(!s)return t;const a=yield Promise.all(s.map(function(){var c=T(function*(f){return nr(f)?yield f.tool():f});return function(f){return c.apply(this,arguments)}}())),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(l.config.tools=a,t.config&&t.config.tools&&oD(t.config.tools)){const c=null!==(i=null===(r=t.config.httpOptions)||void 0===r?void 0:r.headers)&&void 0!==i?i:{};let f=Object.assign({},c);0===Object.keys(f).length&&(f=n.apiClient.getDefaultHeaders()),rD(f),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return l})()}initAfcToolsMap(t){return T(function*(){var n,o,r;const i=new Map;for(const s of null!==(o=null===(n=t.config)||void 0===n?void 0:n.tools)&&void 0!==o?o:[])if(nr(s)){const a=s,l=yield a.tool();for(const c of null!==(r=l.functionDeclarations)&&void 0!==r?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i})()}processAfcStream(t){var n=this;return T(function*(){var o,r,i;const s=null!==(i=null===(r=null===(o=t.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls)&&void 0!==i?i:10;let a=!1,l=0;const c=yield n.initAfcToolsMap(t);return function(f,p,g){var h,m;return tr(this,arguments,function*(){for(var y,_,C;l<s;){a&&(l++,a=!1);const R=yield de(f.processParamsMaybeAddMcpUsage(g)),G=yield de(f.generateContentStreamInternal(R)),ne=[],Te=[];try{for(var M,E=!0,I=(_=void 0,gi(G));!(y=(M=yield de(I.next())).done);E=!0){E=!1;const V=M.value;if(yield yield de(V),V.candidates&&null!==(h=V.candidates[0])&&void 0!==h&&h.content){Te.push(V.candidates[0].content);for(const oe of null!==(m=V.candidates[0].content.parts)&&void 0!==m?m:[])if(l<s&&oe.functionCall){if(!oe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!p.has(oe.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${oe.functionCall.name}`);{const te=yield de(p.get(oe.functionCall.name).callTool([oe.functionCall]));ne.push(...te)}}}}}catch(V){_={error:V}}finally{try{!E&&!y&&(C=I.return)&&(yield de(C.call(I)))}finally{if(_)throw _.error}}if(!(ne.length>0))break;{a=!0;const V=new pi;V.candidates=[{content:{role:"user",parts:ne}}],yield yield de(V);const oe=[];oe.push(...Te),oe.push({role:"user",parts:ne});const te=Ct(g.contents).concat(oe);g.contents=te}}})}(n,c,t)})()}generateContentInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=qE(n.apiClient,t);return l=N("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=WE(p),h=new pi;return Object.assign(h,g),h})}{const f=$E(n.apiClient,t);return l=N("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=zE(p),h=new pi;return Object.assign(h,g),h})}})()}generateContentStreamInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=qE(n.apiClient,t);return l=N("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}),a.then(function(g){return tr(this,arguments,function*(){var h,m,y;try{for(var E,C=!0,v=gi(g);!(h=(E=yield de(v.next())).done);C=!0){C=!1;const I=E.value,M=WE(yield de(I.json()));M.sdkHttpResponse={headers:I.headers};const R=new pi;Object.assign(R,M),yield yield de(R)}}catch(I){m={error:I}}finally{try{!C&&!h&&(y=v.return)&&(yield de(y.call(v)))}finally{if(m)throw m.error}}})})}{const f=$E(n.apiClient,t);return l=N("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}),a.then(function(g){return tr(this,arguments,function*(){var h,m,y;try{for(var E,C=!0,v=gi(g);!(h=(E=yield de(v.next())).done);C=!0){C=!1;const I=E.value,M=zE(yield de(I.json()));M.sdkHttpResponse={headers:I.headers};const R=new pi;Object.assign(R,M),yield yield de(R)}}catch(I){m={error:I}}finally{try{!C&&!h&&(y=v.return)&&(yield de(y.call(v)))}finally{if(m)throw m.error}}})})}})()}embedContent(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function eU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let s=Od(e,r);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["instances[]","content"],s)}const i=u(t,["config"]);return null!=i&&function XO(e,t){const o=u(e,["taskType"]);void 0!==t&&null!=o&&d(t,["instances[]","task_type"],o);const r=u(e,["title"]);void 0!==t&&null!=r&&d(t,["instances[]","title"],r);const i=u(e,["outputDimensionality"]);void 0!==t&&null!=i&&d(t,["parameters","outputDimensionality"],i);const s=u(e,["mimeType"]);void 0!==t&&null!=s&&d(t,["instances[]","mimeType"],s);const a=u(e,["autoTruncate"]);void 0!==t&&null!=a&&d(t,["parameters","autoTruncate"],a)}(i,n),n}(n.apiClient,t);return l=N("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function nU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["predictions[]","embeddings"]);if(null!=o){let i=o;Array.isArray(i)&&(i=i.map(s=>function kO(e){const t={},n=u(e,["values"]);null!=n&&d(t,["values"],n);const o=u(e,["statistics"]);return null!=o&&d(t,["statistics"],function LO(e){const t={},n=u(e,["truncated"]);null!=n&&d(t,["truncated"],n);const o=u(e,["token_count"]);return null!=o&&d(t,["tokenCount"],o),t}(o)),t}(s))),d(t,["embeddings"],i)}const r=u(e,["metadata"]);return null!=r&&d(t,["metadata"],r),t}(p),h=new fE;return Object.assign(h,g),h})}{const f=function jO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let a=Od(e,r);Array.isArray(a)&&(a=a.map(l=>l)),d(n,["requests[]","content"],a)}const i=u(t,["config"]);null!=i&&function QO(e,t){const o=u(e,["taskType"]);void 0!==t&&null!=o&&d(t,["requests[]","taskType"],o);const r=u(e,["title"]);void 0!==t&&null!=r&&d(t,["requests[]","title"],r);const i=u(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&d(t,["requests[]","outputDimensionality"],i),void 0!==u(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==u(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(i,n);const s=u(t,["model"]);return void 0!==s&&d(n,["requests[]","model"],Y(e,s)),n}(n.apiClient,t);return l=N("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function tU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["embeddings"]);if(null!=o){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["embeddings"],i)}const r=u(e,["metadata"]);return null!=r&&d(t,["metadata"],r),t}(p),h=new fE;return Object.assign(h,g),h})}})()}generateImagesInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function dU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["prompt"]);null!=r&&d(n,["instances[0]","prompt"],r);const i=u(t,["config"]);return null!=i&&function uU(e,t){const o=u(e,["outputGcsUri"]);void 0!==t&&null!=o&&d(t,["parameters","storageUri"],o);const r=u(e,["negativePrompt"]);void 0!==t&&null!=r&&d(t,["parameters","negativePrompt"],r);const i=u(e,["numberOfImages"]);void 0!==t&&null!=i&&d(t,["parameters","sampleCount"],i);const s=u(e,["aspectRatio"]);void 0!==t&&null!=s&&d(t,["parameters","aspectRatio"],s);const a=u(e,["guidanceScale"]);void 0!==t&&null!=a&&d(t,["parameters","guidanceScale"],a);const l=u(e,["seed"]);void 0!==t&&null!=l&&d(t,["parameters","seed"],l);const c=u(e,["safetyFilterLevel"]);void 0!==t&&null!=c&&d(t,["parameters","safetySetting"],c);const f=u(e,["personGeneration"]);void 0!==t&&null!=f&&d(t,["parameters","personGeneration"],f);const p=u(e,["includeSafetyAttributes"]);void 0!==t&&null!=p&&d(t,["parameters","includeSafetyAttributes"],p);const g=u(e,["includeRaiReason"]);void 0!==t&&null!=g&&d(t,["parameters","includeRaiReason"],g);const h=u(e,["language"]);void 0!==t&&null!=h&&d(t,["parameters","language"],h);const m=u(e,["outputMimeType"]);void 0!==t&&null!=m&&d(t,["parameters","outputOptions","mimeType"],m);const y=u(e,["outputCompressionQuality"]);void 0!==t&&null!=y&&d(t,["parameters","outputOptions","compressionQuality"],y);const _=u(e,["addWatermark"]);void 0!==t&&null!=_&&d(t,["parameters","addWatermark"],_);const C=u(e,["labels"]);void 0!==t&&null!=C&&d(t,["labels"],C);const v=u(e,["imageSize"]);void 0!==t&&null!=v&&d(t,["parameters","sampleImageSize"],v);const E=u(e,["enhancePrompt"]);void 0!==t&&null!=E&&d(t,["parameters","enhancePrompt"],E)}(i,n),n}(n.apiClient,t);return l=N("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function pU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["predictions"]);if(null!=o){let i=o;Array.isArray(i)&&(i=i.map(s=>Pa(s))),d(t,["generatedImages"],i)}const r=u(e,["positivePromptSafetyAttributes"]);return null!=r&&d(t,["positivePromptSafetyAttributes"],KE(r)),t}(p),h=new pE;return Object.assign(h,g),h})}{const f=function cU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["prompt"]);null!=r&&d(n,["instances[0]","prompt"],r);const i=u(t,["config"]);return null!=i&&function lU(e,t){if(void 0!==u(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==u(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=u(e,["numberOfImages"]);void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o);const r=u(e,["aspectRatio"]);void 0!==t&&null!=r&&d(t,["parameters","aspectRatio"],r);const i=u(e,["guidanceScale"]);if(void 0!==t&&null!=i&&d(t,["parameters","guidanceScale"],i),void 0!==u(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const s=u(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&d(t,["parameters","safetySetting"],s);const a=u(e,["personGeneration"]);void 0!==t&&null!=a&&d(t,["parameters","personGeneration"],a);const l=u(e,["includeSafetyAttributes"]);void 0!==t&&null!=l&&d(t,["parameters","includeSafetyAttributes"],l);const c=u(e,["includeRaiReason"]);void 0!==t&&null!=c&&d(t,["parameters","includeRaiReason"],c);const f=u(e,["language"]);void 0!==t&&null!=f&&d(t,["parameters","language"],f);const p=u(e,["outputMimeType"]);void 0!==t&&null!=p&&d(t,["parameters","outputOptions","mimeType"],p);const g=u(e,["outputCompressionQuality"]);if(void 0!==t&&null!=g&&d(t,["parameters","outputOptions","compressionQuality"],g),void 0!==u(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==u(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const h=u(e,["imageSize"]);if(void 0!==t&&null!=h&&d(t,["parameters","sampleImageSize"],h),void 0!==u(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,n),n}(n.apiClient,t);return l=N("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function fU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["predictions"]);if(null!=o){let i=o;Array.isArray(i)&&(i=i.map(s=>function TU(e){const t={},n=u(e,["_self"]);null!=n&&d(t,["image"],function xU(e){const t={},n=u(e,["bytesBase64Encoded"]);null!=n&&d(t,["imageBytes"],Pn(n));const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(n));const o=u(e,["raiFilteredReason"]);null!=o&&d(t,["raiFilteredReason"],o);const r=u(e,["_self"]);return null!=r&&d(t,["safetyAttributes"],YE(r)),t}(s))),d(t,["generatedImages"],i)}const r=u(e,["positivePromptSafetyAttributes"]);return null!=r&&d(t,["positivePromptSafetyAttributes"],YE(r)),t}(p),h=new pE;return Object.assign(h,g),h})}})()}editImageInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function KO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["prompt"]);null!=r&&d(n,["instances[0]","prompt"],r);const i=u(t,["referenceImages"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(l=>function JU(e){const t={},n=u(e,["referenceImage"]);null!=n&&d(t,["referenceImage"],bt(n));const o=u(e,["referenceId"]);null!=o&&d(t,["referenceId"],o);const r=u(e,["referenceType"]);null!=r&&d(t,["referenceType"],r);const i=u(e,["maskImageConfig"]);null!=i&&d(t,["maskImageConfig"],function BU(e){const t={},n=u(e,["maskMode"]);null!=n&&d(t,["maskMode"],n);const o=u(e,["segmentationClasses"]);null!=o&&d(t,["maskClasses"],o);const r=u(e,["maskDilation"]);return null!=r&&d(t,["dilation"],r),t}(i));const s=u(e,["controlImageConfig"]);null!=s&&d(t,["controlImageConfig"],function VO(e){const t={},n=u(e,["controlType"]);null!=n&&d(t,["controlType"],n);const o=u(e,["enableControlImageComputation"]);return null!=o&&d(t,["computeControl"],o),t}(s));const a=u(e,["styleImageConfig"]);null!=a&&d(t,["styleImageConfig"],a);const l=u(e,["subjectImageConfig"]);return null!=l&&d(t,["subjectImageConfig"],l),t}(l))),d(n,["instances[0]","referenceImages"],a)}const s=u(t,["config"]);return null!=s&&function YO(e,t){const o=u(e,["outputGcsUri"]);void 0!==t&&null!=o&&d(t,["parameters","storageUri"],o);const r=u(e,["negativePrompt"]);void 0!==t&&null!=r&&d(t,["parameters","negativePrompt"],r);const i=u(e,["numberOfImages"]);void 0!==t&&null!=i&&d(t,["parameters","sampleCount"],i);const s=u(e,["aspectRatio"]);void 0!==t&&null!=s&&d(t,["parameters","aspectRatio"],s);const a=u(e,["guidanceScale"]);void 0!==t&&null!=a&&d(t,["parameters","guidanceScale"],a);const l=u(e,["seed"]);void 0!==t&&null!=l&&d(t,["parameters","seed"],l);const c=u(e,["safetyFilterLevel"]);void 0!==t&&null!=c&&d(t,["parameters","safetySetting"],c);const f=u(e,["personGeneration"]);void 0!==t&&null!=f&&d(t,["parameters","personGeneration"],f);const p=u(e,["includeSafetyAttributes"]);void 0!==t&&null!=p&&d(t,["parameters","includeSafetyAttributes"],p);const g=u(e,["includeRaiReason"]);void 0!==t&&null!=g&&d(t,["parameters","includeRaiReason"],g);const h=u(e,["language"]);void 0!==t&&null!=h&&d(t,["parameters","language"],h);const m=u(e,["outputMimeType"]);void 0!==t&&null!=m&&d(t,["parameters","outputOptions","mimeType"],m);const y=u(e,["outputCompressionQuality"]);void 0!==t&&null!=y&&d(t,["parameters","outputOptions","compressionQuality"],y);const _=u(e,["addWatermark"]);void 0!==t&&null!=_&&d(t,["parameters","addWatermark"],_);const C=u(e,["labels"]);void 0!==t&&null!=C&&d(t,["labels"],C);const v=u(e,["editMode"]);void 0!==t&&null!=v&&d(t,["parameters","editMode"],v);const E=u(e,["baseSteps"]);void 0!==t&&null!=E&&d(t,["parameters","editConfig","baseSteps"],E)}(s,n),n}(n.apiClient,t);return s=N("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const f=function ZO(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["predictions"]);if(null!=o){let r=o;Array.isArray(r)&&(r=r.map(i=>Pa(i))),d(t,["generatedImages"],r)}return t}(c),p=new gV;return Object.assign(p,f),p})}throw new Error("This method is only supported by the Vertex AI.")})()}upscaleImageInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function lB(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["image"]);null!=r&&d(n,["instances[0]","image"],bt(r));const i=u(t,["upscaleFactor"]);null!=i&&d(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=u(t,["config"]);return null!=s&&function aB(e,t){const o=u(e,["outputGcsUri"]);void 0!==t&&null!=o&&d(t,["parameters","storageUri"],o);const r=u(e,["includeRaiReason"]);void 0!==t&&null!=r&&d(t,["parameters","includeRaiReason"],r);const i=u(e,["outputMimeType"]);void 0!==t&&null!=i&&d(t,["parameters","outputOptions","mimeType"],i);const s=u(e,["outputCompressionQuality"]);void 0!==t&&null!=s&&d(t,["parameters","outputOptions","compressionQuality"],s);const a=u(e,["enhanceInputImage"]);void 0!==t&&null!=a&&d(t,["parameters","upscaleConfig","enhanceInputImage"],a);const l=u(e,["imagePreservationFactor"]);void 0!==t&&null!=l&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],l);const c=u(e,["labels"]);void 0!==t&&null!=c&&d(t,["labels"],c);const f=u(e,["numberOfImages"]);void 0!==t&&null!=f&&d(t,["parameters","sampleCount"],f);const p=u(e,["mode"]);void 0!==t&&null!=p&&d(t,["parameters","mode"],p)}(s,n),n}(n.apiClient,t);return s=N("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const f=function uB(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["predictions"]);if(null!=o){let r=o;Array.isArray(r)&&(r=r.map(i=>Pa(i))),d(t,["generatedImages"],r)}return t}(c),p=new mV;return Object.assign(p,f),p})}throw new Error("This method is only supported by the Vertex AI.")})()}recontextImage(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function qU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["source"]);null!=r&&function WU(e,t){const o=u(e,["prompt"]);void 0!==t&&null!=o&&d(t,["instances[0]","prompt"],o);const r=u(e,["personImage"]);void 0!==t&&null!=r&&d(t,["instances[0]","personImage","image"],bt(r));const i=u(e,["productImages"]);if(void 0!==t&&null!=i){let s=i;Array.isArray(s)&&(s=s.map(a=>function GU(e){const t={},n=u(e,["productImage"]);return null!=n&&d(t,["image"],bt(n)),t}(a))),d(t,["instances[0]","productImages"],s)}}(r,n);const i=u(t,["config"]);return null!=i&&function $U(e,t){const o=u(e,["numberOfImages"]);void 0!==t&&null!=o&&d(t,["parameters","sampleCount"],o);const r=u(e,["baseSteps"]);void 0!==t&&null!=r&&d(t,["parameters","editConfig","baseSteps"],r);const i=u(e,["outputGcsUri"]);void 0!==t&&null!=i&&d(t,["parameters","storageUri"],i);const s=u(e,["seed"]);void 0!==t&&null!=s&&d(t,["parameters","seed"],s);const a=u(e,["safetyFilterLevel"]);void 0!==t&&null!=a&&d(t,["parameters","safetySetting"],a);const l=u(e,["personGeneration"]);void 0!==t&&null!=l&&d(t,["parameters","personGeneration"],l);const c=u(e,["addWatermark"]);void 0!==t&&null!=c&&d(t,["parameters","addWatermark"],c);const f=u(e,["outputMimeType"]);void 0!==t&&null!=f&&d(t,["parameters","outputOptions","mimeType"],f);const p=u(e,["outputCompressionQuality"]);void 0!==t&&null!=p&&d(t,["parameters","outputOptions","compressionQuality"],p);const g=u(e,["enhancePrompt"]);void 0!==t&&null!=g&&d(t,["parameters","enhancePrompt"],g);const h=u(e,["labels"]);void 0!==t&&null!=h&&d(t,["labels"],h)}(i,n),n}(n.apiClient,t);return s=N("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=function zU(e){const t={},n=u(e,["predictions"]);if(null!=n){let o=n;Array.isArray(o)&&(o=o.map(r=>Pa(r))),d(t,["generatedImages"],o)}return t}(c),p=new yV;return Object.assign(p,f),p})}throw new Error("This method is only supported by the Vertex AI.")})()}segmentImage(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function QU(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["source"]);null!=r&&function jU(e,t){const o=u(e,["prompt"]);void 0!==t&&null!=o&&d(t,["instances[0]","prompt"],o);const r=u(e,["image"]);void 0!==t&&null!=r&&d(t,["instances[0]","image"],bt(r));const i=u(e,["scribbleImage"]);void 0!==t&&null!=i&&d(t,["instances[0]","scribble"],function KU(e){const t={},n=u(e,["image"]);return null!=n&&d(t,["image"],bt(n)),t}(i))}(r,n);const i=u(t,["config"]);return null!=i&&function ZU(e,t){const o=u(e,["mode"]);void 0!==t&&null!=o&&d(t,["parameters","mode"],o);const r=u(e,["maxPredictions"]);void 0!==t&&null!=r&&d(t,["parameters","maxPredictions"],r);const i=u(e,["confidenceThreshold"]);void 0!==t&&null!=i&&d(t,["parameters","confidenceThreshold"],i);const s=u(e,["maskDilation"]);void 0!==t&&null!=s&&d(t,["parameters","maskDilation"],s);const a=u(e,["binaryColorThreshold"]);void 0!==t&&null!=a&&d(t,["parameters","binaryColorThreshold"],a);const l=u(e,["labels"]);void 0!==t&&null!=l&&d(t,["labels"],l)}(i,n),n}(n.apiClient,t);return s=N("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=function XU(e){const t={},n=u(e,["predictions"]);if(null!=n){let o=n;Array.isArray(o)&&(o=o.map(r=>function wU(e){const t={},n=u(e,["_self"]);null!=n&&d(t,["mask"],JE(n));const o=u(e,["labels"]);if(null!=o){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(t,["labels"],r)}return t}(r))),d(t,["generatedMasks"],o)}return t}(c),p=new vV;return Object.assign(p,f),p})}throw new Error("This method is only supported by the Vertex AI.")})()}get(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function RU(e,t){const n={},o=u(t,["model"]);return null!=o&&d(n,["_url","name"],Y(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>qd(p))}{const f=function NU(e,t){const n={},o=u(t,["model"]);return null!=o&&d(n,["_url","name"],Y(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>$d(p))}})()}listInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function VU(e,t){const n={},o=u(t,["config"]);return null!=o&&function kU(e,t,n){const r=u(t,["pageSize"]);void 0!==n&&null!=r&&d(n,["_query","pageSize"],r);const i=u(t,["pageToken"]);void 0!==n&&null!=i&&d(n,["_query","pageToken"],i);const s=u(t,["filter"]);void 0!==n&&null!=s&&d(n,["_query","filter"],s);const a=u(t,["queryBase"]);void 0!==n&&null!=a&&d(n,["_url","models_url"],bE(e,a))}(e,o,n),n}(n.apiClient,t);return l=N("{models_url}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function UU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["_self"]);if(null!=r){let i=PE(r);Array.isArray(i)&&(i=i.map(s=>qd(s))),d(t,["models"],i)}return t}(p),h=new hE;return Object.assign(h,g),h})}{const f=function LU(e,t){const n={},o=u(t,["config"]);return null!=o&&function FU(e,t,n){const r=u(t,["pageSize"]);void 0!==n&&null!=r&&d(n,["_query","pageSize"],r);const i=u(t,["pageToken"]);void 0!==n&&null!=i&&d(n,["_query","pageToken"],i);const s=u(t,["filter"]);void 0!==n&&null!=s&&d(n,["_query","filter"],s);const a=u(t,["queryBase"]);void 0!==n&&null!=a&&d(n,["_url","models_url"],bE(e,a))}(e,o,n),n}(n.apiClient,t);return l=N("{models_url}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function OU(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["nextPageToken"]);null!=o&&d(t,["nextPageToken"],o);const r=u(e,["_self"]);if(null!=r){let i=PE(r);Array.isArray(i)&&(i=i.map(s=>$d(s))),d(t,["models"],i)}return t}(p),h=new hE;return Object.assign(h,g),h})}})()}update(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function sB(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["config"]);return null!=r&&function rB(e,t){const o=u(e,["displayName"]);void 0!==t&&null!=o&&d(t,["displayName"],o);const r=u(e,["description"]);void 0!==t&&null!=r&&d(t,["description"],r);const i=u(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&d(t,["defaultCheckpointId"],i)}(r,n),n}(n.apiClient,t);return l=N("{model}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>qd(p))}{const f=function iB(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","name"],Y(e,o));const r=u(t,["config"]);return null!=r&&function oB(e,t){const o=u(e,["displayName"]);void 0!==t&&null!=o&&d(t,["displayName"],o);const r=u(e,["description"]);void 0!==t&&null!=r&&d(t,["description"],r);const i=u(e,["defaultCheckpointId"]);void 0!==t&&null!=i&&d(t,["defaultCheckpointId"],i)}(r,n),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>$d(p))}})()}delete(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function zO(e,t){const n={},o=u(t,["model"]);return null!=o&&d(n,["_url","name"],Y(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function JO(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(p),h=new gE;return Object.assign(h,g),h})}{const f=function qO(e,t){const n={},o=u(t,["model"]);return null!=o&&d(n,["_url","name"],Y(e,o)),n}(n.apiClient,t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function WO(e){const t={},n=u(e,["sdkHttpResponse"]);return null!=n&&d(t,["sdkHttpResponse"],n),t}(p),h=new gE;return Object.assign(h,g),h})}})()}countTokens(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function HO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let s=Ct(r);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["contents"],s)}const i=u(t,["config"]);return null!=i&&function UO(e,t){const o=u(e,["systemInstruction"]);void 0!==t&&null!=o&&d(t,["systemInstruction"],Be(o));const r=u(e,["tools"]);if(void 0!==t&&null!=r){let s=r;Array.isArray(s)&&(s=s.map(a=>QE(a))),d(t,["tools"],s)}const i=u(e,["generationConfig"]);return void 0!==t&&null!=i&&d(t,["generationConfig"],function AU(e){const t={},n=u(e,["modelSelectionConfig"]);null!=n&&d(t,["modelConfig"],n);const o=u(e,["audioTimestamp"]);null!=o&&d(t,["audioTimestamp"],o);const r=u(e,["candidateCount"]);null!=r&&d(t,["candidateCount"],r);const i=u(e,["enableAffectiveDialog"]);null!=i&&d(t,["enableAffectiveDialog"],i);const s=u(e,["frequencyPenalty"]);null!=s&&d(t,["frequencyPenalty"],s);const a=u(e,["logprobs"]);null!=a&&d(t,["logprobs"],a);const l=u(e,["maxOutputTokens"]);null!=l&&d(t,["maxOutputTokens"],l);const c=u(e,["mediaResolution"]);null!=c&&d(t,["mediaResolution"],c);const f=u(e,["presencePenalty"]);null!=f&&d(t,["presencePenalty"],f);const p=u(e,["responseJsonSchema"]);null!=p&&d(t,["responseJsonSchema"],p);const g=u(e,["responseLogprobs"]);null!=g&&d(t,["responseLogprobs"],g);const h=u(e,["responseMimeType"]);null!=h&&d(t,["responseMimeType"],h);const m=u(e,["responseModalities"]);null!=m&&d(t,["responseModalities"],m);const y=u(e,["responseSchema"]);null!=y&&d(t,["responseSchema"],y);const _=u(e,["routingConfig"]);null!=_&&d(t,["routingConfig"],_);const C=u(e,["seed"]);null!=C&&d(t,["seed"],C);const v=u(e,["speechConfig"]);null!=v&&d(t,["speechConfig"],ZE(v));const E=u(e,["stopSequences"]);null!=E&&d(t,["stopSequences"],E);const I=u(e,["temperature"]);null!=I&&d(t,["temperature"],I);const M=u(e,["thinkingConfig"]);null!=M&&d(t,["thinkingConfig"],M);const R=u(e,["topK"]);null!=R&&d(t,["topK"],R);const G=u(e,["topP"]);if(null!=G&&d(t,["topP"],G),void 0!==u(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(i)),{}}(i,n),n}(n.apiClient,t);return l=N("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function $O(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["totalTokens"]);return null!=o&&d(t,["totalTokens"],o),t}(p),h=new mE;return Object.assign(h,g),h})}{const f=function BO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let s=Ct(r);Array.isArray(s)&&(s=s.map(a=>ba(a))),d(n,["contents"],s)}const i=u(t,["config"]);return null!=i&&function OO(e){if(void 0!==u(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==u(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==u(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),n}(n.apiClient,t);return l=N("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function GO(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["totalTokens"]);null!=o&&d(t,["totalTokens"],o);const r=u(e,["cachedContentTokenCount"]);return null!=r&&d(t,["cachedContentTokenCount"],r),t}(p),h=new mE;return Object.assign(h,g),h})}})()}computeTokens(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function xO(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["_url","model"],Y(e,o));const r=u(t,["contents"]);if(null!=r){let i=Ct(r);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["contents"],i)}return n}(n.apiClient,t);return s=N("{model}:computeTokens",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const f=function FO(e){const t={},n=u(e,["sdkHttpResponse"]);null!=n&&d(t,["sdkHttpResponse"],n);const o=u(e,["tokensInfo"]);if(null!=o){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(t,["tokensInfo"],r)}return t}(c),p=new _V;return Object.assign(p,f),p})}throw new Error("This method is only supported by the Vertex AI.")})()}generateVideosInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=_U(n.apiClient,t);return l=N("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>{const g=function yU(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["metadata"]);null!=o&&d(t,["metadata"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);null!=i&&d(t,["error"],i);const s=u(e,["response"]);return null!=s&&d(t,["response"],function EU(e){const t={},n=u(e,["videos"]);if(null!=n){let i=n;Array.isArray(i)&&(i=i.map(s=>function MU(e){const t={},n=u(e,["_self"]);return null!=n&&d(t,["video"],function dB(e){const t={},n=u(e,["gcsUri"]);null!=n&&d(t,["uri"],n);const o=u(e,["bytesBase64Encoded"]);null!=o&&d(t,["videoBytes"],Pn(o));const r=u(e,["mimeType"]);return null!=r&&d(t,["mimeType"],r),t}(n)),t}(s))),d(t,["generatedVideos"],i)}const o=u(e,["raiMediaFilteredCount"]);null!=o&&d(t,["raiMediaFilteredCount"],o);const r=u(e,["raiMediaFilteredReasons"]);return null!=r&&d(t,["raiMediaFilteredReasons"],r),t}(s)),t}(p),h=new Sa;return Object.assign(h,g),h})}{const f=vU(n.apiClient,t);return l=N("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const g=function mU(e){const t={},n=u(e,["name"]);null!=n&&d(t,["name"],n);const o=u(e,["metadata"]);null!=o&&d(t,["metadata"],o);const r=u(e,["done"]);null!=r&&d(t,["done"],r);const i=u(e,["error"]);null!=i&&d(t,["error"],i);const s=u(e,["response","generateVideoResponse"]);return null!=s&&d(t,["response"],function CU(e){const t={},n=u(e,["generatedSamples"]);if(null!=n){let i=n;Array.isArray(i)&&(i=i.map(s=>function SU(e){const t={},n=u(e,["video"]);return null!=n&&d(t,["video"],function cB(e){const t={},n=u(e,["uri"]);null!=n&&d(t,["uri"],n);const o=u(e,["encodedVideo"]);null!=o&&d(t,["videoBytes"],Pn(o));const r=u(e,["encoding"]);return null!=r&&d(t,["mimeType"],r),t}(n)),t}(s))),d(t,["generatedVideos"],i)}const o=u(e,["raiMediaFilteredCount"]);null!=o&&d(t,["raiMediaFilteredCount"],o);const r=u(e,["raiMediaFilteredReasons"]);return null!=r&&d(t,["raiMediaFilteredReasons"],r),t}(s)),t}(p),h=new Sa;return Object.assign(h,g),h})}})()}}class GB extends Xn{constructor(t){super(),this.apiClient=t}getVideosOperation(t){var n=this;return T(function*(){const o=t.operation,r=t.config;if(void 0===o.name||""===o.name)throw new Error("Operation name is required.");if(n.apiClient.isVertexAI()){const i=o.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const a=yield n.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:i,config:{httpOptions:s}});return o._fromAPIResponse({apiResponse:a,isVertexAI:!0})}{const i=yield n.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:i,isVertexAI:!1})}})()}get(t){var n=this;return T(function*(){const o=t.operation,r=t.config;if(void 0===o.name||""===o.name)throw new Error("Operation name is required.");if(n.apiClient.isVertexAI()){const i=o.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const a=yield n.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:i,config:{httpOptions:s}});return o._fromAPIResponse({apiResponse:a,isVertexAI:!0})}{const i=yield n.getVideosOperationInternal({operationName:o.name,config:r});return o._fromAPIResponse({apiResponse:i,isVertexAI:!1})}})()}getVideosOperationInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function EL(e){const t={},n=u(e,["operationName"]);return null!=n&&d(t,["_url","operationName"],n),t}(t);return l=N("{operationName}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json()),a}{const f=function CL(e){const t={},n=u(e,["operationName"]);return null!=n&&d(t,["_url","operationName"],n),t}(t);return l=N("{operationName}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json()),a}})()}fetchPredictVideosOperationInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=function pL(e){const t={},n=u(e,["operationName"]);null!=n&&d(t,["operationName"],n);const o=u(e,["resourceName"]);return null!=o&&d(t,["_url","resourceName"],o),t}(t);return s=N("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json()),i}throw new Error("This method is only supported by the Vertex AI.")})()}}function zB(e,t,n){const r=u(t,["expireTime"]);void 0!==n&&null!=r&&d(n,["expireTime"],r);const i=u(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&d(n,["newSessionExpireTime"],i);const s=u(t,["uses"]);void 0!==n&&null!=s&&d(n,["uses"],s);const a=u(t,["liveConnectConstraints"]);void 0!==n&&null!=a&&d(n,["bidiGenerateContentSetup"],function QB(e,t){const n={},o=u(t,["model"]);null!=o&&d(n,["setup","model"],Y(e,o));const r=u(t,["config"]);return null!=r&&d(n,["config"],function ZB(e,t){const o=u(e,["generationConfig"]);void 0!==t&&null!=o&&d(t,["setup","generationConfig"],o);const r=u(e,["responseModalities"]);void 0!==t&&null!=r&&d(t,["setup","generationConfig","responseModalities"],r);const i=u(e,["temperature"]);void 0!==t&&null!=i&&d(t,["setup","generationConfig","temperature"],i);const s=u(e,["topP"]);void 0!==t&&null!=s&&d(t,["setup","generationConfig","topP"],s);const a=u(e,["topK"]);void 0!==t&&null!=a&&d(t,["setup","generationConfig","topK"],a);const l=u(e,["maxOutputTokens"]);void 0!==t&&null!=l&&d(t,["setup","generationConfig","maxOutputTokens"],l);const c=u(e,["mediaResolution"]);void 0!==t&&null!=c&&d(t,["setup","generationConfig","mediaResolution"],c);const f=u(e,["seed"]);void 0!==t&&null!=f&&d(t,["setup","generationConfig","seed"],f);const p=u(e,["speechConfig"]);void 0!==t&&null!=p&&d(t,["setup","generationConfig","speechConfig"],Hd(p));const g=u(e,["thinkingConfig"]);void 0!==t&&null!=g&&d(t,["setup","generationConfig","thinkingConfig"],g);const h=u(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&d(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=u(e,["systemInstruction"]);void 0!==t&&null!=m&&d(t,["setup","systemInstruction"],function qB(e){const t={},n=u(e,["parts"]);if(null!=n){let r=n;Array.isArray(r)&&(r=r.map(i=>function XB(e){const t={},n=u(e,["videoMetadata"]);null!=n&&d(t,["videoMetadata"],n);const o=u(e,["thought"]);null!=o&&d(t,["thought"],o);const r=u(e,["inlineData"]);null!=r&&d(t,["inlineData"],function $B(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["data"]);null!=n&&d(t,["data"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(r));const i=u(e,["fileData"]);null!=i&&d(t,["fileData"],function JB(e){const t={};if(void 0!==u(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=u(e,["fileUri"]);null!=n&&d(t,["fileUri"],n);const o=u(e,["mimeType"]);return null!=o&&d(t,["mimeType"],o),t}(i));const s=u(e,["thoughtSignature"]);null!=s&&d(t,["thoughtSignature"],s);const a=u(e,["functionCall"]);null!=a&&d(t,["functionCall"],a);const l=u(e,["codeExecutionResult"]);null!=l&&d(t,["codeExecutionResult"],l);const c=u(e,["executableCode"]);null!=c&&d(t,["executableCode"],c);const f=u(e,["functionResponse"]);null!=f&&d(t,["functionResponse"],f);const p=u(e,["text"]);return null!=p&&d(t,["text"],p),t}(i))),d(t,["parts"],r)}const o=u(e,["role"]);return null!=o&&d(t,["role"],o),t}(Be(m)));const y=u(e,["tools"]);if(void 0!==t&&null!=y){let R=Xo(y);Array.isArray(R)&&(R=R.map(G=>function eH(e){const t={},n=u(e,["functionDeclarations"]);if(null!=n){let c=n;Array.isArray(c)&&(c=c.map(f=>f)),d(t,["functionDeclarations"],c)}if(void 0!==u(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(e,["googleSearch"]);null!=o&&d(t,["googleSearch"],function KB(e){const t={},n=u(e,["timeRangeFilter"]);if(null!=n&&d(t,["timeRangeFilter"],n),void 0!==u(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}(o));const r=u(e,["googleSearchRetrieval"]);if(null!=r&&d(t,["googleSearchRetrieval"],r),void 0!==u(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(e,["googleMaps"]);null!=i&&d(t,["googleMaps"],function YB(e){const t={};if(void 0!==u(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(e,["enableWidget"]);return null!=n&&d(t,["enableWidget"],n),t}(i));const s=u(e,["urlContext"]);null!=s&&d(t,["urlContext"],s);const a=u(e,["computerUse"]);null!=a&&d(t,["computerUse"],a);const l=u(e,["codeExecution"]);return null!=l&&d(t,["codeExecution"],l),t}(Qo(G)))),d(t,["setup","tools"],R)}const _=u(e,["sessionResumption"]);void 0!==t&&null!=_&&d(t,["setup","sessionResumption"],function jB(e){const t={},n=u(e,["handle"]);if(null!=n&&d(t,["handle"],n),void 0!==u(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(_));const C=u(e,["inputAudioTranscription"]);void 0!==t&&null!=C&&d(t,["setup","inputAudioTranscription"],C);const v=u(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&d(t,["setup","outputAudioTranscription"],v);const E=u(e,["realtimeInputConfig"]);void 0!==t&&null!=E&&d(t,["setup","realtimeInputConfig"],E);const I=u(e,["contextWindowCompression"]);void 0!==t&&null!=I&&d(t,["setup","contextWindowCompression"],I);const M=u(e,["proactivity"]);return void 0!==t&&null!=M&&d(t,["setup","proactivity"],M),{}}(r,n)),n}(e,a));const l=u(t,["lockAdditionalFields"]);return void 0!==n&&null!=l&&d(n,["fieldMask"],l),{}}class oH extends Xn{constructor(t){super(),this.apiClient=t}create(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=function WB(e,t){const n={},o=u(t,["config"]);return null!=o&&d(n,["config"],zB(e,o,n)),n}(n.apiClient,t);s=N("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const c=function nH(e,t){let n=null;const o=e.bidiGenerateContentSetup;if("object"==typeof o&&null!==o&&"setup"in o){const i=o.setup;"object"==typeof i&&null!==i?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else void 0!==o&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const i=function tH(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if("object"==typeof o&&null!=o&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);t.push(...r)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(t?.lockAdditionalFields)&&0===t?.lockAdditionalFields.length)i?e.fieldMask=i:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}(l,t.config);return i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}})()}}function uH(e,t){const n={},o=u(e,["baseModel"]);null!=o&&d(n,["baseModel"],o);const r=u(e,["preTunedModel"]);null!=r&&d(n,["preTunedModel"],r);const i=u(e,["trainingDataset"]);null!=i&&function CH(e,t,n){const r=u(e,["gcsUri"]);void 0!==t&&null!=r&&d(t,["supervisedTuningSpec","trainingDatasetUri"],r);const i=u(e,["vertexDatasetResource"]);if(void 0!==t&&null!=i&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i),void 0!==u(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,n);const s=u(e,["config"]);return null!=s&&function aH(e,t,n){const r=u(e,["validationDataset"]);void 0!==t&&null!=r&&d(t,["supervisedTuningSpec"],function DH(e,t){const n={},o=u(e,["gcsUri"]);null!=o&&d(n,["validationDatasetUri"],o);const r=u(e,["vertexDatasetResource"]);return null!=r&&d(n,["validationDatasetUri"],r),n}(r));const i=u(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&d(t,["tunedModelDisplayName"],i);const s=u(e,["description"]);void 0!==t&&null!=s&&d(t,["description"],s);const a=u(e,["epochCount"]);void 0!==t&&null!=a&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=u(e,["learningRateMultiplier"]);void 0!==t&&null!=l&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=u(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=c&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=u(e,["adapterSize"]);if(void 0!==t&&null!=f&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),void 0!==u(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==u(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const p=u(e,["labels"]);return void 0!==t&&null!=p&&d(t,["labels"],p),{}}(s,n),n}function lD(e,t){const n={},o=u(e,["sdkHttpResponse"]);null!=o&&d(n,["sdkHttpResponse"],o);const r=u(e,["name"]);null!=r&&d(n,["name"],r);const i=u(e,["state"]);null!=i&&d(n,["state"],NE(i));const s=u(e,["createTime"]);null!=s&&d(n,["createTime"],s);const a=u(e,["tuningTask","startTime"]);null!=a&&d(n,["startTime"],a);const l=u(e,["tuningTask","completeTime"]);null!=l&&d(n,["endTime"],l);const c=u(e,["updateTime"]);null!=c&&d(n,["updateTime"],c);const f=u(e,["description"]);null!=f&&d(n,["description"],f);const p=u(e,["baseModel"]);null!=p&&d(n,["baseModel"],p);const g=u(e,["_self"]);return null!=g&&d(n,["tunedModel"],function vH(e,t){const n={},o=u(e,["name"]);null!=o&&d(n,["model"],o);const r=u(e,["name"]);return null!=r&&d(n,["endpoint"],r),n}(g)),n}function Kd(e,t){const n={},o=u(e,["sdkHttpResponse"]);null!=o&&d(n,["sdkHttpResponse"],o);const r=u(e,["name"]);null!=r&&d(n,["name"],r);const i=u(e,["state"]);null!=i&&d(n,["state"],NE(i));const s=u(e,["createTime"]);null!=s&&d(n,["createTime"],s);const a=u(e,["startTime"]);null!=a&&d(n,["startTime"],a);const l=u(e,["endTime"]);null!=l&&d(n,["endTime"],l);const c=u(e,["updateTime"]);null!=c&&d(n,["updateTime"],c);const f=u(e,["error"]);null!=f&&d(n,["error"],f);const p=u(e,["description"]);null!=p&&d(n,["description"],p);const g=u(e,["baseModel"]);null!=g&&d(n,["baseModel"],g);const h=u(e,["tunedModel"]);null!=h&&d(n,["tunedModel"],h);const m=u(e,["preTunedModel"]);null!=m&&d(n,["preTunedModel"],m);const y=u(e,["supervisedTuningSpec"]);null!=y&&d(n,["supervisedTuningSpec"],y);const _=u(e,["tuningDataStats"]);null!=_&&d(n,["tuningDataStats"],_);const C=u(e,["encryptionSpec"]);null!=C&&d(n,["encryptionSpec"],C);const v=u(e,["partnerModelTuningSpec"]);null!=v&&d(n,["partnerModelTuningSpec"],v);const E=u(e,["customBaseModel"]);null!=E&&d(n,["customBaseModel"],E);const I=u(e,["experiment"]);null!=I&&d(n,["experiment"],I);const M=u(e,["labels"]);null!=M&&d(n,["labels"],M);const R=u(e,["outputUri"]);null!=R&&d(n,["outputUri"],R);const G=u(e,["pipelineJob"]);null!=G&&d(n,["pipelineJob"],G);const ne=u(e,["serviceAccount"]);null!=ne&&d(n,["serviceAccount"],ne);const Te=u(e,["tunedModelDisplayName"]);null!=Te&&d(n,["tunedModelDisplayName"],Te);const V=u(e,["veoTuningSpec"]);return null!=V&&d(n,["veoTuningSpec"],V),n}class IH extends Xn{constructor(t){var n;super(),n=this,this.apiClient=t,this.get=function(){var o=T(function*(r){return yield n.getInternal(r)});return function(r){return o.apply(this,arguments)}}(),this.list=T(function*(o={}){return new hi(er.PAGED_ITEM_TUNING_JOBS,r=>n.listInternal(r),yield n.listInternal(o),o)}),this.tune=function(){var o=T(function*(r){var i;if(n.apiClient.isVertexAI()){if(r.baseModel.startsWith("projects/")){const s={tunedModelName:r.baseModel};null!==(i=r.config)&&void 0!==i&&i.preTunedModelCheckpointId&&(s.checkpointId=r.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},r),{preTunedModel:s});return a.baseModel=void 0,yield n.tuneInternal(a)}{const s=Object.assign({},r);return yield n.tuneInternal(s)}}{const s=Object.assign({},r),a=yield n.tuneMldevInternal(s);let l="";return void 0!==a.metadata&&void 0!==a.metadata.tunedModel?l=a.metadata.tunedModel:void 0!==a.name&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:lE.JOB_STATE_QUEUED}}});return function(r){return o.apply(this,arguments)}}()}getInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function dH(e,t){const n={},o=u(e,["name"]);return null!=o&&d(n,["_url","name"],o),n}(t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>Kd(p))}{const f=function cH(e,t){const n={},o=u(e,["name"]);return null!=o&&d(n,["_url","name"],o),n}(t);return l=N("{name}",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>lD(p))}})()}listInternal(t){var n=this;return T(function*(){var o,r,i,s;let a,l="",c={};if(n.apiClient.isVertexAI()){const f=function gH(e,t){const n={},o=u(e,["config"]);return null!=o&&function pH(e,t,n){const r=u(e,["pageSize"]);void 0!==t&&null!=r&&d(t,["_query","pageSize"],r);const i=u(e,["pageToken"]);void 0!==t&&null!=i&&d(t,["_query","pageToken"],i);const s=u(e,["filter"]);void 0!==t&&null!=s&&d(t,["_query","filter"],s)}(o,n),n}(t);return l=N("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function yH(e,t){const n={},o=u(e,["sdkHttpResponse"]);null!=o&&d(n,["sdkHttpResponse"],o);const r=u(e,["nextPageToken"]);null!=r&&d(n,["nextPageToken"],r);const i=u(e,["tuningJobs"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(a=>Kd(a))),d(n,["tuningJobs"],s)}return n}(p),h=new yE;return Object.assign(h,g),h})}{const f=function hH(e,t){const n={},o=u(e,["config"]);return null!=o&&function fH(e,t,n){const r=u(e,["pageSize"]);void 0!==t&&null!=r&&d(t,["_query","pageSize"],r);const i=u(e,["pageToken"]);void 0!==t&&null!=i&&d(t,["_query","pageToken"],i);const s=u(e,["filter"]);void 0!==t&&null!=s&&d(t,["_query","filter"],s)}(o,n),n}(t);return l=N("tunedModels",f._url),c=f._query,delete f._url,delete f._query,a=n.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const h=g;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const g=function mH(e,t){const n={},o=u(e,["sdkHttpResponse"]);null!=o&&d(n,["sdkHttpResponse"],o);const r=u(e,["nextPageToken"]);null!=r&&d(n,["nextPageToken"],r);const i=u(e,["tunedModels"]);if(null!=i){let s=i;Array.isArray(s)&&(s=s.map(a=>lD(a))),d(n,["tuningJobs"],s)}return n}(p),h=new yE;return Object.assign(h,g),h})}})()}cancel(t){var n=this;return T(function*(){var o,r,i,s;let a="",l={};if(n.apiClient.isVertexAI()){const c=function iH(e,t){const n={},o=u(e,["name"]);return null!=o&&d(n,["_url","name"],o),n}(t);a=N("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,yield n.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal})}else{const c=function rH(e,t){const n={},o=u(e,["name"]);return null!=o&&d(n,["_url","name"],o),n}(t);a=N("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,yield n.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(i=t.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=t.config)||void 0===s?void 0:s.abortSignal})}})()}tuneInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI()){const l=uH(t);return s=N("tuningJobs",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>Kd(c))}throw new Error("This method is only supported by the Vertex AI.")})()}tuneMldevInternal(t){var n=this;return T(function*(){var o,r;let i,s="",a={};if(n.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function lH(e,t){const n={},o=u(e,["baseModel"]);null!=o&&d(n,["baseModel"],o);const r=u(e,["preTunedModel"]);null!=r&&d(n,["preTunedModel"],r);const i=u(e,["trainingDataset"]);null!=i&&d(n,["tuningTask","trainingData"],function _H(e,t){const n={};if(void 0!==u(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==u(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=u(e,["examples"]);if(null!=o){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),d(n,["examples","examples"],r)}return n}(i));const s=u(e,["config"]);return null!=s&&function sH(e,t,n){const o={};if(void 0!==u(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&d(t,["displayName"],r),void 0!==u(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const i=u(e,["epochCount"]);void 0!==t&&null!=i&&d(t,["tuningTask","hyperparameters","epochCount"],i);const s=u(e,["learningRateMultiplier"]);if(null!=s&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),void 0!==u(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==u(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==u(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(e,["batchSize"]);void 0!==t&&null!=a&&d(t,["tuningTask","hyperparameters","batchSize"],a);const l=u(e,["learningRate"]);if(void 0!==t&&null!=l&&d(t,["tuningTask","hyperparameters","learningRate"],l),void 0!==u(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.")}(s,n),n}(t);return s=N("tunedModels",l._url),a=l._query,delete l._url,delete l._query,i=n.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(o=t.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=t.config)||void 0===r?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>function EH(e,t){const n={},o=u(e,["sdkHttpResponse"]);null!=o&&d(n,["sdkHttpResponse"],o);const r=u(e,["name"]);null!=r&&d(n,["name"],r);const i=u(e,["metadata"]);null!=i&&d(n,["metadata"],i);const s=u(e,["done"]);null!=s&&d(n,["done"],s);const a=u(e,["error"]);return null!=a&&d(n,["error"],a),n}(c))}})()}}class TH{download(t,n){return T(function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})()}}const Zd="x-goog-upload-status";function Qd(){return(Qd=T(function*(e,t,n){var o,r,i;let s=0,a=0,l=new Ld(new Response),c="upload";for(s=e.size;a<s;){const p=Math.min(8388608,s-a),g=e.slice(a,a+p);a+p>=s&&(c+=", finalize");let h=0,m=1e3;for(;h<3&&(l=yield n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),null===(o=l?.headers)||void 0===o||!o[Zd]);)h++,yield bH(m),m*=2;if(a+=p,"active"!==(null===(r=l?.headers)||void 0===r?void 0:r[Zd]))break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=yield l?.json();if("final"!==(null===(i=l?.headers)||void 0===i?void 0:i[Zd]))throw new Error("Failed to upload file: Upload status is not finalized.");return f.file})).apply(this,arguments)}function Xd(){return(Xd=T(function*(e){return{size:e.size,type:e.type}})).apply(this,arguments)}function bH(e){return new Promise(t=>setTimeout(t,e))}class PH{upload(t,n,o){return T(function*(){if("string"==typeof t)throw new Error("File path is not supported in browser uploader.");return yield function NH(e,t,n){return Qd.apply(this,arguments)}(t,n,o)})()}stat(t){return T(function*(){if("string"==typeof t)throw new Error("File path is not supported in browser uploader.");return yield function RH(e){return Xd.apply(this,arguments)}(t)})()}}class xH{create(t,n,o){return new FH(t,n,o)}}class FH{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const uD="x-goog-api-key";class kH{constructor(t){this.apiKey=t}addAuthHeaders(t,n){var o=this;return T(function*(){if(null===t.get(uD)){if(o.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!o.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(uD,o.apiKey)}})()}}class VH{constructor(t){var n;if(null==t.apiKey)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(n=t.vertexai)&&void 0!==n&&n,this.apiKey=t.apiKey;const o=function dL(e,t,n,o){var r,i;if(!e?.baseUrl){const s={geminiUrl:void 0,vertexUrl:void 0};return t?null!==(r=s.vertexUrl)&&void 0!==r?r:n:null!==(i=s.geminiUrl)&&void 0!==i?i:o}return e.baseUrl}(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const r=new kH(this.apiKey);this.apiClient=new EB({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:"gl-node/web",uploader:new PH,downloader:new TH}),this.models=new HB(this.apiClient),this.live=new FB(this.apiClient,r,new xH),this.batches=new E1(this.apiClient),this.chats=new j1(this.models,this.apiClient),this.caches=new Z1(this.apiClient),this.files=new uO(this.apiClient),this.operations=new GB(this.apiClient),this.authTokens=new oH(this.apiClient),this.tunings=new IH(this.apiClient)}}const cD={production:!0,geminiApiKey:process.env.GEMINI_API_KEY};let OH=(()=>{class e{constructor(){if(!cD.geminiApiKey)throw new Error("API_KEY environment variable not set.");this.ai=new VH({apiKey:cD.geminiApiKey})}getRecipeSuggestions(n,o){var r=this;return T(function*(){const i=`\n  You are an expert multilingual chef who can create delicious recipes in any language.\n\n  Based on the following ingredients: "${n}", and an optional preferred cuisine of "${o||"any"}", please suggest 3 distinct recipes.\n\n  Before generating, detect the language of the provided ingredients automatically. \n  Then, write the entire output (dish names, descriptions, ingredients, and instructions) in that same language.\n\n  For each recipe, provide the following details:\n  1. A name for the dish.\n  2. A brief, enticing description.\n  3. A list of ingredients with quantities. Use mainly the provided ingredients, but you may include common pantry staples like oil, salt, pepper, water, fish sauce, oyster sauce or spices if needed.\n  4. A clear, step-by-step set of cooking instructions.\n  5. Ensure the dish is common and practical to prepare at home.\n  6. Ensure the dish is not too complicated and can be made within 30-45 minutes.\n\n  Provide the response as a valid JSON array of recipe objects that adheres to the provided schema.\n`,s={type:Fe.ARRAY,items:{type:Fe.OBJECT,properties:{name:{type:Fe.STRING,description:"The name of the recipe."},description:{type:Fe.STRING,description:"A short, enticing description of the dish."},ingredients:{type:Fe.ARRAY,description:"List of ingredients for the recipe.",items:{type:Fe.OBJECT,properties:{item:{type:Fe.STRING,description:"The name of the ingredient."},quantity:{type:Fe.STRING,description:"The amount of the ingredient (e.g., '1 cup', '2 tbsp')."}},required:["item","quantity"]}},instructions:{type:Fe.ARRAY,description:"Step-by-step cooking instructions.",items:{type:Fe.STRING,description:"A single step in the cooking process."}}},required:["name","description","ingredients","instructions"]}},l=(yield r.ai.models.generateContent({model:"gemini-2.5-flash-lite",contents:i,config:{responseMimeType:"application/json",responseSchema:s,temperature:.7}})).text?.trim()??"";try{return JSON.parse(l)}catch{throw console.error("Failed to parse JSON response:",l),new Error("Received an invalid format from the AI. Please try again.")}})()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function UH(e,t){1&e&&(ks(0),ve(1,"span"),dt(2,"Thinking..."),_e(),Ls())}function BH(e,t){1&e&&dt(0,"Find Recipes")}let dD=(()=>{class e{constructor(n){this.geminiService=n,this.loading=!1,this.suggestions=[],this.ingredients="",this.cuisine="",this.suggestionsChange=new xe}fetchingSuggestions(){var n=this;return T(function*(){n.loading=!0;try{const o=yield n.geminiService.getRecipeSuggestions(n.ingredients,n.cuisine);n.suggestions=o,n.suggestionsChange.emit(n.suggestions)}catch(o){console.error(o)}finally{n.loading=!1}})()}static{this.\u0275fac=function(o){return new(o||e)(w(OH))}}static{this.\u0275cmp=Pi({type:e,selectors:[["app-suggestion-box"]],outputs:{suggestionsChange:"suggestionsChange"},standalone:!0,features:[pc],decls:13,vars:5,consts:[[1,"space-y-6"],["for","ingredients",1,"block","text-sm","font-medium","text-slate-700","mb-1"],["id","ingredients","name","ingredients","rows","4","placeholder","e.g., chicken breast, tomatoes, onion, garlic, rice",1,"w-full","p-3","border","border-slate-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition","duration-150","ease-in-out",3,"ngModel","ngModelChange"],["for","cuisine",1,"block","text-sm","font-medium","text-slate-700","mb-1"],["type","text","id","cuisine","name","cuisine","placeholder","e.g., Italian, Asian, Mexican",1,"w-full","p-3","border","border-slate-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition","duration-150","ease-in-out",3,"ngModel","ngModelChange"],[1,"w-full","flex","justify-center","items-center","gap-2","bg-indigo-600","text-white","font-semibold","py-3","px-4","rounded-lg","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:bg-indigo-300","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled","click"],[4,"ngIf","ngIfElse"],["notLoading",""]],template:function(o,r){if(1&o&&(ve(0,"div",0)(1,"div")(2,"label",1),dt(3," What's in your fridge? \u{1f35a} \u{1f9c5} \u{1f969} "),_e(),ve(4,"textarea",2),Je("ngModelChange",function(s){return r.ingredients=s}),_e()(),ve(5,"div")(6,"label",3),dt(7," Preferred Cuisine (optional) "),_e(),ve(8,"input",4),Je("ngModelChange",function(s){return r.cuisine=s}),_e()(),ve(9,"button",5),Je("click",function(){return r.fetchingSuggestions()}),wn(10,UH,3,0,"ng-container",6),wn(11,BH,1,0,"ng-template",null,7,vv),_e()()),2&o){const i=function Em(e){return function so(e,t){return e[t]}(function UT(){return x.lFrame.contextLView}(),H+e)}(12);ut(4),yt("ngModel",r.ingredients),ut(4),yt("ngModel",r.cuisine),ut(1),yt("disabled",r.loading),ut(1),yt("ngIf",r.loading)("ngIfElse",i)}},dependencies:[X_,da,uL,ga,AC,Sd],encapsulation:2})}}return e})();function HH(e,t){if(1&e&&(ve(0,"li"),dt(1),_e()),2&e){const n=t.$implicit;ut(1),rc("",n.quantity," ",n.item,"")}}function GH(e,t){if(1&e&&(ve(0,"li"),dt(1),_e()),2&e){const n=t.$implicit;ut(1),zr(n)}}function $H(e,t){if(1&e&&(ve(0,"div",1)(1,"div",2)(2,"h3",3),dt(3),_e(),ve(4,"p",4),dt(5),_e(),ve(6,"div",5)(7,"div")(8,"h4",6),dt(9,"Ingredients"),_e(),ve(10,"ul",7),wn(11,HH,2,2,"li",8),_e()(),ve(12,"div")(13,"h4",6),dt(14,"Instructions"),_e(),ve(15,"ol",9),wn(16,GH,2,1,"li",8),_e()()()()()),2&e){const n=Qu();ut(3),zr(n.recipe.name),ut(2),zr(n.recipe.description),ut(6),yt("ngForOf",n.recipe.ingredients),ut(5),yt("ngForOf",n.recipe.instructions)}}let fD=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=Pi({type:e,selectors:[["app-recipe-card"]],inputs:{recipe:"recipe"},standalone:!0,features:[pc],decls:1,vars:1,consts:[["class","bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out",4,"ngIf"],[1,"bg-white","rounded-xl","shadow-md","border","border-slate-200","overflow-hidden","h-full","flex","flex-col","transform","hover:scale-105","transition-transform","duration-300","ease-in-out"],[1,"p-6","flex-grow"],[1,"text-xl","font-bold","text-slate-800","mb-2"],[1,"text-slate-600","text-sm","mb-4"],[1,"space-y-4"],[1,"font-semibold","text-slate-700","border-b","pb-1","mb-2"],[1,"list-disc","list-inside","space-y-1","text-slate-600","text-sm"],[4,"ngFor","ngForOf"],[1,"list-decimal","list-inside","space-y-2","text-slate-600","text-sm"]],template:function(o,r){1&o&&wn(0,$H,17,4,"div",0),2&o&&yt("ngIf",r.recipe)},dependencies:[P_,Qc,da],encapsulation:2})}}return e})();function qH(e,t){1&e&&Zu(0,"app-recipe-card",11),2&e&&yt("recipe",t.$implicit)}function zH(e,t){if(1&e&&(ve(0,"div",9),wn(1,qH,1,1,"app-recipe-card",10),_e()),2&e){const n=Qu();ut(1),yt("ngForOf",n.suggestions)}}let WH=(()=>{class e{constructor(){this.title="let-me-cook-ai",this.suggestions=[]}onSuggestions(n){this.suggestions=n||[]}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=Pi({type:e,selectors:[["app-root"]],decls:11,vars:1,consts:[[1,"min-h-screen","bg-gray-50","flex","flex-col","items-center","p-4","sm:p-6","lg:p-8"],[1,"w-full","max-w-4xl","mx-auto"],[1,"text-center","mb-8"],[1,"text-4xl","sm:text-5xl","font-extrabold","text-slate-900","tracking-tight"],[1,"mt-2","text-lg","text-slate-600"],[1,"bg-white","p-6","sm:p-8","rounded-2xl","shadow-lg","border","border-slate-200"],[3,"suggestionsChange"],[1,"mt-10"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"recipe",4,"ngFor","ngForOf"],[3,"recipe"]],template:function(o,r){1&o&&(ve(0,"div",0)(1,"div",1)(2,"header",2)(3,"h1",3),dt(4," Let Me Cook \u{1f9d1}\u200d\u{1f373} "),_e(),ve(5,"p",4),dt(6," Turn your leftover ingredients into delicious meals. "),_e()(),ve(7,"main",5)(8,"app-suggestion-box",6),Je("suggestionsChange",function(s){return r.onSuggestions(s)}),_e()(),ve(9,"div",7),wn(10,zH,2,1,"div",8),_e()()()),2&o&&(ut(10),yt("ngIf",null==r.suggestions?null:r.suggestions.length))},dependencies:[Qc,da,dD,fD]})}}return e})(),JH=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=yn({type:e,bootstrap:[WH]})}static{this.\u0275inj=Jt({imports:[X_,dD,fD]})}}return e})();JF().bootstrapModule(JH).catch(e=>console.error(e))}},he=>{he(he.s=897)}]);